import{H as Fp,Q as ke,R as Di,U as kn,V as rl,W as Ma,X as DD,Y as Lp,Z as ar,_ as Ft,a as j,b as Pe,c as T1,d as S1,e as Pp,f as D,g as mD,h as tl,i as yD,j as vD,m as wD,p as kp,q as ID,r as xa,v as Op,w as nl,x as _D,y as ED}from"./chunk-JKUAMYJU.js";var vS=T1((Gn,fv)=>{"use strict";(function(t,e){typeof Gn=="object"&&typeof fv<"u"?fv.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis<"u"?globalThis:t||self,t.Sweetalert2=e())})(Gn,function(){"use strict";function t(g,l,h){if(typeof g=="function"?g===l:g.has(l))return arguments.length<3?l:h;throw new TypeError("Private element is not present on this object")}function e(g,l,h){return l=w(l),x(g,o()?Reflect.construct(l,h||[],w(g).constructor):l.apply(g,h))}function n(g,l){return g.get(t(g,l))}function r(g,l,h){return g.set(t(g,l),h),h}function i(g,l,h){if(o())return Reflect.construct.apply(null,arguments);var p=[null];p.push.apply(p,l);var v=new(g.bind.apply(g,p));return h&&_(v,h.prototype),v}function o(){try{var g=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(o=function(){return!!g})()}function s(g,l){var h=g==null?null:typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(h!=null){var p,v,C,F,se=[],ue=!0,Fe=!1;try{if(C=(h=h.call(g)).next,l===0){if(Object(h)!==h)return;ue=!1}else for(;!(ue=(p=C.call(h)).done)&&(se.push(p.value),se.length!==l);ue=!0);}catch(Aa){Fe=!0,v=Aa}finally{try{if(!ue&&h.return!=null&&(F=h.return(),Object(F)!==F))return}finally{if(Fe)throw v}}return se}}function a(g,l){if(typeof g!="object"||!g)return g;var h=g[Symbol.toPrimitive];if(h!==void 0){var p=h.call(g,l||"default");if(typeof p!="object")return p;throw new TypeError("@@toPrimitive must return a primitive value.")}return(l==="string"?String:Number)(g)}function u(g){var l=a(g,"string");return typeof l=="symbol"?l:l+""}function c(g){"@babel/helpers - typeof";return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},c(g)}function d(g,l){if(!(g instanceof l))throw new TypeError("Cannot call a class as a function")}function f(g,l){for(var h=0;h<l.length;h++){var p=l[h];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(g,u(p.key),p)}}function m(g,l,h){return l&&f(g.prototype,l),h&&f(g,h),Object.defineProperty(g,"prototype",{writable:!1}),g}function y(g,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(l&&l.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),Object.defineProperty(g,"prototype",{writable:!1}),l&&_(g,l)}function w(g){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(h){return h.__proto__||Object.getPrototypeOf(h)},w(g)}function _(g,l){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(p,v){return p.__proto__=v,p},_(g,l)}function T(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function x(g,l){if(l&&(typeof l=="object"||typeof l=="function"))return l;if(l!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return T(g)}function V(g,l){for(;!Object.prototype.hasOwnProperty.call(g,l)&&(g=w(g),g!==null););return g}function M(){return typeof Reflect<"u"&&Reflect.get?M=Reflect.get.bind():M=function(l,h,p){var v=V(l,h);if(v){var C=Object.getOwnPropertyDescriptor(v,h);return C.get?C.get.call(arguments.length<3?l:p):C.value}},M.apply(this,arguments)}function H(g,l){return Ie(g)||s(g,l)||Mo(g,l)||$N()}function W(g){return Y(g)||yt(g)||Mo(g)||UN()}function Y(g){if(Array.isArray(g))return Mr(g)}function Ie(g){if(Array.isArray(g))return g}function yt(g){if(typeof Symbol<"u"&&g[Symbol.iterator]!=null||g["@@iterator"]!=null)return Array.from(g)}function Mo(g,l){if(g){if(typeof g=="string")return Mr(g,l);var h=Object.prototype.toString.call(g).slice(8,-1);if(h==="Object"&&g.constructor&&(h=g.constructor.name),h==="Map"||h==="Set")return Array.from(g);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return Mr(g,l)}}function Mr(g,l){(l==null||l>g.length)&&(l=g.length);for(var h=0,p=new Array(l);h<l;h++)p[h]=g[h];return p}function UN(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $N(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HN(g,l){if(l.has(g))throw new TypeError("Cannot initialize the same private elements twice on an object")}function qN(g,l,h){HN(g,l),l.set(g,h)}var zN=100,ie={},GN=function(){ie.previousActiveElement instanceof HTMLElement?(ie.previousActiveElement.focus(),ie.previousActiveElement=null):document.body&&document.body.focus()},WN=function(l){return new Promise(function(h){if(!l)return h();var p=window.scrollX,v=window.scrollY;ie.restoreFocusTimeout=setTimeout(function(){GN(),h()},zN),window.scrollTo(p,v)})},mE="swal2-",KN=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"],b=KN.reduce(function(g,l){return g[l]=mE+l,g},{}),QN=["success","warning","info","question","error"],Hc=QN.reduce(function(g,l){return g[l]=mE+l,g},{}),yE="SweetAlert2:",gp=function(l){return l.charAt(0).toUpperCase()+l.slice(1)},kt=function(l){console.warn("".concat(yE," ").concat(c(l)==="object"?l.join(" "):l))},yi=function(l){console.error("".concat(yE," ").concat(l))},vE=[],YN=function(l){vE.includes(l)||(vE.push(l),kt(l))},ZN=function(l,h){YN('"'.concat(l,'" is deprecated and will be removed in the next major release. Please use "').concat(h,'" instead.'))},qc=function(l){return typeof l=="function"?l():l},mp=function(l){return l&&typeof l.toPromise=="function"},_a=function(l){return mp(l)?l.toPromise():Promise.resolve(l)},yp=function(l){return l&&Promise.resolve(l)===l},Ot=function(){return document.body.querySelector(".".concat(b.container))},Ea=function(l){var h=Ot();return h?h.querySelector(l):null},zt=function(l){return Ea(".".concat(l))},_e=function(){return zt(b.popup)},Da=function(){return zt(b.icon)},JN=function(){return zt(b["icon-content"])},wE=function(){return zt(b.title)},vp=function(){return zt(b["html-container"])},IE=function(){return zt(b.image)},wp=function(){return zt(b["progress-steps"])},zc=function(){return zt(b["validation-message"])},Rn=function(){return Ea(".".concat(b.actions," .").concat(b.confirm))},Ro=function(){return Ea(".".concat(b.actions," .").concat(b.cancel))},vi=function(){return Ea(".".concat(b.actions," .").concat(b.deny))},XN=function(){return zt(b["input-label"])},No=function(){return Ea(".".concat(b.loader))},ba=function(){return zt(b.actions)},_E=function(){return zt(b.footer)},Gc=function(){return zt(b["timer-progress-bar"])},Ip=function(){return zt(b.close)},eP=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,_p=function(){var l=_e();if(!l)return[];var h=l.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),p=Array.from(h).sort(function(F,se){var ue=parseInt(F.getAttribute("tabindex")||"0"),Fe=parseInt(se.getAttribute("tabindex")||"0");return ue>Fe?1:ue<Fe?-1:0}),v=l.querySelectorAll(eP),C=Array.from(v).filter(function(F){return F.getAttribute("tabindex")!=="-1"});return W(new Set(p.concat(C))).filter(function(F){return Wt(F)})},Ep=function(){return sr(document.body,b.shown)&&!sr(document.body,b["toast-shown"])&&!sr(document.body,b["no-backdrop"])},Wc=function(){var l=_e();return l?sr(l,b.toast):!1},tP=function(){var l=_e();return l?l.hasAttribute("data-loading"):!1},Gt=function(l,h){if(l.textContent="",h){var p=new DOMParser,v=p.parseFromString(h,"text/html"),C=v.querySelector("head");C&&Array.from(C.childNodes).forEach(function(se){l.appendChild(se)});var F=v.querySelector("body");F&&Array.from(F.childNodes).forEach(function(se){se instanceof HTMLVideoElement||se instanceof HTMLAudioElement?l.appendChild(se.cloneNode(!0)):l.appendChild(se)})}},sr=function(l,h){if(!h)return!1;for(var p=h.split(/\s+/),v=0;v<p.length;v++)if(!l.classList.contains(p[v]))return!1;return!0},nP=function(l,h){Array.from(l.classList).forEach(function(p){!Object.values(b).includes(p)&&!Object.values(Hc).includes(p)&&!Object.values(h.showClass||{}).includes(p)&&l.classList.remove(p)})},rn=function(l,h,p){if(nP(l,h),h.customClass&&h.customClass[p]){if(typeof h.customClass[p]!="string"&&!h.customClass[p].forEach){kt("Invalid type of customClass.".concat(p,'! Expected string or iterable object, got "').concat(c(h.customClass[p]),'"'));return}me(l,h.customClass[p])}},Kc=function(l,h){if(!h)return null;switch(h){case"select":case"textarea":case"file":return l.querySelector(".".concat(b.popup," > .").concat(b[h]));case"checkbox":return l.querySelector(".".concat(b.popup," > .").concat(b.checkbox," input"));case"radio":return l.querySelector(".".concat(b.popup," > .").concat(b.radio," input:checked"))||l.querySelector(".".concat(b.popup," > .").concat(b.radio," input:first-child"));case"range":return l.querySelector(".".concat(b.popup," > .").concat(b.range," input"));default:return l.querySelector(".".concat(b.popup," > .").concat(b.input))}},EE=function(l){if(l.focus(),l.type!=="file"){var h=l.value;l.value="",l.value=h}},DE=function(l,h,p){!l||!h||(typeof h=="string"&&(h=h.split(/\s+/).filter(Boolean)),h.forEach(function(v){Array.isArray(l)?l.forEach(function(C){p?C.classList.add(v):C.classList.remove(v)}):p?l.classList.add(v):l.classList.remove(v)}))},me=function(l,h){DE(l,h,!0)},Nn=function(l,h){DE(l,h,!1)},Rr=function(l,h){for(var p=Array.from(l.children),v=0;v<p.length;v++){var C=p[v];if(C instanceof HTMLElement&&sr(C,h))return C}},wi=function(l,h,p){p==="".concat(parseInt(p))&&(p=parseInt(p)),p||parseInt(p)===0?l.style.setProperty(h,typeof p=="number"?"".concat(p,"px"):p):l.style.removeProperty(h)},it=function(l){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";l&&(l.style.display=h)},vt=function(l){l&&(l.style.display="none")},Dp=function(l){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";l&&new MutationObserver(function(){Ca(l,l.innerHTML,h)}).observe(l,{childList:!0,subtree:!0})},bE=function(l,h,p,v){var C=l.querySelector(h);C&&C.style.setProperty(p,v)},Ca=function(l,h){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";h?it(l,p):vt(l)},Wt=function(l){return!!(l&&(l.offsetWidth||l.offsetHeight||l.getClientRects().length))},rP=function(){return!Wt(Rn())&&!Wt(vi())&&!Wt(Ro())},CE=function(l){return l.scrollHeight>l.clientHeight},TE=function(l){var h=window.getComputedStyle(l),p=parseFloat(h.getPropertyValue("animation-duration")||"0"),v=parseFloat(h.getPropertyValue("transition-duration")||"0");return p>0||v>0},bp=function(l){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,p=Gc();p&&Wt(p)&&(h&&(p.style.transition="none",p.style.width="100%"),setTimeout(function(){p.style.transition="width ".concat(l/1e3,"s linear"),p.style.width="0%"},10))},iP=function(){var l=Gc();if(l){var h=parseInt(window.getComputedStyle(l).width);l.style.removeProperty("transition"),l.style.width="100%";var p=parseInt(window.getComputedStyle(l).width),v=h/p*100;l.style.width="".concat(v,"%")}},SE=function(){return typeof window>"u"||typeof document>"u"},oP=`
 <div aria-labelledby="`.concat(b.title,'" aria-describedby="').concat(b["html-container"],'" class="').concat(b.popup,`" tabindex="-1">
   <button type="button" class="`).concat(b.close,`"></button>
   <ul class="`).concat(b["progress-steps"],`"></ul>
   <div class="`).concat(b.icon,`"></div>
   <img class="`).concat(b.image,`" />
   <h2 class="`).concat(b.title,'" id="').concat(b.title,`"></h2>
   <div class="`).concat(b["html-container"],'" id="').concat(b["html-container"],`"></div>
   <input class="`).concat(b.input,'" id="').concat(b.input,`" />
   <input type="file" class="`).concat(b.file,`" />
   <div class="`).concat(b.range,`">
     <input type="range" />
     <output></output>
   </div>
   <select class="`).concat(b.select,'" id="').concat(b.select,`"></select>
   <div class="`).concat(b.radio,`"></div>
   <label class="`).concat(b.checkbox,`">
     <input type="checkbox" id="`).concat(b.checkbox,`" />
     <span class="`).concat(b.label,`"></span>
   </label>
   <textarea class="`).concat(b.textarea,'" id="').concat(b.textarea,`"></textarea>
   <div class="`).concat(b["validation-message"],'" id="').concat(b["validation-message"],`"></div>
   <div class="`).concat(b.actions,`">
     <div class="`).concat(b.loader,`"></div>
     <button type="button" class="`).concat(b.confirm,`"></button>
     <button type="button" class="`).concat(b.deny,`"></button>
     <button type="button" class="`).concat(b.cancel,`"></button>
   </div>
   <div class="`).concat(b.footer,`"></div>
   <div class="`).concat(b["timer-progress-bar-container"],`">
     <div class="`).concat(b["timer-progress-bar"],`"></div>
   </div>
 </div>
`).replace(/(^|\n)\s*/g,""),sP=function(){var l=Ot();return l?(l.remove(),Nn([document.documentElement,document.body],[b["no-backdrop"],b["toast-shown"],b["has-column"]]),!0):!1},Ii=function(){ie.currentInstance.resetValidationMessage()},aP=function(){var l=_e(),h=Rr(l,b.input),p=Rr(l,b.file),v=l.querySelector(".".concat(b.range," input")),C=l.querySelector(".".concat(b.range," output")),F=Rr(l,b.select),se=l.querySelector(".".concat(b.checkbox," input")),ue=Rr(l,b.textarea);h.oninput=Ii,p.onchange=Ii,F.onchange=Ii,se.onchange=Ii,ue.oninput=Ii,v.oninput=function(){Ii(),C.value=v.value},v.onchange=function(){Ii(),C.value=v.value}},uP=function(l){return typeof l=="string"?document.querySelector(l):l},cP=function(l){var h=_e();h.setAttribute("role",l.toast?"alert":"dialog"),h.setAttribute("aria-live",l.toast?"polite":"assertive"),l.toast||h.setAttribute("aria-modal","true")},lP=function(l){window.getComputedStyle(l).direction==="rtl"&&me(Ot(),b.rtl)},dP=function(l){var h=sP();if(SE()){yi("SweetAlert2 requires document to initialize");return}var p=document.createElement("div");p.className=b.container,h&&me(p,b["no-transition"]),Gt(p,oP);var v=uP(l.target);v.appendChild(p),cP(l),lP(v),aP()},Cp=function(l,h){l instanceof HTMLElement?h.appendChild(l):c(l)==="object"?hP(l,h):l&&Gt(h,l)},hP=function(l,h){l.jquery?fP(h,l):Gt(h,l.toString())},fP=function(l,h){if(l.textContent="",0 in h)for(var p=0;p in h;p++)l.appendChild(h[p].cloneNode(!0));else l.appendChild(h.cloneNode(!0))},_i=function(){if(SE())return!1;var g=document.createElement("div");return typeof g.style.webkitAnimation<"u"?"webkitAnimationEnd":typeof g.style.animation<"u"?"animationend":!1}(),pP=function(l,h){var p=ba(),v=No();!p||!v||(!h.showConfirmButton&&!h.showDenyButton&&!h.showCancelButton?vt(p):it(p),rn(p,h,"actions"),gP(p,v,h),Gt(v,h.loaderHtml||""),rn(v,h,"loader"))};function gP(g,l,h){var p=Rn(),v=vi(),C=Ro();!p||!v||!C||(Tp(p,"confirm",h),Tp(v,"deny",h),Tp(C,"cancel",h),mP(p,v,C,h),h.reverseButtons&&(h.toast?(g.insertBefore(C,p),g.insertBefore(v,p)):(g.insertBefore(C,l),g.insertBefore(v,l),g.insertBefore(p,l))))}function mP(g,l,h,p){if(!p.buttonsStyling){Nn([g,l,h],b.styled);return}me([g,l,h],b.styled),p.confirmButtonColor&&(g.style.backgroundColor=p.confirmButtonColor,me(g,b["default-outline"])),p.denyButtonColor&&(l.style.backgroundColor=p.denyButtonColor,me(l,b["default-outline"])),p.cancelButtonColor&&(h.style.backgroundColor=p.cancelButtonColor,me(h,b["default-outline"]))}function Tp(g,l,h){var p=gp(l);Ca(g,h["show".concat(p,"Button")],"inline-block"),Gt(g,h["".concat(l,"ButtonText")]||""),g.setAttribute("aria-label",h["".concat(l,"ButtonAriaLabel")]||""),g.className=b[l],rn(g,h,"".concat(l,"Button"))}var yP=function(l,h){var p=Ip();p&&(Gt(p,h.closeButtonHtml||""),rn(p,h,"closeButton"),Ca(p,h.showCloseButton),p.setAttribute("aria-label",h.closeButtonAriaLabel||""))},vP=function(l,h){var p=Ot();p&&(wP(p,h.backdrop),IP(p,h.position),_P(p,h.grow),rn(p,h,"container"))};function wP(g,l){typeof l=="string"?g.style.background=l:l||me([document.documentElement,document.body],b["no-backdrop"])}function IP(g,l){l&&(l in b?me(g,b[l]):(kt('The "position" parameter is not valid, defaulting to "center"'),me(g,b.center)))}function _P(g,l){l&&me(g,b["grow-".concat(l)])}var Ae={innerParams:new WeakMap,domCache:new WeakMap},EP=["input","file","range","select","radio","checkbox","textarea"],DP=function(l,h){var p=_e();if(p){var v=Ae.innerParams.get(l),C=!v||h.input!==v.input;EP.forEach(function(F){var se=Rr(p,b[F]);se&&(TP(F,h.inputAttributes),se.className=b[F],C&&vt(se))}),h.input&&(C&&bP(h),SP(h))}},bP=function(l){if(l.input){if(!$e[l.input]){yi("Unexpected type of input! Expected ".concat(Object.keys($e).join(" | "),', got "').concat(l.input,'"'));return}var h=AE(l.input),p=$e[l.input](h,l);it(h),l.inputAutoFocus&&setTimeout(function(){EE(p)})}},CP=function(l){for(var h=0;h<l.attributes.length;h++){var p=l.attributes[h].name;["id","type","value","style"].includes(p)||l.removeAttribute(p)}},TP=function(l,h){var p=Kc(_e(),l);if(p){CP(p);for(var v in h)p.setAttribute(v,h[v])}},SP=function(l){var h=AE(l.input);c(l.customClass)==="object"&&me(h,l.customClass.input)},Sp=function(l,h){(!l.placeholder||h.inputPlaceholder)&&(l.placeholder=h.inputPlaceholder)},Ta=function(l,h,p){if(p.inputLabel){var v=document.createElement("label"),C=b["input-label"];v.setAttribute("for",l.id),v.className=C,c(p.customClass)==="object"&&me(v,p.customClass.inputLabel),v.innerText=p.inputLabel,h.insertAdjacentElement("beforebegin",v)}},AE=function(l){return Rr(_e(),b[l]||b.input)},Qc=function(l,h){["string","number"].includes(c(h))?l.value="".concat(h):yp(h)||kt('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(c(h),'"'))},$e={};$e.text=$e.email=$e.password=$e.number=$e.tel=$e.url=$e.search=$e.date=$e["datetime-local"]=$e.time=$e.week=$e.month=function(g,l){return Qc(g,l.inputValue),Ta(g,g,l),Sp(g,l),g.type=l.input,g},$e.file=function(g,l){return Ta(g,g,l),Sp(g,l),g},$e.range=function(g,l){var h=g.querySelector("input"),p=g.querySelector("output");return Qc(h,l.inputValue),h.type=l.input,Qc(p,l.inputValue),Ta(h,g,l),g},$e.select=function(g,l){if(g.textContent="",l.inputPlaceholder){var h=document.createElement("option");Gt(h,l.inputPlaceholder),h.value="",h.disabled=!0,h.selected=!0,g.appendChild(h)}return Ta(g,g,l),g},$e.radio=function(g){return g.textContent="",g},$e.checkbox=function(g,l){var h=Kc(_e(),"checkbox");h.value="1",h.checked=!!l.inputValue;var p=g.querySelector("span");return Gt(p,l.inputPlaceholder),h},$e.textarea=function(g,l){Qc(g,l.inputValue),Sp(g,l),Ta(g,g,l);var h=function(v){return parseInt(window.getComputedStyle(v).marginLeft)+parseInt(window.getComputedStyle(v).marginRight)};return setTimeout(function(){if("MutationObserver"in window){var p=parseInt(window.getComputedStyle(_e()).width),v=function(){if(document.body.contains(g)){var F=g.offsetWidth+h(g);F>p?_e().style.width="".concat(F,"px"):wi(_e(),"width",l.width)}};new MutationObserver(v).observe(g,{attributes:!0,attributeFilter:["style"]})}}),g};var AP=function(l,h){var p=vp();p&&(Dp(p),rn(p,h,"htmlContainer"),h.html?(Cp(h.html,p),it(p,"block")):h.text?(p.textContent=h.text,it(p,"block")):vt(p),DP(l,h))},xP=function(l,h){var p=_E();p&&(Dp(p),Ca(p,h.footer,"block"),h.footer&&Cp(h.footer,p),rn(p,h,"footer"))},MP=function(l,h){var p=Ae.innerParams.get(l),v=Da();if(v){if(p&&h.icon===p.icon){ME(v,h),xE(v,h);return}if(!h.icon&&!h.iconHtml){vt(v);return}if(h.icon&&Object.keys(Hc).indexOf(h.icon)===-1){yi('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(h.icon,'"')),vt(v);return}it(v),ME(v,h),xE(v,h),me(v,h.showClass&&h.showClass.icon)}},xE=function(l,h){for(var p=0,v=Object.entries(Hc);p<v.length;p++){var C=H(v[p],2),F=C[0],se=C[1];h.icon!==F&&Nn(l,se)}me(l,h.icon&&Hc[h.icon]),kP(l,h),RP(),rn(l,h,"icon")},RP=function(){var l=_e();if(l)for(var h=window.getComputedStyle(l).getPropertyValue("background-color"),p=l.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix"),v=0;v<p.length;v++)p[v].style.backgroundColor=h},NP=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,PP=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,ME=function(l,h){if(!(!h.icon&&!h.iconHtml)){var p=l.innerHTML,v="";if(h.iconHtml)v=RE(h.iconHtml);else if(h.icon==="success")v=NP,p=p.replace(/ style=".*?"/g,"");else if(h.icon==="error")v=PP;else if(h.icon){var C={question:"?",warning:"!",info:"i"};v=RE(C[h.icon])}p.trim()!==v.trim()&&Gt(l,v)}},kP=function(l,h){if(h.iconColor){l.style.color=h.iconColor,l.style.borderColor=h.iconColor;for(var p=0,v=[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"];p<v.length;p++){var C=v[p];bE(l,C,"background-color",h.iconColor)}bE(l,".swal2-success-ring","border-color",h.iconColor)}},RE=function(l){return'<div class="'.concat(b["icon-content"],'">').concat(l,"</div>")},OP=function(l,h){var p=IE();if(p){if(!h.imageUrl){vt(p);return}it(p,""),p.setAttribute("src",h.imageUrl),p.setAttribute("alt",h.imageAlt||""),wi(p,"width",h.imageWidth),wi(p,"height",h.imageHeight),p.className=b.image,rn(p,h,"image")}},FP=function(l,h){var p=Ot(),v=_e();if(!(!p||!v)){if(h.toast){wi(p,"width",h.width),v.style.width="100%";var C=No();C&&v.insertBefore(C,Da())}else wi(v,"width",h.width);wi(v,"padding",h.padding),h.color&&(v.style.color=h.color),h.background&&(v.style.background=h.background),vt(zc()),LP(v,h)}},LP=function(l,h){var p=h.showClass||{};l.className="".concat(b.popup," ").concat(Wt(l)?p.popup:""),h.toast?(me([document.documentElement,document.body],b["toast-shown"]),me(l,b.toast)):me(l,b.modal),rn(l,h,"popup"),typeof h.customClass=="string"&&me(l,h.customClass),h.icon&&me(l,b["icon-".concat(h.icon)])},VP=function(l,h){var p=wp();if(p){var v=h.progressSteps,C=h.currentProgressStep;if(!v||v.length===0||C===void 0){vt(p);return}it(p),p.textContent="",C>=v.length&&kt("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),v.forEach(function(F,se){var ue=jP(F);if(p.appendChild(ue),se===C&&me(ue,b["active-progress-step"]),se!==v.length-1){var Fe=BP(h);p.appendChild(Fe)}})}},jP=function(l){var h=document.createElement("li");return me(h,b["progress-step"]),Gt(h,l),h},BP=function(l){var h=document.createElement("li");return me(h,b["progress-step-line"]),l.progressStepsDistance&&wi(h,"width",l.progressStepsDistance),h},UP=function(l,h){var p=wE();p&&(Dp(p),Ca(p,h.title||h.titleText,"block"),h.title&&Cp(h.title,p),h.titleText&&(p.innerText=h.titleText),rn(p,h,"title"))},NE=function(l,h){FP(l,h),vP(l,h),VP(l,h),MP(l,h),OP(l,h),UP(l,h),yP(l,h),AP(l,h),pP(l,h),xP(l,h);var p=_e();typeof h.didRender=="function"&&p&&h.didRender(p)},$P=function(){return Wt(_e())},PE=function(){var l;return(l=Rn())===null||l===void 0?void 0:l.click()},HP=function(){var l;return(l=vi())===null||l===void 0?void 0:l.click()},qP=function(){var l;return(l=Ro())===null||l===void 0?void 0:l.click()},Po=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),kE=function(l){l.keydownTarget&&l.keydownHandlerAdded&&(l.keydownTarget.removeEventListener("keydown",l.keydownHandler,{capture:l.keydownListenerCapture}),l.keydownHandlerAdded=!1)},zP=function(l,h,p){kE(l),h.toast||(l.keydownHandler=function(v){return WP(h,v,p)},l.keydownTarget=h.keydownListenerCapture?window:_e(),l.keydownListenerCapture=h.keydownListenerCapture,l.keydownTarget.addEventListener("keydown",l.keydownHandler,{capture:l.keydownListenerCapture}),l.keydownHandlerAdded=!0)},Ap=function(l,h){var p,v=_p();if(v.length){l=l+h,l===v.length?l=0:l===-1&&(l=v.length-1),v[l].focus();return}(p=_e())===null||p===void 0||p.focus()},OE=["ArrowRight","ArrowDown"],GP=["ArrowLeft","ArrowUp"],WP=function(l,h,p){l&&(h.isComposing||h.keyCode===229||(l.stopKeydownPropagation&&h.stopPropagation(),h.key==="Enter"?KP(h,l):h.key==="Tab"?QP(h):[].concat(OE,GP).includes(h.key)?YP(h.key):h.key==="Escape"&&ZP(h,l,p)))},KP=function(l,h){if(qc(h.allowEnterKey)){var p=Kc(_e(),h.input);if(l.target&&p&&l.target instanceof HTMLElement&&l.target.outerHTML===p.outerHTML){if(["textarea","file"].includes(h.input))return;PE(),l.preventDefault()}}},QP=function(l){for(var h=l.target,p=_p(),v=-1,C=0;C<p.length;C++)if(h===p[C]){v=C;break}l.shiftKey?Ap(v,-1):Ap(v,1),l.stopPropagation(),l.preventDefault()},YP=function(l){var h=ba(),p=Rn(),v=vi(),C=Ro();if(!(!h||!p||!v||!C)){var F=[p,v,C];if(!(document.activeElement instanceof HTMLElement&&!F.includes(document.activeElement))){var se=OE.includes(l)?"nextElementSibling":"previousElementSibling",ue=document.activeElement;if(ue){for(var Fe=0;Fe<h.children.length;Fe++){if(ue=ue[se],!ue)return;if(ue instanceof HTMLButtonElement&&Wt(ue))break}ue instanceof HTMLButtonElement&&ue.focus()}}}},ZP=function(l,h,p){qc(h.allowEscapeKey)&&(l.preventDefault(),p(Po.esc))},ko={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap},JP=function(){var l=Ot(),h=Array.from(document.body.children);h.forEach(function(p){p.contains(l)||(p.hasAttribute("aria-hidden")&&p.setAttribute("data-previous-aria-hidden",p.getAttribute("aria-hidden")||""),p.setAttribute("aria-hidden","true"))})},FE=function(){var l=Array.from(document.body.children);l.forEach(function(h){h.hasAttribute("data-previous-aria-hidden")?(h.setAttribute("aria-hidden",h.getAttribute("data-previous-aria-hidden")||""),h.removeAttribute("data-previous-aria-hidden")):h.removeAttribute("aria-hidden")})},LE=typeof window<"u"&&!!window.GestureEvent,XP=function(){if(LE&&!sr(document.body,b.iosfix)){var l=document.body.scrollTop;document.body.style.top="".concat(l*-1,"px"),me(document.body,b.iosfix),ek()}},ek=function(){var l=Ot();if(l){var h;l.ontouchstart=function(p){h=tk(p)},l.ontouchmove=function(p){h&&(p.preventDefault(),p.stopPropagation())}}},tk=function(l){var h=l.target,p=Ot(),v=vp();return!p||!v||nk(l)||rk(l)?!1:h===p||!CE(p)&&h instanceof HTMLElement&&h.tagName!=="INPUT"&&h.tagName!=="TEXTAREA"&&!(CE(v)&&v.contains(h))},nk=function(l){return l.touches&&l.touches.length&&l.touches[0].touchType==="stylus"},rk=function(l){return l.touches&&l.touches.length>1},ik=function(){if(sr(document.body,b.iosfix)){var l=parseInt(document.body.style.top,10);Nn(document.body,b.iosfix),document.body.style.top="",document.body.scrollTop=l*-1}},ok=function(){var l=document.createElement("div");l.className=b["scrollbar-measure"],document.body.appendChild(l);var h=l.getBoundingClientRect().width-l.clientWidth;return document.body.removeChild(l),h},Oo=null,sk=function(l){Oo===null&&(document.body.scrollHeight>window.innerHeight||l==="scroll")&&(Oo=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(Oo+ok(),"px"))},ak=function(){Oo!==null&&(document.body.style.paddingRight="".concat(Oo,"px"),Oo=null)};function VE(g,l,h,p){Wc()?BE(g,p):(WN(h).then(function(){return BE(g,p)}),kE(ie)),LE?(l.setAttribute("style","display:none !important"),l.removeAttribute("class"),l.innerHTML=""):l.remove(),Ep()&&(ak(),ik(),FE()),uk()}function uk(){Nn([document.documentElement,document.body],[b.shown,b["height-auto"],b["no-backdrop"],b["toast-shown"]])}function Nr(g){g=lk(g);var l=ko.swalPromiseResolve.get(this),h=ck(this);this.isAwaitingPromise?g.isDismissed||(Sa(this),l(g)):h&&l(g)}var ck=function(l){var h=_e();if(!h)return!1;var p=Ae.innerParams.get(l);if(!p||sr(h,p.hideClass.popup))return!1;Nn(h,p.showClass.popup),me(h,p.hideClass.popup);var v=Ot();return Nn(v,p.showClass.backdrop),me(v,p.hideClass.backdrop),dk(l,h,p),!0};function jE(g){var l=ko.swalPromiseReject.get(this);Sa(this),l&&l(g)}var Sa=function(l){l.isAwaitingPromise&&(delete l.isAwaitingPromise,Ae.innerParams.get(l)||l._destroy())},lk=function(l){return typeof l>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},l)},dk=function(l,h,p){var v=Ot(),C=_i&&TE(h);typeof p.willClose=="function"&&p.willClose(h),C?hk(l,h,v,p.returnFocus,p.didClose):VE(l,v,p.returnFocus,p.didClose)},hk=function(l,h,p,v,C){_i&&(ie.swalCloseEventFinishedCallback=VE.bind(null,l,p,v,C),h.addEventListener(_i,function(F){F.target===h&&(ie.swalCloseEventFinishedCallback(),delete ie.swalCloseEventFinishedCallback)}))},BE=function(l,h){setTimeout(function(){typeof h=="function"&&h.bind(l.params)(),l._destroy&&l._destroy()})},Fo=function(l){var h=_e();if(h||new el,h=_e(),!!h){var p=No();Wc()?vt(Da()):fk(h,l),it(p),h.setAttribute("data-loading","true"),h.setAttribute("aria-busy","true"),h.focus()}},fk=function(l,h){var p=ba(),v=No();!p||!v||(!h&&Wt(Rn())&&(h=Rn()),it(p),h&&(vt(h),v.setAttribute("data-button-to-replace",h.className),p.insertBefore(v,h)),me([l,p],b.loading))},pk=function(l,h){h.input==="select"||h.input==="radio"?wk(l,h):["text","email","number","tel","textarea"].some(function(p){return p===h.input})&&(mp(h.inputValue)||yp(h.inputValue))&&(Fo(Rn()),Ik(l,h))},gk=function(l,h){var p=l.getInput();if(!p)return null;switch(h.input){case"checkbox":return mk(p);case"radio":return yk(p);case"file":return vk(p);default:return h.inputAutoTrim?p.value.trim():p.value}},mk=function(l){return l.checked?1:0},yk=function(l){return l.checked?l.value:null},vk=function(l){return l.files&&l.files.length?l.getAttribute("multiple")!==null?l.files:l.files[0]:null},wk=function(l,h){var p=_e();if(p){var v=function(F){h.input==="select"?_k(p,UE(F),h):h.input==="radio"&&Ek(p,UE(F),h)};mp(h.inputOptions)||yp(h.inputOptions)?(Fo(Rn()),_a(h.inputOptions).then(function(C){l.hideLoading(),v(C)})):c(h.inputOptions)==="object"?v(h.inputOptions):yi("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(c(h.inputOptions)))}},Ik=function(l,h){var p=l.getInput();p&&(vt(p),_a(h.inputValue).then(function(v){p.value=h.input==="number"?"".concat(parseFloat(v)||0):"".concat(v),it(p),p.focus(),l.hideLoading()}).catch(function(v){yi("Error in inputValue promise: ".concat(v)),p.value="",it(p),p.focus(),l.hideLoading()}))};function _k(g,l,h){var p=Rr(g,b.select);if(p){var v=function(F,se,ue){var Fe=document.createElement("option");Fe.value=ue,Gt(Fe,se),Fe.selected=$E(ue,h.inputValue),F.appendChild(Fe)};l.forEach(function(C){var F=C[0],se=C[1];if(Array.isArray(se)){var ue=document.createElement("optgroup");ue.label=F,ue.disabled=!1,p.appendChild(ue),se.forEach(function(Fe){return v(ue,Fe[1],Fe[0])})}else v(p,se,F)}),p.focus()}}function Ek(g,l,h){var p=Rr(g,b.radio);if(p){l.forEach(function(C){var F=C[0],se=C[1],ue=document.createElement("input"),Fe=document.createElement("label");ue.type="radio",ue.name=b.radio,ue.value=F,$E(F,h.inputValue)&&(ue.checked=!0);var Aa=document.createElement("span");Gt(Aa,se),Aa.className=b.label,Fe.appendChild(ue),Fe.appendChild(Aa),p.appendChild(Fe)});var v=p.querySelectorAll("input");v.length&&v[0].focus()}}var UE=function g(l){var h=[];return l instanceof Map?l.forEach(function(p,v){var C=p;c(C)==="object"&&(C=g(C)),h.push([v,C])}):Object.keys(l).forEach(function(p){var v=l[p];c(v)==="object"&&(v=g(v)),h.push([p,v])}),h},$E=function(l,h){return!!h&&h.toString()===l.toString()},Yc=void 0,Dk=function(l){var h=Ae.innerParams.get(l);l.disableButtons(),h.input?HE(l,"confirm"):Mp(l,!0)},bk=function(l){var h=Ae.innerParams.get(l);l.disableButtons(),h.returnInputValueOnDeny?HE(l,"deny"):xp(l,!1)},Ck=function(l,h){l.disableButtons(),h(Po.cancel)},HE=function(l,h){var p=Ae.innerParams.get(l);if(!p.input){yi('The "input" parameter is needed to be set when using returnInputValueOn'.concat(gp(h)));return}var v=l.getInput(),C=gk(l,p);p.inputValidator?Tk(l,C,h):v&&!v.checkValidity()?(l.enableButtons(),l.showValidationMessage(p.validationMessage||v.validationMessage)):h==="deny"?xp(l,C):Mp(l,C)},Tk=function(l,h,p){var v=Ae.innerParams.get(l);l.disableInput();var C=Promise.resolve().then(function(){return _a(v.inputValidator(h,v.validationMessage))});C.then(function(F){l.enableButtons(),l.enableInput(),F?l.showValidationMessage(F):p==="deny"?xp(l,h):Mp(l,h)})},xp=function(l,h){var p=Ae.innerParams.get(l||Yc);if(p.showLoaderOnDeny&&Fo(vi()),p.preDeny){l.isAwaitingPromise=!0;var v=Promise.resolve().then(function(){return _a(p.preDeny(h,p.validationMessage))});v.then(function(C){C===!1?(l.hideLoading(),Sa(l)):l.close({isDenied:!0,value:typeof C>"u"?h:C})}).catch(function(C){return zE(l||Yc,C)})}else l.close({isDenied:!0,value:h})},qE=function(l,h){l.close({isConfirmed:!0,value:h})},zE=function(l,h){l.rejectPromise(h)},Mp=function(l,h){var p=Ae.innerParams.get(l||Yc);if(p.showLoaderOnConfirm&&Fo(),p.preConfirm){l.resetValidationMessage(),l.isAwaitingPromise=!0;var v=Promise.resolve().then(function(){return _a(p.preConfirm(h,p.validationMessage))});v.then(function(C){Wt(zc())||C===!1?(l.hideLoading(),Sa(l)):qE(l,typeof C>"u"?h:C)}).catch(function(C){return zE(l||Yc,C)})}else qE(l,h)};function Zc(){var g=Ae.innerParams.get(this);if(g){var l=Ae.domCache.get(this);vt(l.loader),Wc()?g.icon&&it(Da()):Sk(l),Nn([l.popup,l.actions],b.loading),l.popup.removeAttribute("aria-busy"),l.popup.removeAttribute("data-loading"),l.confirmButton.disabled=!1,l.denyButton.disabled=!1,l.cancelButton.disabled=!1}}var Sk=function(l){var h=l.popup.getElementsByClassName(l.loader.getAttribute("data-button-to-replace"));h.length?it(h[0],"inline-block"):rP()&&vt(l.actions)};function GE(){var g=Ae.innerParams.get(this),l=Ae.domCache.get(this);return l?Kc(l.popup,g.input):null}function WE(g,l,h){var p=Ae.domCache.get(g);l.forEach(function(v){p[v].disabled=h})}function KE(g,l){var h=_e();if(!(!h||!g))if(g.type==="radio")for(var p=h.querySelectorAll('[name="'.concat(b.radio,'"]')),v=0;v<p.length;v++)p[v].disabled=l;else g.disabled=l}function QE(){WE(this,["confirmButton","denyButton","cancelButton"],!1)}function YE(){WE(this,["confirmButton","denyButton","cancelButton"],!0)}function ZE(){KE(this.getInput(),!1)}function JE(){KE(this.getInput(),!0)}function XE(g){var l=Ae.domCache.get(this),h=Ae.innerParams.get(this);Gt(l.validationMessage,g),l.validationMessage.className=b["validation-message"],h.customClass&&h.customClass.validationMessage&&me(l.validationMessage,h.customClass.validationMessage),it(l.validationMessage);var p=this.getInput();p&&(p.setAttribute("aria-invalid","true"),p.setAttribute("aria-describedby",b["validation-message"]),EE(p),me(p,b.inputerror))}function eD(){var g=Ae.domCache.get(this);g.validationMessage&&vt(g.validationMessage);var l=this.getInput();l&&(l.removeAttribute("aria-invalid"),l.removeAttribute("aria-describedby"),Nn(l,b.inputerror))}var Lo={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},Ak=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],xk={},Mk=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],tD=function(l){return Object.prototype.hasOwnProperty.call(Lo,l)},nD=function(l){return Ak.indexOf(l)!==-1},rD=function(l){return xk[l]},Rk=function(l){tD(l)||kt('Unknown parameter "'.concat(l,'"'))},Nk=function(l){Mk.includes(l)&&kt('The parameter "'.concat(l,'" is incompatible with toasts'))},Pk=function(l){var h=rD(l);h&&ZN(l,h)},kk=function(l){l.backdrop===!1&&l.allowOutsideClick&&kt('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(var h in l)Rk(h),l.toast&&Nk(h),Pk(h)};function iD(g){var l=_e(),h=Ae.innerParams.get(this);if(!l||sr(l,h.hideClass.popup)){kt("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}var p=Ok(g),v=Object.assign({},h,p);NE(this,v),Ae.innerParams.set(this,v),Object.defineProperties(this,{params:{value:Object.assign({},this.params,g),writable:!1,enumerable:!0}})}var Ok=function(l){var h={};return Object.keys(l).forEach(function(p){nD(p)?h[p]=l[p]:kt("Invalid parameter to update: ".concat(p))}),h};function oD(){var g=Ae.domCache.get(this),l=Ae.innerParams.get(this);if(!l){sD(this);return}g.popup&&ie.swalCloseEventFinishedCallback&&(ie.swalCloseEventFinishedCallback(),delete ie.swalCloseEventFinishedCallback),typeof l.didDestroy=="function"&&l.didDestroy(),Fk(this)}var Fk=function(l){sD(l),delete l.params,delete ie.keydownHandler,delete ie.keydownTarget,delete ie.currentInstance},sD=function(l){l.isAwaitingPromise?(Rp(Ae,l),l.isAwaitingPromise=!0):(Rp(ko,l),Rp(Ae,l),delete l.isAwaitingPromise,delete l.disableButtons,delete l.enableButtons,delete l.getInput,delete l.disableInput,delete l.enableInput,delete l.hideLoading,delete l.disableLoading,delete l.showValidationMessage,delete l.resetValidationMessage,delete l.close,delete l.closePopup,delete l.closeModal,delete l.closeToast,delete l.rejectPromise,delete l.update,delete l._destroy)},Rp=function(l,h){for(var p in l)l[p].delete(h)},Lk=Object.freeze({__proto__:null,_destroy:oD,close:Nr,closeModal:Nr,closePopup:Nr,closeToast:Nr,disableButtons:YE,disableInput:JE,disableLoading:Zc,enableButtons:QE,enableInput:ZE,getInput:GE,handleAwaitingPromise:Sa,hideLoading:Zc,rejectPromise:jE,resetValidationMessage:eD,showValidationMessage:XE,update:iD}),Vk=function(l,h,p){l.toast?jk(l,h,p):(Uk(h),$k(h),Hk(l,h,p))},jk=function(l,h,p){h.popup.onclick=function(){l&&(Bk(l)||l.timer||l.input)||p(Po.close)}},Bk=function(l){return!!(l.showConfirmButton||l.showDenyButton||l.showCancelButton||l.showCloseButton)},Jc=!1,Uk=function(l){l.popup.onmousedown=function(){l.container.onmouseup=function(h){l.container.onmouseup=function(){},h.target===l.container&&(Jc=!0)}}},$k=function(l){l.container.onmousedown=function(h){h.target===l.container&&h.preventDefault(),l.popup.onmouseup=function(p){l.popup.onmouseup=function(){},(p.target===l.popup||p.target instanceof HTMLElement&&l.popup.contains(p.target))&&(Jc=!0)}}},Hk=function(l,h,p){h.container.onclick=function(v){if(Jc){Jc=!1;return}v.target===h.container&&qc(l.allowOutsideClick)&&p(Po.backdrop)}},qk=function(l){return c(l)==="object"&&l.jquery},aD=function(l){return l instanceof Element||qk(l)},zk=function(l){var h={};return c(l[0])==="object"&&!aD(l[0])?Object.assign(h,l[0]):["title","html","icon"].forEach(function(p,v){var C=l[v];typeof C=="string"||aD(C)?h[p]=C:C!==void 0&&yi("Unexpected type of ".concat(p,'! Expected "string" or "Element", got ').concat(c(C)))}),h};function Gk(){for(var g=this,l=arguments.length,h=new Array(l),p=0;p<l;p++)h[p]=arguments[p];return i(g,h)}function Wk(g){var l=function(h){function p(){return d(this,p),e(this,p,arguments)}return y(p,h),m(p,[{key:"_main",value:function(C,F){return M(w(p.prototype),"_main",this).call(this,C,Object.assign({},g,F))}}])}(this);return l}var Kk=function(){return ie.timeout&&ie.timeout.getTimerLeft()},uD=function(){if(ie.timeout)return iP(),ie.timeout.stop()},cD=function(){if(ie.timeout){var l=ie.timeout.start();return bp(l),l}},Qk=function(){var l=ie.timeout;return l&&(l.running?uD():cD())},Yk=function(l){if(ie.timeout){var h=ie.timeout.increase(l);return bp(h,!0),h}},Zk=function(){return!!(ie.timeout&&ie.timeout.isRunning())},lD=!1,Np={};function Jk(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";Np[g]=this,lD||(document.body.addEventListener("click",Xk),lD=!0)}var Xk=function(l){for(var h=l.target;h&&h!==document;h=h.parentNode)for(var p in Np){var v=h.getAttribute(p);if(v){Np[p].fire({template:v});return}}},e1=Object.freeze({__proto__:null,argsToParams:zk,bindClickHandler:Jk,clickCancel:qP,clickConfirm:PE,clickDeny:HP,enableLoading:Fo,fire:Gk,getActions:ba,getCancelButton:Ro,getCloseButton:Ip,getConfirmButton:Rn,getContainer:Ot,getDenyButton:vi,getFocusableElements:_p,getFooter:_E,getHtmlContainer:vp,getIcon:Da,getIconContent:JN,getImage:IE,getInputLabel:XN,getLoader:No,getPopup:_e,getProgressSteps:wp,getTimerLeft:Kk,getTimerProgressBar:Gc,getTitle:wE,getValidationMessage:zc,increaseTimer:Yk,isDeprecatedParameter:rD,isLoading:tP,isTimerRunning:Zk,isUpdatableParameter:nD,isValidParameter:tD,isVisible:$P,mixin:Wk,resumeTimer:cD,showLoading:Fo,stopTimer:uD,toggleTimer:Qk}),t1=function(){function g(l,h){d(this,g),this.callback=l,this.remaining=h,this.running=!1,this.start()}return m(g,[{key:"start",value:function(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}},{key:"stop",value:function(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}},{key:"increase",value:function(h){var p=this.running;return p&&this.stop(),this.remaining+=h,p&&this.start(),this.remaining}},{key:"getTimerLeft",value:function(){return this.running&&(this.stop(),this.start()),this.remaining}},{key:"isRunning",value:function(){return this.running}}])}(),dD=["swal-title","swal-html","swal-footer"],n1=function(l){var h=typeof l.template=="string"?document.querySelector(l.template):l.template;if(!h)return{};var p=h.content;l1(p);var v=Object.assign(r1(p),i1(p),o1(p),s1(p),a1(p),u1(p),c1(p,dD));return v},r1=function(l){var h={},p=Array.from(l.querySelectorAll("swal-param"));return p.forEach(function(v){Ei(v,["name","value"]);var C=v.getAttribute("name"),F=v.getAttribute("value");typeof Lo[C]=="boolean"?h[C]=F!=="false":c(Lo[C])==="object"?h[C]=JSON.parse(F):h[C]=F}),h},i1=function(l){var h={},p=Array.from(l.querySelectorAll("swal-function-param"));return p.forEach(function(v){var C=v.getAttribute("name"),F=v.getAttribute("value");h[C]=new Function("return ".concat(F))()}),h},o1=function(l){var h={},p=Array.from(l.querySelectorAll("swal-button"));return p.forEach(function(v){Ei(v,["type","color","aria-label"]);var C=v.getAttribute("type");h["".concat(C,"ButtonText")]=v.innerHTML,h["show".concat(gp(C),"Button")]=!0,v.hasAttribute("color")&&(h["".concat(C,"ButtonColor")]=v.getAttribute("color")),v.hasAttribute("aria-label")&&(h["".concat(C,"ButtonAriaLabel")]=v.getAttribute("aria-label"))}),h},s1=function(l){var h={},p=l.querySelector("swal-image");return p&&(Ei(p,["src","width","height","alt"]),p.hasAttribute("src")&&(h.imageUrl=p.getAttribute("src")),p.hasAttribute("width")&&(h.imageWidth=p.getAttribute("width")),p.hasAttribute("height")&&(h.imageHeight=p.getAttribute("height")),p.hasAttribute("alt")&&(h.imageAlt=p.getAttribute("alt"))),h},a1=function(l){var h={},p=l.querySelector("swal-icon");return p&&(Ei(p,["type","color"]),p.hasAttribute("type")&&(h.icon=p.getAttribute("type")),p.hasAttribute("color")&&(h.iconColor=p.getAttribute("color")),h.iconHtml=p.innerHTML),h},u1=function(l){var h={},p=l.querySelector("swal-input");p&&(Ei(p,["type","label","placeholder","value"]),h.input=p.getAttribute("type")||"text",p.hasAttribute("label")&&(h.inputLabel=p.getAttribute("label")),p.hasAttribute("placeholder")&&(h.inputPlaceholder=p.getAttribute("placeholder")),p.hasAttribute("value")&&(h.inputValue=p.getAttribute("value")));var v=Array.from(l.querySelectorAll("swal-input-option"));return v.length&&(h.inputOptions={},v.forEach(function(C){Ei(C,["value"]);var F=C.getAttribute("value"),se=C.innerHTML;h.inputOptions[F]=se})),h},c1=function(l,h){var p={};for(var v in h){var C=h[v],F=l.querySelector(C);F&&(Ei(F,[]),p[C.replace(/^swal-/,"")]=F.innerHTML.trim())}return p},l1=function(l){var h=dD.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(l.children).forEach(function(p){var v=p.tagName.toLowerCase();h.includes(v)||kt("Unrecognized element <".concat(v,">"))})},Ei=function(l,h){Array.from(l.attributes).forEach(function(p){h.indexOf(p.name)===-1&&kt(['Unrecognized attribute "'.concat(p.name,'" on <').concat(l.tagName.toLowerCase(),">."),"".concat(h.length?"Allowed attributes are: ".concat(h.join(", ")):"To set the value, use HTML within the element.")])})},hD=10,d1=function(l){var h=Ot(),p=_e();typeof l.willOpen=="function"&&l.willOpen(p);var v=window.getComputedStyle(document.body),C=v.overflowY;g1(h,p,l),setTimeout(function(){f1(h,p)},hD),Ep()&&(p1(h,l.scrollbarPadding,C),JP()),!Wc()&&!ie.previousActiveElement&&(ie.previousActiveElement=document.activeElement),typeof l.didOpen=="function"&&setTimeout(function(){return l.didOpen(p)}),Nn(h,b["no-transition"])},h1=function g(l){var h=_e();if(!(l.target!==h||!_i)){var p=Ot();h.removeEventListener(_i,g),p.style.overflowY="auto"}},f1=function(l,h){_i&&TE(h)?(l.style.overflowY="hidden",h.addEventListener(_i,h1)):l.style.overflowY="auto"},p1=function(l,h,p){XP(),h&&p!=="hidden"&&sk(p),setTimeout(function(){l.scrollTop=0})},g1=function(l,h,p){me(l,p.showClass.backdrop),p.animation?(h.style.setProperty("opacity","0","important"),it(h,"grid"),setTimeout(function(){me(h,p.showClass.popup),h.style.removeProperty("opacity")},hD)):it(h,"grid"),me([document.documentElement,document.body],b.shown),p.heightAuto&&p.backdrop&&!p.toast&&me([document.documentElement,document.body],b["height-auto"])},fD={email:function(l,h){return/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(l)?Promise.resolve():Promise.resolve(h||"Invalid email address")},url:function(l,h){return/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(l)?Promise.resolve():Promise.resolve(h||"Invalid URL")}};function m1(g){g.inputValidator||(g.input==="email"&&(g.inputValidator=fD.email),g.input==="url"&&(g.inputValidator=fD.url))}function y1(g){(!g.target||typeof g.target=="string"&&!document.querySelector(g.target)||typeof g.target!="string"&&!g.target.appendChild)&&(kt('Target parameter is not valid, defaulting to "body"'),g.target="body")}function v1(g){m1(g),g.showLoaderOnConfirm&&!g.preConfirm&&kt(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),y1(g),typeof g.title=="string"&&(g.title=g.title.split(`
`).join("<br />")),dP(g)}var Pn,Xc=new WeakMap,He=function(){function g(){if(d(this,g),qN(this,Xc,void 0),!(typeof window>"u")){Pn=this;for(var l=arguments.length,h=new Array(l),p=0;p<l;p++)h[p]=arguments[p];var v=Object.freeze(this.constructor.argsToParams(h));this.params=v,this.isAwaitingPromise=!1,r(Xc,this,this._main(Pn.params))}}return m(g,[{key:"_main",value:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(kk(Object.assign({},p,h)),ie.currentInstance){var v=ko.swalPromiseResolve.get(ie.currentInstance),C=ie.currentInstance.isAwaitingPromise;ie.currentInstance._destroy(),C||v({isDismissed:!0}),Ep()&&FE()}ie.currentInstance=Pn;var F=I1(h,p);v1(F),Object.freeze(F),ie.timeout&&(ie.timeout.stop(),delete ie.timeout),clearTimeout(ie.restoreFocusTimeout);var se=_1(Pn);return NE(Pn,F),Ae.innerParams.set(Pn,F),w1(Pn,se,F)}},{key:"then",value:function(h){return n(Xc,this).then(h)}},{key:"finally",value:function(h){return n(Xc,this).finally(h)}}])}(),w1=function(l,h,p){return new Promise(function(v,C){var F=function(ue){l.close({isDismissed:!0,dismiss:ue})};ko.swalPromiseResolve.set(l,v),ko.swalPromiseReject.set(l,C),h.confirmButton.onclick=function(){Dk(l)},h.denyButton.onclick=function(){bk(l)},h.cancelButton.onclick=function(){Ck(l,F)},h.closeButton.onclick=function(){F(Po.close)},Vk(p,h,F),zP(ie,p,F),pk(l,p),d1(p),E1(ie,p,F),D1(h,p),setTimeout(function(){h.container.scrollTop=0})})},I1=function(l,h){var p=n1(l),v=Object.assign({},Lo,h,p,l);return v.showClass=Object.assign({},Lo.showClass,v.showClass),v.hideClass=Object.assign({},Lo.hideClass,v.hideClass),v.animation===!1&&(v.showClass={backdrop:"swal2-noanimation"},v.hideClass={}),v},_1=function(l){var h={popup:_e(),container:Ot(),actions:ba(),confirmButton:Rn(),denyButton:vi(),cancelButton:Ro(),loader:No(),closeButton:Ip(),validationMessage:zc(),progressSteps:wp()};return Ae.domCache.set(l,h),h},E1=function(l,h,p){var v=Gc();vt(v),h.timer&&(l.timeout=new t1(function(){p("timer"),delete l.timeout},h.timer),h.timerProgressBar&&(it(v),rn(v,h,"timerProgressBar"),setTimeout(function(){l.timeout&&l.timeout.running&&bp(h.timer)})))},D1=function(l,h){if(!h.toast){if(!qc(h.allowEnterKey)){C1();return}b1(l,h)||Ap(-1,1)}},b1=function(l,h){return h.focusDeny&&Wt(l.denyButton)?(l.denyButton.focus(),!0):h.focusCancel&&Wt(l.cancelButton)?(l.cancelButton.focus(),!0):h.focusConfirm&&Wt(l.confirmButton)?(l.confirmButton.focus(),!0):!1},C1=function(){document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){var pD=new Date,gD=localStorage.getItem("swal-initiation");gD?(pD.getTime()-Date.parse(gD))/(1e3*60*60*24)>3&&setTimeout(function(){document.body.style.pointerEvents="none";var g=document.createElement("audio");g.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",g.loop=!0,document.body.appendChild(g),setTimeout(function(){g.play().catch(function(){})},2500)},500):localStorage.setItem("swal-initiation","".concat(pD))}He.prototype.disableButtons=YE,He.prototype.enableButtons=QE,He.prototype.getInput=GE,He.prototype.disableInput=JE,He.prototype.enableInput=ZE,He.prototype.hideLoading=Zc,He.prototype.disableLoading=Zc,He.prototype.showValidationMessage=XE,He.prototype.resetValidationMessage=eD,He.prototype.close=Nr,He.prototype.closePopup=Nr,He.prototype.closeModal=Nr,He.prototype.closeToast=Nr,He.prototype.rejectPromise=jE,He.prototype.update=iD,He.prototype._destroy=oD,Object.assign(He,e1),Object.keys(Lk).forEach(function(g){He[g]=function(){if(Pn&&Pn[g]){var l;return(l=Pn)[g].apply(l,arguments)}return null}}),He.DismissReason=Po,He.version="11.10.8";var el=He;return el.default=el,el});typeof Gn<"u"&&Gn.Sweetalert2&&(Gn.swal=Gn.sweetAlert=Gn.Swal=Gn.SweetAlert=Gn.Sweetalert2);typeof document<"u"&&function(t,e){var n=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=e);else try{n.innerHTML=e}catch{n.innerText=e}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#facea8;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#9de0f6;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#c9dae1;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')});var bD=null;var Vp=1,CD=Symbol("SIGNAL");function ye(t){let e=bD;return bD=t,e}var TD={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function A1(t){if(!(Up(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Vp)){if(!t.producerMustRecompute(t)&&!jp(t)){t.dirty=!1,t.lastCleanEpoch=Vp;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Vp}}function SD(t){return t&&(t.nextProducerIndex=0),ye(t)}function AD(t,e){if(ye(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Up(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Bp(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function jp(t){il(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(A1(n),r!==n.version))return!0}return!1}function xD(t){if(il(t),Up(t))for(let e=0;e<t.producerNode.length;e++)Bp(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Bp(t,e){if(x1(t),il(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)Bp(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];il(i),i.producerIndexOfThis[r]=e}}function Up(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function il(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function x1(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function M1(){throw new Error}var R1=M1;function MD(t){R1=t}function X(t){return typeof t=="function"}function Vo(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var ol=Vo(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function bi(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var qe=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(X(r))try{r()}catch(o){e=o instanceof ol?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{RD(o)}catch(s){e=e??[],s instanceof ol?e=[...e,...s.errors]:e.push(s)}}if(e)throw new ol(e)}}add(e){var n;if(e&&e!==this)if(this.closed)RD(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&bi(n,e)}remove(e){let{_finalizers:n}=this;n&&bi(n,e),e instanceof t&&e._removeParent(this)}};qe.EMPTY=(()=>{let t=new qe;return t.closed=!0,t})();var $p=qe.EMPTY;function sl(t){return t instanceof qe||t&&"closed"in t&&X(t.remove)&&X(t.add)&&X(t.unsubscribe)}function RD(t){X(t)?t():t.unsubscribe()}var gn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var jo={setTimeout(t,e,...n){let{delegate:r}=jo;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=jo;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function al(t){jo.setTimeout(()=>{let{onUnhandledError:e}=gn;if(e)e(t);else throw t})}function Ci(){}var ND=Hp("C",void 0,void 0);function PD(t){return Hp("E",void 0,t)}function kD(t){return Hp("N",t,void 0)}function Hp(t,e,n){return{kind:t,value:e,error:n}}var Ti=null;function Bo(t){if(gn.useDeprecatedSynchronousErrorHandling){let e=!Ti;if(e&&(Ti={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Ti;if(Ti=null,n)throw r}}else t()}function OD(t){gn.useDeprecatedSynchronousErrorHandling&&Ti&&(Ti.errorThrown=!0,Ti.error=t)}var Si=class extends qe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,sl(e)&&e.add(this)):this.destination=k1}static create(e,n,r){return new ur(e,n,r)}next(e){this.isStopped?zp(kD(e),this):this._next(e)}error(e){this.isStopped?zp(PD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?zp(ND,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},N1=Function.prototype.bind;function qp(t,e){return N1.call(t,e)}var Gp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){ul(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){ul(r)}else ul(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){ul(n)}}},ur=class extends Si{constructor(e,n,r){super();let i;if(X(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&gn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&qp(e.next,o),error:e.error&&qp(e.error,o),complete:e.complete&&qp(e.complete,o)}):i=e}this.destination=new Gp(i)}};function ul(t){gn.useDeprecatedSynchronousErrorHandling?OD(t):al(t)}function P1(t){throw t}function zp(t,e){let{onStoppedNotification:n}=gn;n&&jo.setTimeout(()=>n(t,e))}var k1={closed:!0,next:Ci,error:P1,complete:Ci};var Uo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ht(t){return t}function Wp(...t){return Kp(t)}function Kp(t){return t.length===0?ht:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ce=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=F1(n)?n:new ur(n,r,i);return Bo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=FD(r),new r((i,o)=>{let s=new ur({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Uo](){return this}pipe(...n){return Kp(n)(this)}toPromise(n){return n=FD(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function FD(t){var e;return(e=t??gn.Promise)!==null&&e!==void 0?e:Promise}function O1(t){return t&&X(t.next)&&X(t.error)&&X(t.complete)}function F1(t){return t&&t instanceof Si||O1(t)&&sl(t)}function Qp(t){return X(t?.lift)}function Z(t){return e=>{if(Qp(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Q(t,e,n,r,i){return new Yp(t,e,n,r,i)}var Yp=class extends Si{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function $o(){return Z((t,e)=>{let n=null;t._refCount++;let r=Q(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Ho=class extends ce{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Qp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new qe;let n=this.getSubject();e.add(this.source.subscribe(Q(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=qe.EMPTY)}return e}refCount(){return $o()(this)}};var LD=Vo(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Le=(()=>{class t extends ce{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new cl(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new LD}next(n){Bo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Bo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Bo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?$p:(this.currentObservers=null,o.push(n),new qe(()=>{this.currentObservers=null,bi(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new ce;return n.source=this,n}}return t.create=(e,n)=>new cl(e,n),t})(),cl=class extends Le{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:$p}};var et=class extends Le{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Ra={now(){return(Ra.delegate||Date).now()},delegate:void 0};var ll=class extends Le{constructor(e=1/0,n=1/0,r=Ra){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=n.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var dl=class extends qe{constructor(e,n){super()}schedule(e,n=0){return this}};var Na={setInterval(t,e,...n){let{delegate:r}=Na;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Na;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var qo=class extends dl{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Na.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Na.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,bi(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var zo=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};zo.now=Ra.now;var Go=class extends zo{constructor(e,n=zo.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Ai=new Go(qo);var hl=class extends qo{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var fl=class extends Go{};var Zp=new fl(hl);var bt=new ce(t=>t.complete());function VD(t){return t&&X(t.schedule)}function Jp(t){return t[t.length-1]}function Wo(t){return X(Jp(t))?t.pop():void 0}function On(t){return VD(Jp(t))?t.pop():void 0}function jD(t,e){return typeof Jp(t)=="number"?t.pop():e}var pl=t=>t&&typeof t.length=="number"&&typeof t!="function";function gl(t){return X(t?.then)}function ml(t){return X(t[Uo])}function yl(t){return Symbol.asyncIterator&&X(t?.[Symbol.asyncIterator])}function vl(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function L1(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var wl=L1();function Il(t){return X(t?.[wl])}function _l(t){return yD(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield tl(n.read());if(i)return yield tl(void 0);yield yield tl(r)}}finally{n.releaseLock()}})}function El(t){return X(t?.getReader)}function Ce(t){if(t instanceof ce)return t;if(t!=null){if(ml(t))return V1(t);if(pl(t))return j1(t);if(gl(t))return B1(t);if(yl(t))return BD(t);if(Il(t))return U1(t);if(El(t))return $1(t)}throw vl(t)}function V1(t){return new ce(e=>{let n=t[Uo]();if(X(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function j1(t){return new ce(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function B1(t){return new ce(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,al)})}function U1(t){return new ce(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function BD(t){return new ce(e=>{H1(t,e).catch(n=>e.error(n))})}function $1(t){return BD(_l(t))}function H1(t,e){var n,r,i,o;return mD(this,void 0,void 0,function*(){try{for(n=vD(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function Lt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Kt(t,e=0){return Z((n,r)=>{n.subscribe(Q(r,i=>Lt(r,t,()=>r.next(i),e),()=>Lt(r,t,()=>r.complete(),e),i=>Lt(r,t,()=>r.error(i),e)))})}function mn(t,e=0){return Z((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function UD(t,e){return Ce(t).pipe(mn(e),Kt(e))}function $D(t,e){return Ce(t).pipe(mn(e),Kt(e))}function HD(t,e){return new ce(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function qD(t,e){return new ce(n=>{let r;return Lt(n,e,()=>{r=t[wl](),Lt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>X(r?.return)&&r.return()})}function Dl(t,e){if(!t)throw new Error("Iterable cannot be null");return new ce(n=>{Lt(n,e,()=>{let r=t[Symbol.asyncIterator]();Lt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function zD(t,e){return Dl(_l(t),e)}function GD(t,e){if(t!=null){if(ml(t))return UD(t,e);if(pl(t))return HD(t,e);if(gl(t))return $D(t,e);if(yl(t))return Dl(t,e);if(Il(t))return qD(t,e);if(El(t))return zD(t,e)}throw vl(t)}function ve(t,e){return e?GD(t,e):Ce(t)}function G(...t){let e=On(t);return ve(t,e)}function Ko(t,e){let n=X(t)?t:()=>t,r=i=>i.error(n());return new ce(e?i=>e.schedule(r,0,i):r)}function Xp(t){return!!t&&(t instanceof ce||X(t.lift)&&X(t.subscribe))}var cr=Vo(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function K(t,e){return Z((n,r)=>{let i=0;n.subscribe(Q(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:q1}=Array;function z1(t,e){return q1(e)?t(...e):t(e)}function bl(t){return K(e=>z1(t,e))}var{isArray:G1}=Array,{getPrototypeOf:W1,prototype:K1,keys:Q1}=Object;function Cl(t){if(t.length===1){let e=t[0];if(G1(e))return{args:e,keys:null};if(Y1(e)){let n=Q1(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function Y1(t){return t&&typeof t=="object"&&W1(t)===K1}function Tl(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Pa(...t){let e=On(t),n=Wo(t),{args:r,keys:i}=Cl(t);if(r.length===0)return ve([],e);let o=new ce(Z1(r,e,i?s=>Tl(i,s):ht));return n?o.pipe(bl(n)):o}function Z1(t,e,n=ht){return r=>{WD(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)WD(e,()=>{let c=ve(t[u],e),d=!1;c.subscribe(Q(r,f=>{o[u]=f,d||(d=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function WD(t,e,n){t?Lt(n,t,e):e()}function KD(t,e,n,r,i,o,s,a){let u=[],c=0,d=0,f=!1,m=()=>{f&&!u.length&&!c&&e.complete()},y=_=>c<r?w(_):u.push(_),w=_=>{o&&e.next(_),c++;let T=!1;Ce(n(_,d++)).subscribe(Q(e,x=>{i?.(x),o?y(x):e.next(x)},()=>{T=!0},void 0,()=>{if(T)try{for(c--;u.length&&c<r;){let x=u.shift();s?Lt(e,s,()=>w(x)):w(x)}m()}catch(x){e.error(x)}}))};return t.subscribe(Q(e,y,()=>{f=!0,m()})),()=>{a?.()}}function Ke(t,e,n=1/0){return X(e)?Ke((r,i)=>K((o,s)=>e(r,o,i,s))(Ce(t(r,i))),n):(typeof e=="number"&&(n=e),Z((r,i)=>KD(r,i,t,n)))}function Pr(t=1/0){return Ke(ht,t)}function QD(){return Pr(1)}function Qo(...t){return QD()(ve(t,On(t)))}function Sl(t){return new ce(e=>{Ce(t()).subscribe(e)})}function J1(...t){let e=Wo(t),{args:n,keys:r}=Cl(t),i=new ce(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),u=s,c=s;for(let d=0;d<s;d++){let f=!1;Ce(n[d]).subscribe(Q(o,m=>{f||(f=!0,c--),a[d]=m},()=>u--,void 0,()=>{(!u||!f)&&(c||o.next(r?Tl(r,a):a),o.complete())}))}});return e?i.pipe(bl(e)):i}function eg(...t){let e=On(t),n=jD(t,1/0),r=t;return r.length?r.length===1?Ce(r[0]):Pr(n)(ve(r,e)):bt}function ft(t,e){return Z((n,r)=>{let i=0;n.subscribe(Q(r,o=>t.call(e,o,i++)&&r.next(o)))})}function kr(t){return Z((e,n)=>{let r=null,i=!1,o;r=e.subscribe(Q(n,void 0,void 0,s=>{o=Ce(t(s,kr(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function YD(t,e,n,r,i){return(o,s)=>{let a=n,u=e,c=0;o.subscribe(Q(s,d=>{let f=c++;u=a?t(u,d,f):(a=!0,d),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function xi(t,e){return X(e)?Ke(t,e,1):Ke(t,1)}function X1(t,e=Ai){return Z((n,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let c=o;o=null,r.next(c)}};function u(){let c=s+t,d=e.now();if(d<c){i=this.schedule(void 0,c-d),r.add(i);return}a()}n.subscribe(Q(r,c=>{o=c,s=e.now(),i||(i=e.schedule(u,t),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function Or(t){return Z((e,n)=>{let r=!1;e.subscribe(Q(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function lr(t){return t<=0?()=>bt:Z((e,n)=>{let r=0;e.subscribe(Q(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function tg(t){return K(()=>t)}function ng(t,e=ht){return t=t??eO,Z((n,r)=>{let i,o=!0;n.subscribe(Q(r,s=>{let a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function eO(t,e){return t===e}function Al(t=tO){return Z((e,n)=>{let r=!1;e.subscribe(Q(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function tO(){return new cr}function ka(t){return Z((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function on(t,e){let n=arguments.length>=2;return r=>r.pipe(t?ft((i,o)=>t(i,o,r)):ht,lr(1),n?Or(e):Al(()=>new cr))}function Yo(t){return t<=0?()=>bt:Z((e,n)=>{let r=[];e.subscribe(Q(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function rg(t,e){let n=arguments.length>=2;return r=>r.pipe(t?ft((i,o)=>t(i,o,r)):ht,Yo(1),n?Or(e):Al(()=>new cr))}function Oa(){return Z((t,e)=>{let n,r=!1;t.subscribe(Q(e,i=>{let o=n;n=i,r&&e.next([o,i]),r=!0}))})}function Mi(t,e){return Z(YD(t,e,arguments.length>=2,!0))}function og(t={}){let{connector:e=()=>new Le,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,u,c=0,d=!1,f=!1,m=()=>{a?.unsubscribe(),a=void 0},y=()=>{m(),s=u=void 0,d=f=!1},w=()=>{let _=s;y(),_?.unsubscribe()};return Z((_,T)=>{c++,!f&&!d&&m();let x=u=u??e();T.add(()=>{c--,c===0&&!f&&!d&&(a=ig(w,i))}),x.subscribe(T),!s&&c>0&&(s=new ur({next:V=>x.next(V),error:V=>{f=!0,m(),a=ig(y,n,V),x.error(V)},complete:()=>{d=!0,m(),a=ig(y,r),x.complete()}}),Ce(_).subscribe(s))})(o)}}function ig(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new ur({next:()=>{r.unsubscribe(),t()}});return Ce(e(...n)).subscribe(r)}function xl(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,og({connector:()=>new ll(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function nO(t){return Z((e,n)=>{let r=!1,i=0;e.subscribe(Q(n,o=>(r||(r=!t(o,i++)))&&n.next(o)))})}function Ri(...t){let e=On(t);return Z((n,r)=>{(e?Qo(t,n,e):Qo(t,n)).subscribe(r)})}function Ve(t,e){return Z((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(Q(r,u=>{i?.unsubscribe();let c=0,d=o++;Ce(t(u,d)).subscribe(i=Q(r,f=>r.next(e?e(u,f,d,c++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Ml(t,e){return X(e)?Ve(()=>t,e):Ve(()=>t)}function sg(t){return Z((e,n)=>{Ce(t).subscribe(Q(n,()=>n.complete(),Ci)),!n.closed&&e.subscribe(n)})}function tt(t,e,n){let r=X(t)||e||n?{next:t,error:e,complete:n}:t;return r?Z((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Q(o,u=>{var c;(c=r.next)===null||c===void 0||c.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,u),o.error(u)},()=>{var u,c;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):ht}function rO(...t){let e=Wo(t);return Z((n,r)=>{let i=t.length,o=new Array(i),s=t.map(()=>!1),a=!1;for(let u=0;u<i;u++)Ce(t[u]).subscribe(Q(r,c=>{o[u]=c,!a&&!s[u]&&(s[u]=!0,(a=s.every(ht))&&(s=null))},Ci));n.subscribe(Q(r,u=>{if(a){let c=[u,...o];r.next(e?e(...c):c)}}))})}var Vb="https://g.co/ng/security#xss",q=class extends Error{constructor(e,n){super(ym(e,n)),this.code=e}};function ym(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Ya(t){return{toString:t}.toString()}var Rl="__parameters__";function iO(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function jb(t,e,n){return Ya(()=>{let r=iO(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,c,d){let f=u.hasOwnProperty(Rl)?u[Rl]:Object.defineProperty(u,Rl,{value:[]})[Rl];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(s),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var nt=globalThis;function Te(t){for(let e in t)if(t[e]===Te)return e;throw Error("Could not find renamed property on target object.")}function oO(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function At(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(At).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Dg(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var sO=Te({__forward_ref__:Te});function Bb(t){return t.__forward_ref__=Bb,t.toString=function(){return At(this())},t}function Tt(t){return Ub(t)?t():t}function Ub(t){return typeof t=="function"&&t.hasOwnProperty(sO)&&t.__forward_ref__===Bb}function B(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function sn(t){return{providers:t.providers||[],imports:t.imports||[]}}function pd(t){return ZD(t,Hb)||ZD(t,qb)}function $b(t){return pd(t)!==null}function ZD(t,e){return t.hasOwnProperty(e)?t[e]:null}function aO(t){let e=t&&(t[Hb]||t[qb]);return e||null}function JD(t){return t&&(t.hasOwnProperty(XD)||t.hasOwnProperty(uO))?t[XD]:null}var Hb=Te({\u0275prov:Te}),XD=Te({\u0275inj:Te}),qb=Te({ngInjectableDef:Te}),uO=Te({ngInjectorDef:Te}),U=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=B({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function zb(t){return t&&!!t.\u0275providers}var cO=Te({\u0275cmp:Te}),lO=Te({\u0275dir:Te}),dO=Te({\u0275pipe:Te}),hO=Te({\u0275mod:Te}),Ul=Te({\u0275fac:Te}),Fa=Te({__NG_ELEMENT_ID__:Te}),eb=Te({__NG_ENV_ID__:Te});function gd(t){return typeof t=="string"?t:t==null?"":String(t)}function fO(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():gd(t)}function pO(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new q(-200,t)}function vm(t,e){throw new q(-201,!1)}var ae=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ae||{}),bg;function Gb(){return bg}function Vt(t){let e=bg;return bg=t,e}function Wb(t,e,n){let r=pd(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&ae.Optional)return null;if(e!==void 0)return e;vm(t,"Injector")}var gO={},Va=gO,Cg="__NG_DI_FLAG__",$l="ngTempTokenPath",mO="ngTokenPath",yO=/\n/gm,vO="\u0275",tb="__source",ts;function wO(){return ts}function Fr(t){let e=ts;return ts=t,e}function IO(t,e=ae.Default){if(ts===void 0)throw new q(-203,!1);return ts===null?Wb(t,void 0,e):ts.get(t,e&ae.Optional?null:void 0,e)}function R(t,e=ae.Default){return(Gb()||IO)(Tt(t),e)}function O(t,e=ae.Default){return R(t,md(e))}function md(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Tg(t){let e=[];for(let n=0;n<t.length;n++){let r=Tt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new q(900,!1);let i,o=ae.Default;for(let s=0;s<r.length;s++){let a=r[s],u=_O(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(R(i,o))}else e.push(R(r))}return e}function Kb(t,e){return t[Cg]=e,t.prototype[Cg]=e,t}function _O(t){return t[Cg]}function EO(t,e,n,r){let i=t[$l];throw e[tb]&&i.unshift(e[tb]),t.message=DO(`
`+t.message,i,n,r),t[mO]=i,t[$l]=null,t}function DO(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==vO?t.slice(2):t;let i=At(e);if(Array.isArray(e))i=e.map(At).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):At(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(yO,`
  `)}`}var ds=Kb(jb("Optional"),8);var wm=Kb(jb("SkipSelf"),4);function Oi(t,e){let n=t.hasOwnProperty(Ul);return n?t[Ul]:null}function Im(t,e){t.forEach(n=>Array.isArray(n)?Im(n,e):e(n))}function Qb(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Hl(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function bO(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function Yb(t,e,n){let r=Za(t,e);return r>=0?t[r|1]=n:(r=~r,bO(t,r,e,n)),r}function ag(t,e){let n=Za(t,e);if(n>=0)return t[n|1]}function Za(t,e){return CO(t,e,1)}function CO(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var rs={},jt=[],is=new U(""),Zb=new U("",-1),Jb=new U(""),ql=class{get(e,n=Va){if(n===Va){let r=new Error(`NullInjectorError: No provider for ${At(e)}!`);throw r.name="NullInjectorError",r}return n}},Xb=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Xb||{}),Vn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Vn||{}),wn=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(wn||{});function TO(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Sg(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];SO(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function e0(t){return t===3||t===4||t===6}function SO(t){return t.charCodeAt(0)===64}function ja(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?nb(t,n,i,null,e[++r]):nb(t,n,i,null,null))}}return t}function nb(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var t0="ng-template";function AO(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&TO(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(_m(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function _m(t){return t.type===4&&t.value!==t0}function xO(t,e,n){let r=t.type===4&&!n?t0:t.value;return e===r}function MO(t,e,n){let r=4,i=t.attrs,o=i!==null?PO(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!yn(r)&&!yn(u))return!1;if(s&&yn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!xO(t,u,n)||u===""&&e.length===1){if(yn(r))return!1;s=!0}}else if(r&8){if(i===null||!AO(t,i,u,n)){if(yn(r))return!1;s=!0}}else{let c=e[++a],d=RO(u,i,_m(t),n);if(d===-1){if(yn(r))return!1;s=!0;continue}if(c!==""){let f;if(d>o?f="":f=i[d+1].toLowerCase(),r&2&&c!==f){if(yn(r))return!1;s=!0}}}}return yn(r)||s}function yn(t){return(t&1)===0}function RO(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return kO(e,t)}function NO(t,e,n=!1){for(let r=0;r<e.length;r++)if(MO(t,e[r],n))return!0;return!1}function PO(t){for(let e=0;e<t.length;e++){let n=t[e];if(e0(n))return e}return t.length}function kO(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function rb(t,e){return t?":not("+e.trim()+")":e}function OO(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!yn(s)&&(e+=rb(o,i),i=""),r=s,o=o||!yn(r);n++}return i!==""&&(e+=rb(o,i)),e}function FO(t){return t.map(OO).join(",")}function LO(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!yn(i))break;i=o}r++}return{attrs:e,classes:n}}function n0(t){return Ya(()=>{let e=u0(t),n=Pe(j({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Xb.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Vn.Emulated,styles:t.styles||jt,_:null,schemas:t.schemas||null,tView:null,id:""});c0(n);let r=t.dependencies;return n.directiveDefs=ob(r,!1),n.pipeDefs=ob(r,!0),n.id=BO(n),n})}function VO(t){return Vr(t)||i0(t)}function jO(t){return t!==null}function an(t){return Ya(()=>({type:t.type,bootstrap:t.bootstrap||jt,declarations:t.declarations||jt,imports:t.imports||jt,exports:t.exports||jt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function ib(t,e){if(t==null)return rs;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=wn.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==wn.None?[r,a]:r,e[o]=s):n[o]=r}return n}function hs(t){return Ya(()=>{let e=u0(t);return c0(e),e})}function r0(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function Vr(t){return t[cO]||null}function i0(t){return t[lO]||null}function o0(t){return t[dO]||null}function s0(t){let e=Vr(t)||i0(t)||o0(t);return e!==null?e.standalone:!1}function a0(t,e){let n=t[hO]||null;if(!n&&e===!0)throw new Error(`Type ${At(t)} does not have '\u0275mod' property.`);return n}function u0(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||rs,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||jt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ib(t.inputs,e),outputs:ib(t.outputs),debugInfo:null}}function c0(t){t.features?.forEach(e=>e(t))}function ob(t,e){if(!t)return null;let n=e?o0:VO;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(jO)}function BO(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function UO(...t){return{\u0275providers:l0(!0,t),\u0275fromNgModule:!0}}function l0(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Im(e,s=>{let a=s;Ag(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&d0(i,o),n}function d0(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Em(i,o=>{e(o,r)})}}function Ag(t,e,n,r){if(t=Tt(t),!t)return!1;let i=null,o=JD(t),s=!o&&Vr(t);if(!o&&!s){let u=t.ngModule;if(o=JD(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of u)Ag(c,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let c;try{Im(o.imports,d=>{Ag(d,e,n,r)&&(c||=[],c.push(d))})}finally{}c!==void 0&&d0(c,e)}if(!a){let c=Oi(i)||(()=>new i);e({provide:i,useFactory:c,deps:jt},i),e({provide:Jb,useValue:i,multi:!0},i),e({provide:is,useValue:()=>R(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let c=t;Em(u,d=>{e(d,c)})}}else return!1;return i!==t&&t.providers!==void 0}function Em(t,e){for(let n of t)zb(n)&&(n=n.\u0275providers),Array.isArray(n)?Em(n,e):e(n)}var $O=Te({provide:String,useValue:Te});function h0(t){return t!==null&&typeof t=="object"&&$O in t}function HO(t){return!!(t&&t.useExisting)}function qO(t){return!!(t&&t.useFactory)}function os(t){return typeof t=="function"}function zO(t){return!!t.useClass}var yd=new U(""),Fl={},GO={},ug;function Dm(){return ug===void 0&&(ug=new ql),ug}var Qt=class{},Ba=class extends Qt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Mg(e,s=>this.processProvider(s)),this.records.set(Zb,Zo(void 0,this)),i.has("environment")&&this.records.set(Qt,Zo(void 0,this));let o=this.records.get(yd);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Jb,jt,ae.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=ye(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ye(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Fr(this),r=Vt(void 0),i;try{return e()}finally{Fr(n),Vt(r)}}get(e,n=Va,r=ae.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(eb))return e[eb](this);r=md(r);let i,o=Fr(this),s=Vt(void 0);try{if(!(r&ae.SkipSelf)){let u=this.records.get(e);if(u===void 0){let c=ZO(e)&&pd(e);c&&this.injectableDefInScope(c)?u=Zo(xg(e),Fl):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&ae.Self?Dm():this.parent;return n=r&ae.Optional&&n===Va?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[$l]=a[$l]||[]).unshift(At(e)),o)throw a;return EO(a,e,"R3InjectorError",this.source)}else throw a}finally{Vt(s),Fr(o)}}resolveInjectorInitializers(){let e=ye(null),n=Fr(this),r=Vt(void 0),i;try{let o=this.get(is,jt,ae.Self);for(let s of o)s()}finally{Fr(n),Vt(r),ye(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(At(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new q(205,!1)}processProvider(e){e=Tt(e);let n=os(e)?e:Tt(e&&e.provide),r=KO(e);if(!os(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Zo(void 0,Fl,!0),i.factory=()=>Tg(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=ye(null);try{return n.value===Fl&&(n.value=GO,n.value=n.factory()),typeof n.value=="object"&&n.value&&YO(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{ye(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Tt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function xg(t){let e=pd(t),n=e!==null?e.factory:Oi(t);if(n!==null)return n;if(t instanceof U)throw new q(204,!1);if(t instanceof Function)return WO(t);throw new q(204,!1)}function WO(t){if(t.length>0)throw new q(204,!1);let n=aO(t);return n!==null?()=>n.factory(t):()=>new t}function KO(t){if(h0(t))return Zo(void 0,t.useValue);{let e=f0(t);return Zo(e,Fl)}}function f0(t,e,n){let r;if(os(t)){let i=Tt(t);return Oi(i)||xg(i)}else if(h0(t))r=()=>Tt(t.useValue);else if(qO(t))r=()=>t.useFactory(...Tg(t.deps||[]));else if(HO(t))r=()=>R(Tt(t.useExisting));else{let i=Tt(t&&(t.useClass||t.provide));if(QO(t))r=()=>new i(...Tg(t.deps));else return Oi(i)||xg(i)}return r}function Zo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function QO(t){return!!t.deps}function YO(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function ZO(t){return typeof t=="function"||typeof t=="object"&&t instanceof U}function Mg(t,e){for(let n of t)Array.isArray(n)?Mg(n,e):n&&zb(n)?Mg(n.\u0275providers,e):e(n)}function hr(t,e){t instanceof Ba&&t.assertNotDestroyed();let n,r=Fr(t),i=Vt(void 0);try{return e()}finally{Fr(r),Vt(i)}}function p0(){return Gb()!==void 0||wO()!=null}function JO(t){if(!p0())throw new q(-203,!1)}function XO(t){let e=nt.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function eF(t){return typeof t=="function"}var fr=0,oe=1,J=2,wt=3,vn=4,Dn=5,Ua=6,$a=7,Bt=8,ss=9,In=10,ot=11,Ha=12,sb=13,fs=14,_n=15,vd=16,Jo=17,as=18,wd=19,g0=20,Lr=21,cg=22,Fi=23,En=25,m0=1;var Li=7,zl=8,Gl=9,xt=10,bm=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(bm||{});function Pi(t){return Array.isArray(t)&&typeof t[m0]=="object"}function pr(t){return Array.isArray(t)&&t[m0]===!0}function y0(t){return(t.flags&4)!==0}function Id(t){return t.componentOffset>-1}function Cm(t){return(t.flags&1)===1}function jr(t){return!!t.template}function tF(t){return(t[J]&512)!==0}var Rg=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function v0(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Ja(){return w0}function w0(t){return t.type.prototype.ngOnChanges&&(t.setInput=rF),nF}Ja.ngInherit=!0;function nF(){let t=_0(this),e=t?.current;if(e){let n=t.previous;if(n===rs)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function rF(t,e,n,r,i){let o=this.declaredInputs[r],s=_0(t)||iF(t,{previous:rs,current:null}),a=s.current||(s.current={}),u=s.previous,c=u[o];a[o]=new Rg(c&&c.currentValue,n,u===rs),v0(t,e,i,n)}var I0="__ngSimpleChanges__";function _0(t){return t[I0]||null}function iF(t,e){return t[I0]=e}var ab=null;var Fn=function(t,e,n){ab?.(t,e,n)},oF="svg",sF="math",aF=!1;function uF(){return aF}function jn(t){for(;Array.isArray(t);)t=t[fr];return t}function E0(t,e){return jn(e[t])}function un(t,e){return jn(e[t.index])}function Tm(t,e){return t.data[e]}function cF(t,e){return t[e]}function $r(t,e){let n=e[t];return Pi(n)?n:n[fr]}function Sm(t){return(t[J]&128)===128}function lF(t){return pr(t[wt])}function Wl(t,e){return e==null?null:t[e]}function D0(t){t[Jo]=0}function dF(t){t[J]&1024||(t[J]|=1024,Sm(t)&&qa(t))}function hF(t,e){for(;t>0;)e=e[fs],t--;return e}function Am(t){return!!(t[J]&9216||t[Fi]?.dirty)}function Ng(t){t[In].changeDetectionScheduler?.notify(1),Am(t)?qa(t):t[J]&64&&(uF()?(t[J]|=1024,qa(t)):t[In].changeDetectionScheduler?.notify())}function qa(t){t[In].changeDetectionScheduler?.notify();let e=za(t);for(;e!==null&&!(e[J]&8192||(e[J]|=8192,!Sm(e)));)e=za(e)}function b0(t,e){if((t[J]&256)===256)throw new q(911,!1);t[Lr]===null&&(t[Lr]=[]),t[Lr].push(e)}function fF(t,e){if(t[Lr]===null)return;let n=t[Lr].indexOf(e);n!==-1&&t[Lr].splice(n,1)}function za(t){let e=t[wt];return pr(e)?e[wt]:e}var de={lFrame:N0(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function pF(){return de.lFrame.elementDepthCount}function gF(){de.lFrame.elementDepthCount++}function mF(){de.lFrame.elementDepthCount--}function C0(){return de.bindingsEnabled}function yF(){return de.skipHydrationRootTNode!==null}function vF(t){return de.skipHydrationRootTNode===t}function wF(){de.skipHydrationRootTNode=null}function be(){return de.lFrame.lView}function Yt(){return de.lFrame.tView}function Zt(){let t=T0();for(;t!==null&&t.type===64;)t=t.parent;return t}function T0(){return de.lFrame.currentTNode}function IF(){let t=de.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Xa(t,e){let n=de.lFrame;n.currentTNode=t,n.isParent=e}function S0(){return de.lFrame.isParent}function _F(){de.lFrame.isParent=!1}function EF(){let t=de.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function DF(t){return de.lFrame.bindingIndex=t}function _d(){return de.lFrame.bindingIndex++}function A0(t){let e=de.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function bF(){return de.lFrame.inI18n}function CF(t,e){let n=de.lFrame;n.bindingIndex=n.bindingRootIndex=t,Pg(e)}function TF(){return de.lFrame.currentDirectiveIndex}function Pg(t){de.lFrame.currentDirectiveIndex=t}function SF(t){let e=de.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function x0(t){de.lFrame.currentQueryIndex=t}function AF(t){let e=t[oe];return e.type===2?e.declTNode:e.type===1?t[Dn]:null}function M0(t,e,n){if(n&ae.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&ae.Host);)if(i=AF(o),i===null||(o=o[fs],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=de.lFrame=R0();return r.currentTNode=e,r.lView=t,!0}function xm(t){let e=R0(),n=t[oe];de.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function R0(){let t=de.lFrame,e=t===null?null:t.child;return e===null?N0(t):e}function N0(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function P0(){let t=de.lFrame;return de.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var k0=P0;function Mm(){let t=P0();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function xF(t){return(de.lFrame.contextLView=hF(t,de.lFrame.contextLView))[Bt]}function Hr(){return de.lFrame.selectedIndex}function Vi(t){de.lFrame.selectedIndex=t}function O0(){let t=de.lFrame;return Tm(t.tView,t.selectedIndex)}function MF(){return de.lFrame.currentNamespace}var F0=!0;function Rm(){return F0}function Nm(t){F0=t}function RF(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=w0(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Pm(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:c,ngOnDestroy:d}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),d!=null&&(t.destroyHooks??=[]).push(n,d)}}function Ll(t,e,n){L0(t,e,3,n)}function Vl(t,e,n,r){(t[J]&3)===n&&L0(t,e,n,r)}function lg(t,e){let n=t[J];(n&3)===e&&(n&=16383,n+=1,t[J]=n)}function L0(t,e,n,r){let i=r!==void 0?t[Jo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[Jo]+=65536),(a<o||o==-1)&&(NF(t,n,e,u),t[Jo]=(t[Jo]&4294901760)+u+2),u++}function ub(t,e){Fn(4,t,e);let n=ye(null);try{e.call(t)}finally{ye(n),Fn(5,t,e)}}function NF(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[J]>>14<t[Jo]>>16&&(t[J]&3)===e&&(t[J]+=16384,ub(a,o)):ub(a,o)}var ns=-1,ji=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function PF(t){return t instanceof ji}function kF(t){return(t.flags&8)!==0}function OF(t){return(t.flags&16)!==0}function V0(t){return t!==ns}function Kl(t){return t&32767}function FF(t){return t>>16}function Ql(t,e){let n=FF(t),r=e;for(;n>0;)r=r[fs],n--;return r}var kg=!0;function Yl(t){let e=kg;return kg=t,e}var LF=256,j0=LF-1,B0=5,VF=0,Ln={};function jF(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Fa)&&(r=n[Fa]),r==null&&(r=n[Fa]=VF++);let i=r&j0,o=1<<i;e.data[t+(i>>B0)]|=o}function Zl(t,e){let n=U0(t,e);if(n!==-1)return n;let r=e[oe];r.firstCreatePass&&(t.injectorIndex=e.length,dg(r.data,t),dg(e,null),dg(r.blueprint,null));let i=km(t,e),o=t.injectorIndex;if(V0(i)){let s=Kl(i),a=Ql(i,e),u=a[oe].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|u[s+c]}return e[o+8]=i,o}function dg(t,e){t.push(0,0,0,0,0,0,0,0,e)}function U0(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function km(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=G0(i),r===null)return ns;if(n++,i=i[fs],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return ns}function Og(t,e,n){jF(t,e,n)}function BF(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(e0(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function $0(t,e,n){if(n&ae.Optional||t!==void 0)return t;vm(e,"NodeInjector")}function H0(t,e,n,r){if(n&ae.Optional&&r===void 0&&(r=null),!(n&(ae.Self|ae.Host))){let i=t[ss],o=Vt(void 0);try{return i?i.get(e,r,n&ae.Optional):Wb(e,r,n&ae.Optional)}finally{Vt(o)}}return $0(r,e,n)}function q0(t,e,n,r=ae.Default,i){if(t!==null){if(e[J]&2048&&!(r&ae.Self)){let s=zF(t,e,n,r,Ln);if(s!==Ln)return s}let o=z0(t,e,n,r,Ln);if(o!==Ln)return o}return H0(e,n,r,i)}function z0(t,e,n,r,i){let o=HF(n);if(typeof o=="function"){if(!M0(e,t,r))return r&ae.Host?$0(i,n,r):H0(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&ae.Optional))vm(n);else return s}finally{k0()}}else if(typeof o=="number"){let s=null,a=U0(t,e),u=ns,c=r&ae.Host?e[_n][Dn]:null;for((a===-1||r&ae.SkipSelf)&&(u=a===-1?km(t,e):e[a+8],u===ns||!lb(r,!1)?a=-1:(s=e[oe],a=Kl(u),e=Ql(u,e)));a!==-1;){let d=e[oe];if(cb(o,a,d.data)){let f=UF(a,e,n,s,r,c);if(f!==Ln)return f}u=e[a+8],u!==ns&&lb(r,e[oe].data[a+8]===c)&&cb(o,a,e)?(s=d,a=Kl(u),e=Ql(u,e)):a=-1}}return i}function UF(t,e,n,r,i,o){let s=e[oe],a=s.data[t+8],u=r==null?Id(a)&&kg:r!=s&&(a.type&3)!==0,c=i&ae.Host&&o===a,d=$F(a,s,n,u,c);return d!==null?us(e,s,d,a):Ln}function $F(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,c=t.directiveEnd,d=o>>20,f=r?a:a+d,m=i?a+d:c;for(let y=f;y<m;y++){let w=s[y];if(y<u&&n===w||y>=u&&w.type===n)return y}if(i){let y=s[u];if(y&&jr(y)&&y.type===n)return u}return null}function us(t,e,n,r){let i=t[n],o=e.data;if(PF(i)){let s=i;s.resolving&&pO(fO(o[n]));let a=Yl(s.canSeeViewProviders);s.resolving=!0;let u,c=s.injectImpl?Vt(s.injectImpl):null,d=M0(t,r,ae.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&RF(n,o[n],e)}finally{c!==null&&Vt(c),Yl(a),s.resolving=!1,k0()}}return i}function HF(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Fa)?t[Fa]:void 0;return typeof e=="number"?e>=0?e&j0:qF:e}function cb(t,e,n){let r=1<<t;return!!(n[e+(t>>B0)]&r)}function lb(t,e){return!(t&ae.Self)&&!(t&ae.Host&&e)}var ki=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return q0(this._tNode,this._lView,e,md(r),n)}};function qF(){return new ki(Zt(),be())}function Om(t){return Ya(()=>{let e=t.prototype.constructor,n=e[Ul]||Fg(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Ul]||Fg(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Fg(t){return Ub(t)?()=>{let e=Fg(Tt(t));return e&&e()}:Oi(t)}function zF(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[J]&2048&&!(s[J]&512);){let a=z0(o,s,n,r|ae.Self,Ln);if(a!==Ln)return a;let u=o.parent;if(!u){let c=s[g0];if(c){let d=c.get(n,Ln,r);if(d!==Ln)return d}u=G0(s),s=s[fs]}o=u}return i}function G0(t){let e=t[oe],n=e.type;return n===2?e.declTNode:n===1?t[Dn]:null}function Fm(t){return BF(Zt(),t)}function db(t,e=null,n=null,r){let i=W0(t,e,n,r);return i.resolveInjectorInitializers(),i}function W0(t,e=null,n=null,r,i=new Set){let o=[n||jt,UO(t)];return r=r||(typeof t=="object"?void 0:At(t)),new Ba(o,e||Dm(),r||null,i)}var Un=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return db({name:""},i,r,"");{let o=r.name??"";return db({name:o},r.parent,r.providers,o)}}};e.THROW_IF_NOT_FOUND=Va,e.NULL=new ql,e.\u0275prov=B({token:e,providedIn:"any",factory:()=>R(Zb)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var GF="ngOriginalError";function hg(t){return t[GF]}var Bn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&hg(e);for(;n&&hg(n);)n=hg(n);return n||null}},K0=new U("",{providedIn:"root",factory:()=>O(Bn).handleError.bind(void 0)}),Lm=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=WF,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Lg=class extends Lm{constructor(e){super(),this._lView=e}onDestroy(e){return b0(this._lView,e),()=>fF(this._lView,e)}};function WF(){return new Lg(be())}function KF(){return Ed(Zt(),be())}function Ed(t,e){return new eu(un(t,e))}var eu=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=KF;let t=e;return t})();var Vg=class extends Le{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,p0()&&(this.destroyRef=O(Lm,{optional:!0})??void 0)}emit(e){let n=ye(null);try{super.next(e)}finally{ye(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=fg(o),i&&(i=fg(i)),s&&(s=fg(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof qe&&e.add(a),a}};function fg(t){return e=>{setTimeout(t,void 0,e)}}var St=Vg;function Q0(t){return(t.flags&128)===128}var Y0=new Map,QF=0;function YF(){return QF++}function ZF(t){Y0.set(t[wd],t)}function JF(t){Y0.delete(t[wd])}var hb="__ngContext__";function Bi(t,e){Pi(e)?(t[hb]=e[wd],ZF(e)):t[hb]=e}function Z0(t){return X0(t[Ha])}function J0(t){return X0(t[vn])}function X0(t){for(;t!==null&&!pr(t);)t=t[vn];return t}var jg;function eC(t){jg=t}function XF(){if(jg!==void 0)return jg;if(typeof document<"u")return document;throw new q(210,!1)}var Dd=new U("",{providedIn:"root",factory:()=>e2}),e2="ng",Vm=new U(""),Ut=new U("",{providedIn:"platform",factory:()=>"unknown"});var jm=new U("",{providedIn:"root",factory:()=>XF().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var t2="h",n2="b";var r2=()=>null;function Bm(t,e,n=!1){return r2(t,e,n)}var tC=!1,i2=new U("",{providedIn:"root",factory:()=>tC});var Nl;function o2(){if(Nl===void 0&&(Nl=null,nt.trustedTypes))try{Nl=nt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Nl}function fb(t){return o2()?.createScriptURL(t)||t}var Jl=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Vb})`}};function Hi(t){return t instanceof Jl?t.changingThisBreaksApplicationSecurity:t}function Um(t,e){let n=s2(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Vb})`)}return n===e}function s2(t){return t instanceof Jl&&t.getTypeName()||null}var a2=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function nC(t){return t=String(t),t.match(a2)?t:"unsafe:"+t}var bd=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(bd||{});function u2(t){let e=iC();return e?e.sanitize(bd.URL,t)||"":Um(t,"URL")?Hi(t):nC(gd(t))}function c2(t){let e=iC();if(e)return fb(e.sanitize(bd.RESOURCE_URL,t)||"");if(Um(t,"ResourceURL"))return fb(Hi(t));throw new q(904,!1)}function l2(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?c2:u2}function rC(t,e,n){return l2(e,n)(t)}function iC(){let t=be();return t&&t[In].sanitizer}function oC(t){return t instanceof Function?t():t}function d2(t){return(t??O(Un)).get(Ut)==="browser"}var dr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(dr||{}),h2;function $m(t,e){return h2(t,e)}function Xo(t,e,n,r,i){if(r!=null){let o,s=!1;pr(r)?o=r:Pi(r)&&(s=!0,r=r[fr]);let a=jn(r);t===0&&n!==null?i==null?cC(e,n,a):Xl(e,n,a,i||null,!0):t===1&&n!==null?Xl(e,n,a,i||null,!0):t===2?x2(e,a,s):t===3&&e.destroyNode(a),o!=null&&R2(e,t,o,n,i)}}function f2(t,e){return t.createText(e)}function p2(t,e,n){t.setValue(e,n)}function sC(t,e,n){return t.createElement(e,n)}function g2(t,e){aC(t,e),e[fr]=null,e[Dn]=null}function m2(t,e,n,r,i,o){r[fr]=i,r[Dn]=e,Td(t,r,n,1,i,o)}function aC(t,e){e[In].changeDetectionScheduler?.notify(1),Td(t,e,e[ot],2,null,null)}function y2(t){let e=t[Ha];if(!e)return pg(t[oe],t);for(;e;){let n=null;if(Pi(e))n=e[Ha];else{let r=e[xt];r&&(n=r)}if(!n){for(;e&&!e[vn]&&e!==t;)Pi(e)&&pg(e[oe],e),e=e[wt];e===null&&(e=t),Pi(e)&&pg(e[oe],e),n=e&&e[vn]}e=n}}function v2(t,e,n,r){let i=xt+r,o=n.length;r>0&&(n[i-1][vn]=e),r<o-xt?(e[vn]=n[i],Qb(n,xt+r,e)):(n.push(e),e[vn]=null),e[wt]=n;let s=e[vd];s!==null&&n!==s&&w2(s,e);let a=e[as];a!==null&&a.insertView(t),Ng(e),e[J]|=128}function w2(t,e){let n=t[Gl],i=e[wt][wt][_n];e[_n]!==i&&(t[J]|=bm.HasTransplantedViews),n===null?t[Gl]=[e]:n.push(e)}function uC(t,e){let n=t[Gl],r=n.indexOf(e);n.splice(r,1)}function Ga(t,e){if(t.length<=xt)return;let n=xt+e,r=t[n];if(r){let i=r[vd];i!==null&&i!==t&&uC(i,r),e>0&&(t[n-1][vn]=r[vn]);let o=Hl(t,xt+e);g2(r[oe],r);let s=o[as];s!==null&&s.detachView(o[oe]),r[wt]=null,r[vn]=null,r[J]&=-129}return r}function Cd(t,e){if(!(e[J]&256)){let n=e[ot];n.destroyNode&&Td(t,e,n,3,null,null),y2(e)}}function pg(t,e){if(e[J]&256)return;let n=ye(null);try{e[J]&=-129,e[J]|=256,e[Fi]&&xD(e[Fi]),_2(t,e),I2(t,e),e[oe].type===1&&e[ot].destroy();let r=e[vd];if(r!==null&&pr(e[wt])){r!==e[wt]&&uC(r,e);let i=e[as];i!==null&&i.detachView(t)}JF(e)}finally{ye(n)}}function I2(t,e){let n=t.cleanup,r=e[$a];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[$a]=null);let i=e[Lr];if(i!==null){e[Lr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function _2(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof ji)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Fn(4,a,u);try{u.call(a)}finally{Fn(5,a,u)}}else{Fn(4,i,o);try{o.call(i)}finally{Fn(5,i,o)}}}}}function E2(t,e,n){return D2(t,e.parent,n)}function D2(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[fr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===Vn.None||o===Vn.Emulated)return null}return un(r,n)}}function Xl(t,e,n,r,i){t.insertBefore(e,n,r,i)}function cC(t,e,n){t.appendChild(e,n)}function pb(t,e,n,r,i){r!==null?Xl(t,e,n,r,i):cC(t,e,n)}function b2(t,e,n,r){t.removeChild(e,n,r)}function Hm(t,e){return t.parentNode(e)}function C2(t,e){return t.nextSibling(e)}function T2(t,e,n){return A2(t,e,n)}function S2(t,e,n){return t.type&40?un(t,n):null}var A2=S2,gb;function qm(t,e,n,r){let i=E2(t,r,e),o=e[ot],s=r.parent||e[Dn],a=T2(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)pb(o,i,n[u],a,!1);else pb(o,i,n,a,!1);gb!==void 0&&gb(o,r,e,n,i)}function jl(t,e){if(e!==null){let n=e.type;if(n&3)return un(e,t);if(n&4)return Bg(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return jl(t,r);{let i=t[e.index];return pr(i)?Bg(-1,i):jn(i)}}else{if(n&32)return $m(e,t)()||jn(t[e.index]);{let r=lC(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=za(t[_n]);return jl(i,r)}else return jl(t,e.next)}}}return null}function lC(t,e){if(e!==null){let r=t[_n][Dn],i=e.projection;return r.projection[i]}return null}function Bg(t,e){let n=xt+t+1;if(n<e.length){let r=e[n],i=r[oe].firstChild;if(i!==null)return jl(r,i)}return e[Li]}function x2(t,e,n){let r=Hm(t,e);r&&b2(t,r,e,n)}function zm(t,e,n,r,i,o,s){for(;n!=null;){let a=r[n.index],u=n.type;if(s&&e===0&&(a&&Bi(jn(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)zm(t,e,n.child,r,i,o,!1),Xo(e,t,i,a,o);else if(u&32){let c=$m(n,r),d;for(;d=c();)Xo(e,t,i,d,o);Xo(e,t,i,a,o)}else u&16?M2(t,e,r,n,i,o):Xo(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Td(t,e,n,r,i,o){zm(n,r,t.firstChild,e,i,o,!1)}function M2(t,e,n,r,i,o){let s=n[_n],u=s[Dn].projection[r.projection];if(Array.isArray(u))for(let c=0;c<u.length;c++){let d=u[c];Xo(e,t,i,d,o)}else{let c=u,d=s[wt];Q0(r)&&(c.flags|=128),zm(t,e,c,d,i,o,!0)}}function R2(t,e,n,r,i){let o=n[Li],s=jn(n);o!==s&&Xo(e,t,r,o,i);for(let a=xt;a<n.length;a++){let u=n[a];Td(u[oe],u,t,e,r,o)}}function N2(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:dr.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=dr.Important),t.setStyle(n,r,i,o))}}function P2(t,e,n){t.setAttribute(e,"style",n)}function dC(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function hC(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Sg(t,e,r),i!==null&&dC(t,e,i),o!==null&&P2(t,e,o)}var gr={};function $W(t=1){fC(Yt(),be(),Hr()+t,!1)}function fC(t,e,n,r){if(!r)if((e[J]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Ll(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Vl(e,o,0,n)}Vi(n)}function st(t,e=ae.Default){let n=be();if(n===null)return R(t,e);let r=Zt();return q0(r,n,Tt(t),e)}function pC(){let t="invalid";throw new Error(t)}function gC(t,e,n,r,i,o){let s=ye(null);try{let a=null;i&wn.SignalBased&&(a=e[r][CD]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&wn.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):v0(e,a,r,o)}finally{ye(s)}}function k2(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Vi(~i);else{let o=i,s=n[++r],a=n[++r];CF(s,o);let u=e[o];a(2,u)}}}finally{Vi(-1)}}function Sd(t,e,n,r,i,o,s,a,u,c,d){let f=e.blueprint.slice();return f[fr]=i,f[J]=r|4|128|8|64,(c!==null||t&&t[J]&2048)&&(f[J]|=2048),D0(f),f[wt]=f[fs]=t,f[Bt]=n,f[In]=s||t&&t[In],f[ot]=a||t&&t[ot],f[ss]=u||t&&t[ss]||null,f[Dn]=o,f[wd]=YF(),f[Ua]=d,f[g0]=c,f[_n]=e.type==2?t[_n]:f,f}function Ad(t,e,n,r,i){let o=t.data[e];if(o===null)o=O2(t,e,n,r,i),bF()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=IF();o.injectorIndex=s===null?-1:s.injectorIndex}return Xa(o,!0),o}function O2(t,e,n,r,i){let o=T0(),s=S0(),a=s?o:o&&o.parent,u=t.data[e]=B2(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function mC(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function yC(t,e,n,r,i){let o=Hr(),s=r&2;try{Vi(-1),s&&e.length>En&&fC(t,e,En,!1),Fn(s?2:0,i),n(r,i)}finally{Vi(o),Fn(s?3:1,i)}}function vC(t,e,n){if(y0(e)){let r=ye(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{ye(r)}}}function wC(t,e,n){C0()&&(W2(t,e,n,un(n,e)),(n.flags&64)===64&&bC(t,e,n))}function IC(t,e,n=un){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function _C(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Gm(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Gm(t,e,n,r,i,o,s,a,u,c,d){let f=En+r,m=f+i,y=F2(f,m),w=typeof c=="function"?c():c;return y[oe]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:w,incompleteFirstPass:!1,ssrId:d}}function F2(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:gr);return n}function L2(t,e,n,r){let o=r.get(i2,tC)||n===Vn.ShadowDom,s=t.selectRootElement(e,o);return V2(s),s}function V2(t){j2(t)}var j2=()=>null;function B2(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return yF()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function mb(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=wn.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let c=o;if(i!==null){if(!i.hasOwnProperty(o))continue;c=i[o]}t===0?yb(r,n,c,a,u):yb(r,n,c,a)}return r}function yb(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function U2(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],u=null,c=null;for(let d=r;d<i;d++){let f=o[d],m=n?n.get(f):null,y=m?m.inputs:null,w=m?m.outputs:null;u=mb(0,f.inputs,d,u,y),c=mb(1,f.outputs,d,c,w);let _=u!==null&&s!==null&&!_m(e)?iL(u,d,s):null;a.push(_)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=c}function $2(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function H2(t,e,n,r,i,o,s,a){let u=un(e,n),c=e.inputs,d;!a&&c!=null&&(d=c[r])?(Wm(t,n,d,r,i),Id(e)&&q2(n,e.index)):e.type&3?(r=$2(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function q2(t,e){let n=$r(e,t);n[J]&16||(n[J]|=64)}function EC(t,e,n,r){if(C0()){let i=r===null?null:{"":-1},o=Q2(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&DC(t,e,n,s,i,a),i&&Y2(n,r,i)}n.mergedAttrs=ja(n.mergedAttrs,n.attrs)}function DC(t,e,n,r,i,o){for(let c=0;c<r.length;c++)Og(Zl(n,e),t,r[c].type);J2(n,t.data.length,r.length);for(let c=0;c<r.length;c++){let d=r[c];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,u=mC(t,e,r.length,null);for(let c=0;c<r.length;c++){let d=r[c];n.mergedAttrs=ja(n.mergedAttrs,d.hostAttrs),X2(t,n,e,u,d),Z2(u,d,i),d.contentQueries!==null&&(n.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(n.flags|=64);let f=d.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}U2(t,n,o)}function z2(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;G2(s)!=a&&s.push(a),s.push(n,r,o)}}function G2(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function W2(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;Id(n)&&eL(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Zl(n,e),Bi(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let u=t.data[a],c=us(e,t,a,n);if(Bi(c,e),s!==null&&rL(e,a-i,c,u,n,s),jr(u)){let d=$r(n.index,e);d[Bt]=us(e,t,a,n)}}}function bC(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=TF();try{Vi(o);for(let a=r;a<i;a++){let u=t.data[a],c=e[a];Pg(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&K2(u,c)}}finally{Vi(-1),Pg(s)}}function K2(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function Q2(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(NO(e,s.selectors,!1))if(r||(r=[]),jr(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;Ug(t,e,u)}else r.unshift(s),Ug(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Ug(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function Y2(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new q(-301,!1);r.push(e[i],o)}}}function Z2(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;jr(e)&&(n[""]=t)}}function J2(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function X2(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Oi(i.type,!0)),s=new ji(o,jr(i),st);t.blueprint[r]=s,n[r]=s,z2(t,e,r,mC(t,n,i.hostVars,gr),i)}function eL(t,e,n){let r=un(e,t),i=_C(n),o=t[In].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=xd(t,Sd(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function tL(t,e,n,r,i,o){let s=un(t,e);nL(e[ot],s,o,t.value,n,r,i)}function nL(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?gd(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function rL(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],c=s[a++],d=s[a++],f=s[a++];gC(r,n,u,c,d,f)}}function iL(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function CC(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function TC(t,e){let n=t.contentQueries;if(n!==null){let r=ye(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];x0(o),a.contentQueries(2,e[s],s)}}}finally{ye(r)}}}function xd(t,e){return t[Ha]?t[sb][vn]=e:t[Ha]=e,t[sb]=e,e}function $g(t,e,n){x0(0);let r=ye(null);try{e(t,n)}finally{ye(r)}}function oL(t){return t[$a]||(t[$a]=[])}function sL(t){return t.cleanup||(t.cleanup=[])}function SC(t,e){let n=t[ss],r=n?n.get(Bn,null):null;r&&r.handleError(e)}function Wm(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],u=n[o++],c=e[s],d=t.data[s];gC(d,c,r,a,u,i)}}function aL(t,e,n){let r=E0(e,t);p2(t[ot],r,n)}function uL(t,e){let n=$r(e,t),r=n[oe];cL(r,n);let i=n[fr];i!==null&&n[Ua]===null&&(n[Ua]=Bm(i,n[ss])),Km(r,n,n[Bt])}function cL(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Km(t,e,n){xm(e);try{let r=t.viewQuery;r!==null&&$g(1,r,n);let i=t.template;i!==null&&yC(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[as]?.finishViewCreation(t),t.staticContentQueries&&TC(t,e),t.staticViewQueries&&$g(2,t.viewQuery,n);let o=t.components;o!==null&&lL(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[J]&=-5,Mm()}}function lL(t,e){for(let n=0;n<e.length;n++)uL(t,e[n])}function Qm(t,e,n,r){let i=ye(null);try{let o=e.tView,a=t[J]&4096?4096:16,u=Sd(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),c=t[e.index];u[vd]=c;let d=t[as];return d!==null&&(u[as]=d.createEmbeddedView(o)),Km(o,u,n),u}finally{ye(i)}}function dL(t,e){let n=xt+e;if(n<t.length)return t[n]}function ed(t,e){return!e||e.firstChild===null||Q0(t)}function Ym(t,e,n,r=!0){let i=e[oe];if(v2(i,e,t,n),r){let s=Bg(n,t),a=e[ot],u=Hm(a,t[Li]);u!==null&&m2(i,t[Dn],a,e,u,s)}let o=e[Ua];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function hL(t,e){let n=Ga(t,e);return n!==void 0&&Cd(n[oe],n),n}function td(t,e,n,r,i=!1){for(;n!==null;){let o=e[n.index];o!==null&&r.push(jn(o)),pr(o)&&fL(o,r);let s=n.type;if(s&8)td(t,e,n.child,r);else if(s&32){let a=$m(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=lC(e,n);if(Array.isArray(a))r.push(...a);else{let u=za(e[_n]);td(u[oe],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function fL(t,e){for(let n=xt;n<t.length;n++){let r=t[n],i=r[oe].firstChild;i!==null&&td(r[oe],r,i,e)}t[Li]!==t[fr]&&e.push(t[Li])}var AC=[];function pL(t){return t[Fi]??gL(t)}function gL(t){let e=AC.pop()??Object.create(yL);return e.lView=t,e}function mL(t){t.lView[Fi]!==t&&(t.lView=null,AC.push(t))}var yL=Pe(j({},TD),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{qa(t.lView)},consumerOnSignalRead(){this.lView[Fi]=this}}),xC=100;function MC(t,e=!0,n=0){let r=t[In],i=r.rendererFactory,o=!1;o||i.begin?.();try{vL(t,n)}catch(s){throw e&&SC(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function vL(t,e){Hg(t,e);let n=0;for(;Am(t);){if(n===xC)throw new q(103,!1);n++,Hg(t,1)}}function wL(t,e,n,r){let i=e[J];if((i&256)===256)return;let o=!1;!o&&e[In].inlineEffectRunner?.flush(),xm(e);let s=null,a=null;!o&&IL(t)&&(a=pL(e),s=SD(a));try{D0(e),DF(t.bindingStartIndex),n!==null&&yC(t,e,n,2,r);let u=(i&3)===3;if(!o)if(u){let f=t.preOrderCheckHooks;f!==null&&Ll(e,f,null)}else{let f=t.preOrderHooks;f!==null&&Vl(e,f,0,null),lg(e,0)}if(_L(e),RC(e,0),t.contentQueries!==null&&TC(t,e),!o)if(u){let f=t.contentCheckHooks;f!==null&&Ll(e,f)}else{let f=t.contentHooks;f!==null&&Vl(e,f,1),lg(e,1)}k2(t,e);let c=t.components;c!==null&&PC(e,c,0);let d=t.viewQuery;if(d!==null&&$g(2,d,r),!o)if(u){let f=t.viewCheckHooks;f!==null&&Ll(e,f)}else{let f=t.viewHooks;f!==null&&Vl(e,f,2),lg(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[cg]){for(let f of e[cg])f();e[cg]=null}o||(e[J]&=-73)}catch(u){throw qa(e),u}finally{a!==null&&(AD(a,s),mL(a)),Mm()}}function IL(t){return t.type!==2}function RC(t,e){for(let n=Z0(t);n!==null;n=J0(n))for(let r=xt;r<n.length;r++){let i=n[r];NC(i,e)}}function _L(t){for(let e=Z0(t);e!==null;e=J0(e)){if(!(e[J]&bm.HasTransplantedViews))continue;let n=e[Gl];for(let r=0;r<n.length;r++){let i=n[r],o=i[wt];dF(i)}}}function EL(t,e,n){let r=$r(e,t);NC(r,n)}function NC(t,e){Sm(t)&&Hg(t,e)}function Hg(t,e){let r=t[oe],i=t[J],o=t[Fi],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&jp(o)),o&&(o.dirty=!1),t[J]&=-9217,s)wL(r,t,r.template,t[Bt]);else if(i&8192){RC(t,1);let a=r.components;a!==null&&PC(t,a,1)}}function PC(t,e,n){for(let r=0;r<e.length;r++)EL(t,e[r],n)}function Zm(t){for(t[In].changeDetectionScheduler?.notify();t;){t[J]|=64;let e=za(t);if(tF(t)&&!e)return t;t=e}return null}var Ui=class{get rootNodes(){let e=this._lView,n=e[oe];return td(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Bt]}set context(e){this._lView[Bt]=e}get destroyed(){return(this._lView[J]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[wt];if(pr(e)){let n=e[zl],r=n?n.indexOf(this):-1;r>-1&&(Ga(e,r),Hl(n,r))}this._attachedToViewContainer=!1}Cd(this._lView[oe],this._lView)}onDestroy(e){b0(this._lView,e)}markForCheck(){Zm(this._cdRefInjectingView||this._lView)}detach(){this._lView[J]&=-129}reattach(){Ng(this._lView),this._lView[J]|=128}detectChanges(){this._lView[J]|=1024,MC(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new q(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,aC(this._lView[oe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new q(902,!1);this._appRef=e,Ng(this._lView)}},Md=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=CL;let t=e;return t})(),DL=Md,bL=class extends DL{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=Qm(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Ui(i)}};function CL(){return TL(Zt(),be())}function TL(t,e){return t.type&4?new bL(e,t,Ed(t,e)):null}var qW=new RegExp(`^(\\d+)*(${n2}|${t2})*(.*)`);var SL=()=>null;function nd(t,e){return SL(t,e)}var rd=class{},qg=class{},id=class{};function AL(t){let e=Error(`No component factory found for ${At(t)}.`);return e[xL]=t,e}var xL="ngComponent";var zg=class{resolveComponentFactory(e){throw AL(e)}},Rd=(()=>{let e=class e{};e.NULL=new zg;let t=e;return t})(),Wa=class{},Nd=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>ML();let t=e;return t})();function ML(){let t=be(),e=Zt(),n=$r(e.index,t);return(Pi(n)?n:t)[ot]}var RL=(()=>{let e=class e{};e.\u0275prov=B({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),gg={};var vb=new Set;function Pd(t){vb.has(t)||(vb.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function wb(...t){}function NL(){let t=typeof nt.requestAnimationFrame=="function",e=nt[t?"requestAnimationFrame":"setTimeout"],n=nt[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var he=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new St(!1),this.onMicrotaskEmpty=new St(!1),this.onStable=new St(!1),this.onError=new St(!1),typeof Zone>"u")throw new q(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=NL().nativeRequestAnimationFrame,OL(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new q(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new q(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,PL,wb,wb);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},PL={};function Jm(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function kL(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(nt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Gg(t),t.isCheckStableRunning=!0,Jm(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Gg(t))}function OL(t){let e=()=>{kL(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(FL(a))return n.invokeTask(i,o,s,a);try{return Ib(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),_b(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return Ib(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),_b(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,Gg(t),Jm(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function Gg(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function Ib(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function _b(t){t._nesting--,Jm(t)}var Wg=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new St,this.onMicrotaskEmpty=new St,this.onStable=new St,this.onError=new St}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function FL(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}function LL(t="zone.js",e){return t==="noop"?new Wg:t==="zone.js"?new he(e):t}var es=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(es||{}),VL={destroy(){}};function Xm(t,e){!e&&JO(Xm);let n=e?.injector??O(Un);if(!d2(n))return VL;Pd("NgAfterNextRender");let r=n.get(ey),i=r.handler??=new Qg,o=e?.phase??es.MixedReadWrite,s=()=>{i.unregister(u),a()},a=n.get(Lm).onDestroy(s),u=hr(n,()=>new Kg(o,()=>{s(),t()}));return i.register(u),{destroy:s}}var Kg=class{constructor(e,n){this.phase=e,this.callbackFn=n,this.zone=O(he),this.errorHandler=O(Bn,{optional:!0}),O(rd,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},Qg=class{constructor(){this.executingCallbacks=!1,this.buckets={[es.EarlyRead]:new Set,[es.Write]:new Set,[es.MixedReadWrite]:new Set,[es.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},ey=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=B({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function Yg(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Dg(i,a);else if(o==2){let u=a,c=e[++s];r=Dg(r,u+": "+c+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var od=class extends Rd{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Vr(e);return new cs(n,this.ngModule)}};function Eb(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function jL(t){let e=t.toLowerCase();return e==="svg"?oF:e==="math"?sF:null}var Zg=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=md(r);let i=this.injector.get(e,gg,r);return i!==gg||n===gg?i:this.parentInjector.get(e,n,r)}},cs=class extends id{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=Eb(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Eb(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=FO(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=ye(null);try{i=i||this.ngModule;let s=i instanceof Qt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Zg(e,s):e,u=a.get(Wa,null);if(u===null)throw new q(407,!1);let c=a.get(RL,null),d=a.get(ey,null),f=a.get(rd,null),m={rendererFactory:u,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:d,changeDetectionScheduler:f},y=u.createRenderer(null,this.componentDef),w=this.componentDef.selectors[0][0]||"div",_=r?L2(y,r,this.componentDef.encapsulation,a):sC(y,w,jL(w)),T=512;this.componentDef.signals?T|=4096:this.componentDef.onPush||(T|=16);let x=null;_!==null&&(x=Bm(_,a,!0));let V=Gm(0,null,null,1,0,null,null,null,null,null,null),M=Sd(null,V,null,T,null,null,m,y,a,null,x);xm(M);let H,W;try{let Y=this.componentDef,Ie,yt=null;Y.findHostDirectiveDefs?(Ie=[],yt=new Map,Y.findHostDirectiveDefs(Y,Ie,yt),Ie.push(Y)):Ie=[Y];let Mo=BL(M,_),Mr=UL(Mo,_,Y,Ie,M,m,y);W=Tm(V,En),_&&qL(y,Y,_,r),n!==void 0&&zL(W,this.ngContentSelectors,n),H=HL(Mr,Y,Ie,yt,M,[GL]),Km(V,M,null)}finally{Mm()}return new Jg(this.componentType,H,Ed(W,M),M,W)}finally{ye(o)}}},Jg=class extends qg{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Ui(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;Wm(o[oe],o,i,e,n),this.previousInputValues.set(e,n);let s=$r(this._tNode.index,o);Zm(s)}}get injector(){return new ki(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function BL(t,e){let n=t[oe],r=En;return t[r]=e,Ad(n,r,2,"#host",null)}function UL(t,e,n,r,i,o,s){let a=i[oe];$L(r,t,e,s);let u=null;e!==null&&(u=Bm(e,i[ss]));let c=o.rendererFactory.createRenderer(e,n),d=16;n.signals?d=4096:n.onPush&&(d=64);let f=Sd(i,_C(n),null,d,i[t.index],t,o,c,null,null,u);return a.firstCreatePass&&Ug(a,t,r.length-1),xd(i,f),i[t.index]=f}function $L(t,e,n,r){for(let i of t)e.mergedAttrs=ja(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Yg(e,e.mergedAttrs,!0),n!==null&&hC(r,n,e))}function HL(t,e,n,r,i,o){let s=Zt(),a=i[oe],u=un(s,i);DC(a,i,s,n,null,r);for(let d=0;d<n.length;d++){let f=s.directiveStart+d,m=us(i,a,f,s);Bi(m,i)}bC(a,i,s),u&&Bi(u,i);let c=us(i,a,s.directiveStart+s.componentOffset,s);if(t[Bt]=i[Bt]=c,o!==null)for(let d of o)d(c,e);return vC(a,s,i),c}function qL(t,e,n,r){if(r)Sg(t,n,["ng-version","17.3.6"]);else{let{attrs:i,classes:o}=LO(e.selectors[0]);i&&Sg(t,n,i),o&&o.length>0&&dC(t,n,o.join(" "))}}function zL(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function GL(){let t=Zt();Pm(be()[oe],t)}var ps=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=WL;let t=e;return t})();function WL(){let t=Zt();return QL(t,be())}var KL=ps,kC=class extends KL{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Ed(this._hostTNode,this._hostLView)}get injector(){return new ki(this._hostTNode,this._hostLView)}get parentInjector(){let e=km(this._hostTNode,this._hostLView);if(V0(e)){let n=Ql(e,this._hostLView),r=Kl(e),i=n[oe].data[r+8];return new ki(i,n)}else return new ki(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=Db(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-xt}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=nd(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,ed(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!eF(e),a;if(s)a=n;else{let w=n||{};a=w.index,r=w.injector,i=w.projectableNodes,o=w.environmentInjector||w.ngModuleRef}let u=s?e:new cs(Vr(e)),c=r||this.parentInjector;if(!o&&u.ngModule==null){let _=(s?c:this.parentInjector).get(Qt,null);_&&(o=_)}let d=Vr(u.componentType??{}),f=nd(this._lContainer,d?.id??null),m=f?.firstChild??null,y=u.create(c,i,m,o);return this.insertImpl(y.hostView,a,ed(this._hostTNode,f)),y}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(lF(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[wt],c=new kC(u,u[Dn],u[wt]);c.detach(c.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return Ym(s,i,o,r),e.attachToViewContainerRef(),Qb(mg(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=Db(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Ga(this._lContainer,n);r&&(Hl(mg(this._lContainer),n),Cd(r[oe],r))}detach(e){let n=this._adjustIndex(e,-1),r=Ga(this._lContainer,n);return r&&Hl(mg(this._lContainer),n)!=null?new Ui(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function Db(t){return t[zl]}function mg(t){return t[zl]||(t[zl]=[])}function QL(t,e){let n,r=e[t.index];return pr(r)?n=r:(n=CC(r,e,null,t),e[t.index]=n,xd(e,n)),ZL(n,e,t,r),new kC(n,t,e)}function YL(t,e){let n=t[ot],r=n.createComment(""),i=un(e,t),o=Hm(n,i);return Xl(n,o,r,C2(n,i),!1),r}var ZL=eV,JL=()=>!1;function XL(t,e,n){return JL(t,e,n)}function eV(t,e,n,r){if(t[Li])return;let i;n.type&8?i=jn(r):i=YL(e,n),t[Li]=i}function tV(t){let e=[],n=new Map;function r(i){let o=n.get(i);if(!o){let s=t(i);n.set(i,o=s.then(oV))}return o}return sd.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(c=>{i.template=c}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let c=i.styles.length,d=i.styleUrls;i.styleUrls.forEach((f,m)=>{a.push(""),s.push(r(f).then(y=>{a[c+m]=y,d.splice(d.indexOf(f),1),d.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(c=>{a.push(c),i.styleUrl=void 0}));let u=Promise.all(s).then(()=>sV(o));e.push(u)}),rV(),Promise.all(e).then(()=>{})}var sd=new Map,nV=new Set;function rV(){let t=sd;return sd=new Map,t}function iV(){return sd.size===0}function oV(t){return typeof t=="string"?t:t.text()}function sV(t){nV.delete(t)}function aV(t){return Object.getPrototypeOf(t.prototype).constructor}function uV(t){let e=aV(t.type),n=!0,r=[t];for(;e;){let i;if(jr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new q(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=Pl(t.inputs),s.inputTransforms=Pl(t.inputTransforms),s.declaredInputs=Pl(t.declaredInputs),s.outputs=Pl(t.outputs);let a=i.hostBindings;a&&fV(t,a);let u=i.viewQuery,c=i.contentQueries;if(u&&dV(t,u),c&&hV(t,c),cV(t,i),oO(t.outputs,i.outputs),jr(i)&&i.data.animation){let d=t.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===uV&&(n=!1)}}e=Object.getPrototypeOf(e)}lV(r)}function cV(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function lV(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ja(i.hostAttrs,n=ja(n,i.hostAttrs))}}function Pl(t){return t===rs?{}:t===jt?[]:t}function dV(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function hV(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function fV(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function ty(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var Br=class{},Ka=class{};var ad=class extends Br{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new od(this);let i=a0(e);this._bootstrapComponents=oC(i.bootstrap),this._r3Injector=W0(e,n,[{provide:Br,useValue:this},{provide:Rd,useValue:this.componentFactoryResolver},...r],At(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},ud=class extends Ka{constructor(e){super(),this.moduleType=e}create(e){return new ad(this.moduleType,e,[])}};function pV(t,e,n){return new ad(t,e,n)}var Xg=class extends Br{constructor(e){super(),this.componentFactoryResolver=new od(this),this.instance=null;let n=new Ba([...e.providers,{provide:Br,useValue:this},{provide:Rd,useValue:this.componentFactoryResolver}],e.parent||Dm(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function kd(t,e,n=null){return new Xg({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var Od=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new et(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function OC(t){return mV(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function gV(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function mV(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function yV(t,e,n){return t[e]=n}function qi(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function vV(t){return(t.flags&32)===32}function wV(t,e,n,r,i,o,s,a,u){let c=e.consts,d=Ad(e,t,4,s||null,Wl(c,a));EC(e,n,d,Wl(c,u)),Pm(e,d);let f=d.tView=Gm(2,d,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function em(t,e,n,r,i,o,s,a){let u=be(),c=Yt(),d=t+En,f=c.firstCreatePass?wV(d,c,u,e,n,r,i,o,s):c.data[d];Xa(f,!1);let m=IV(c,u,f,t);Rm()&&qm(c,u,m,f),Bi(m,u);let y=CC(m,u,m,f);return u[d]=y,xd(u,y),XL(y,f,u),Cm(f)&&wC(c,u,f),s!=null&&IC(u,f,a),em}var IV=_V;function _V(t,e,n,r){return Nm(!0),e[ot].createComment("")}function ny(t,e,n,r){let i=be(),o=_d();if(qi(i,o,e)){let s=Yt(),a=O0();tL(a,i,t,e,n,r)}return ny}function FC(t,e,n,r){return qi(t,_d(),n)?e+gd(n)+r:gr}function kl(t,e){return t<<17|e<<2}function $i(t){return t>>17&32767}function EV(t){return(t&2)==2}function DV(t,e){return t&131071|e<<17}function tm(t){return t|2}function ls(t){return(t&131068)>>2}function yg(t,e){return t&-131069|e<<2}function bV(t){return(t&1)===1}function nm(t){return t|1}function CV(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=$i(s),u=ls(s);t[r]=n;let c=!1,d;if(Array.isArray(n)){let f=n;d=f[1],(d===null||Za(f,d)>0)&&(c=!0)}else d=n;if(i)if(u!==0){let m=$i(t[a+1]);t[r+1]=kl(m,a),m!==0&&(t[m+1]=yg(t[m+1],r)),t[a+1]=DV(t[a+1],r)}else t[r+1]=kl(a,0),a!==0&&(t[a+1]=yg(t[a+1],r)),a=r;else t[r+1]=kl(u,0),a===0?a=r:t[u+1]=yg(t[u+1],r),u=r;c&&(t[r+1]=tm(t[r+1])),bb(t,d,r,!0),bb(t,d,r,!1),TV(e,d,t,r,o),s=kl(a,u),o?e.classBindings=s:e.styleBindings=s}function TV(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Za(o,e)>=0&&(n[r+1]=nm(n[r+1]))}function bb(t,e,n,r){let i=t[n+1],o=e===null,s=r?$i(i):ls(i),a=!1;for(;s!==0&&(a===!1||o);){let u=t[s],c=t[s+1];SV(u,e)&&(a=!0,t[s+1]=r?nm(c):tm(c)),s=r?$i(c):ls(c)}a&&(t[n+1]=r?tm(i):nm(i))}function SV(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Za(t,e)>=0:!1}var Ct={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function AV(t){return t.substring(Ct.key,Ct.keyEnd)}function xV(t){return t.substring(Ct.value,Ct.valueEnd)}function MV(t){return RV(t),LC(t,cd(t,0,Ct.textEnd))}function LC(t,e){let n=Ct.textEnd,r=Ct.key=cd(t,e,n);return n===r?-1:(r=Ct.keyEnd=NV(t,r,n),r=Cb(t,r,n,58),r=Ct.value=cd(t,r,n),r=Ct.valueEnd=PV(t,r,n),Cb(t,r,n,59))}function RV(t){Ct.key=0,Ct.keyEnd=0,Ct.value=0,Ct.valueEnd=0,Ct.textEnd=t.length}function cd(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function NV(t,e,n){let r;for(;e<n&&((r=t.charCodeAt(e))===45||r===95||(r&-33)>=65&&(r&-33)<=90||r>=48&&r<=57);)e++;return e}function Cb(t,e,n,r){return e=cd(t,e,n),e<n&&e++,e}function PV(t,e,n){let r=-1,i=-1,o=-1,s=e,a=s;for(;s<n;){let u=t.charCodeAt(s++);if(u===59)return a;u===34||u===39?a=s=Tb(t,u,s,n):e===s-4&&o===85&&i===82&&r===76&&u===40?a=s=Tb(t,41,s,n):u>32&&(a=s),o=i,i=r,r=u&-33}return a}function Tb(t,e,n,r){let i=-1,o=n;for(;o<r;){let s=t.charCodeAt(o++);if(s==e&&i!==92)return o;s==92&&i===92?i=0:i=s}throw new Error}function kV(t,e,n){let r=be(),i=_d();if(qi(r,i,e)){let o=Yt(),s=O0();H2(o,s,r,t,e,r[ot],n,!1)}return kV}function rm(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";Wm(t,n,o[s],s,r)}function OV(t,e){return VV(t,e,null,!0),OV}function FV(t){jV(BC,LV,t,!1)}function LV(t,e){for(let n=MV(e);n>=0;n=LC(e,n))BC(t,AV(e),xV(e))}function VV(t,e,n,r){let i=be(),o=Yt(),s=A0(2);if(o.firstUpdatePass&&jC(o,t,s,r),e!==gr&&qi(i,s,e)){let a=o.data[Hr()];UC(o,a,i,i[ot],t,i[s+1]=GV(e,n),r,s)}}function jV(t,e,n,r){let i=Yt(),o=A0(2);i.firstUpdatePass&&jC(i,null,o,r);let s=be();if(n!==gr&&qi(s,o,n)){let a=i.data[Hr()];if($C(a,r)&&!VC(i,o)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;u!==null&&(n=Dg(u,n||"")),rm(i,a,s,n,r)}else zV(i,a,s,s[ot],s[o+1],s[o+1]=qV(t,e,n),r,o)}}function VC(t,e){return e>=t.expandoStartIndex}function jC(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Hr()],s=VC(t,n);$C(o,r)&&e===null&&!s&&(e=!1),e=BV(i,o,e,r),CV(i,o,e,n,s,r)}}function BV(t,e,n,r){let i=SF(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=vg(null,t,e,n,r),n=Qa(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=vg(i,t,e,n,r),o===null){let u=UV(t,e,r);u!==void 0&&Array.isArray(u)&&(u=vg(null,t,e,u[1],r),u=Qa(u,e.attrs,r),$V(t,e,r,u))}else o=HV(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function UV(t,e,n){let r=n?e.classBindings:e.styleBindings;if(ls(r)!==0)return t[$i(r)]}function $V(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[$i(i)]=r}function HV(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Qa(r,s,n)}return Qa(r,e.attrs,n)}function vg(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=Qa(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Qa(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),Yb(t,s,n?!0:e[++o]))}return t===void 0?null:t}function qV(t,e,n){if(n==null||n==="")return jt;let r=[],i=Hi(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function BC(t,e,n){Yb(t,e,Hi(n))}function zV(t,e,n,r,i,o,s,a){i===gr&&(i=jt);let u=0,c=0,d=0<i.length?i[0]:null,f=0<o.length?o[0]:null;for(;d!==null||f!==null;){let m=u<i.length?i[u+1]:void 0,y=c<o.length?o[c+1]:void 0,w=null,_;d===f?(u+=2,c+=2,m!==y&&(w=f,_=y)):f===null||d!==null&&d<f?(u+=2,w=d):(c+=2,w=f,_=y),w!==null&&UC(t,e,n,r,w,_,s,a),d=u<i.length?i[u]:null,f=c<o.length?o[c]:null}}function UC(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,c=u[a+1],d=bV(c)?Sb(u,e,n,i,ls(c),s):void 0;if(!ld(d)){ld(o)||EV(c)&&(o=Sb(u,null,n,i,a,s));let f=E0(Hr(),n);N2(r,s,f,i,o)}}function Sb(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],c=Array.isArray(u),d=c?u[1]:u,f=d===null,m=n[i+1];m===gr&&(m=f?jt:void 0);let y=f?ag(m,r):d===r?m:void 0;if(c&&!ld(y)&&(y=ag(u,r)),ld(y)&&(a=y,s))return a;let w=t[i+1];i=s?$i(w):ls(w)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=ag(u,r))}return a}function ld(t){return t!==void 0}function GV(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=At(Hi(t)))),t}function $C(t,e){return(t.flags&(e?8:16))!==0}var im=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function wg(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function WV(t,e,n){let r,i,o=0,s=t.length-1;if(Array.isArray(e)){let a=e.length-1;for(;o<=s&&o<=a;){let u=t.at(o),c=e[o],d=wg(o,u,o,c,n);if(d!==0){d<0&&t.updateValue(o,c),o++;continue}let f=t.at(s),m=e[a],y=wg(s,f,a,m,n);if(y!==0){y<0&&t.updateValue(s,m),s--,a--;continue}let w=n(o,u),_=n(s,f),T=n(o,c);if(Object.is(T,_)){let x=n(a,m);Object.is(x,w)?(t.swap(o,s),t.updateValue(s,m),a--,s--):t.move(s,o),t.updateValue(o,c),o++;continue}if(r??=new dd,i??=xb(t,o,s,n),om(t,r,o,T))t.updateValue(o,c),o++,s++;else if(i.has(T))r.set(w,t.detach(o)),s--;else{let x=t.create(o,e[o]);t.attach(o,x),o++,s++}}for(;o<=a;)Ab(t,r,n,o,e[o]),o++}else if(e!=null){let a=e[Symbol.iterator](),u=a.next();for(;!u.done&&o<=s;){let c=t.at(o),d=u.value,f=wg(o,c,o,d,n);if(f!==0)f<0&&t.updateValue(o,d),o++,u=a.next();else{r??=new dd,i??=xb(t,o,s,n);let m=n(o,d);if(om(t,r,o,m))t.updateValue(o,d),o++,s++,u=a.next();else if(!i.has(m))t.attach(o,t.create(o,d)),o++,s++,u=a.next();else{let y=n(o,c);r.set(y,t.detach(o)),s--}}}for(;!u.done;)Ab(t,r,n,t.length,u.value),u=a.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(a=>{t.destroy(a)})}function om(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function Ab(t,e,n,r,i){if(om(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function xb(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var dd=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};var sm=class{constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-xt}};function GW(t){return t}var am=class{constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function WW(t,e,n,r,i,o,s,a,u,c,d,f,m){Pd("NgControlFlow");let y=u!==void 0,w=be(),_=a?s.bind(w[_n][Bt]):s,T=new am(y,_);w[En+t]=T,em(t+1,e,n,r,i,o),y&&em(t+2,u,c,d,f,m)}var um=class extends im{constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-xt}at(e){return this.getLView(e)[Bt].$implicit}attach(e,n){let r=n[Ua];this.needsIndexUpdate||=e!==this.length,Ym(this.lContainer,n,e,ed(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,KV(this.lContainer,e)}create(e,n){let r=nd(this.lContainer,this.templateTNode.tView.ssrId);return Qm(this.hostLView,this.templateTNode,new sm(this.lContainer,n,e),{dehydratedView:r})}destroy(e){Cd(e[oe],e)}updateValue(e,n){this.getLView(e)[Bt].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Bt].$index=e}getLView(e){return QV(this.lContainer,e)}};function KW(t){let e=ye(null),n=Hr();try{let r=be(),i=r[oe],o=r[n];if(o.liveCollection===void 0){let a=n+1,u=Mb(r,a),c=Rb(i,a);o.liveCollection=new um(u,r,c)}else o.liveCollection.reset();let s=o.liveCollection;if(WV(s,t,o.trackByFn),s.updateIndexes(),o.hasEmptyBlock){let a=_d(),u=s.length===0;if(qi(r,a,u)){let c=n+2,d=Mb(r,c);if(u){let f=Rb(i,c),m=nd(d,f.tView.ssrId),y=Qm(r,f,void 0,{dehydratedView:m});Ym(d,y,0,ed(f,m))}else hL(d,0)}}}finally{ye(e)}}function Mb(t,e){return t[e]}function KV(t,e){return Ga(t,e)}function QV(t,e){return dL(t,e)}function Rb(t,e){return Tm(t,e)}function YV(t,e,n,r,i,o){let s=e.consts,a=Wl(s,i),u=Ad(e,t,2,r,a);return EC(e,n,u,Wl(s,o)),u.attrs!==null&&Yg(u,u.attrs,!1),u.mergedAttrs!==null&&Yg(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function HC(t,e,n,r){let i=be(),o=Yt(),s=En+t,a=i[ot],u=o.firstCreatePass?YV(s,o,i,e,n,r):o.data[s],c=ZV(o,i,u,a,e,t);i[s]=c;let d=Cm(u);return Xa(u,!0),hC(a,c,u),!vV(u)&&Rm()&&qm(o,i,c,u),pF()===0&&Bi(c,i),gF(),d&&(wC(o,i,u),vC(o,u,i)),r!==null&&IC(i,u),HC}function qC(){let t=Zt();S0()?_F():(t=t.parent,Xa(t,!1));let e=t;vF(e)&&wF(),mF();let n=Yt();return n.firstCreatePass&&(Pm(n,t),y0(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&kF(e)&&rm(n,e,be(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&OF(e)&&rm(n,e,be(),e.stylesWithoutHost,!1),qC}function ry(t,e,n,r){return HC(t,e,n,r),qC(),ry}var ZV=(t,e,n,r,i,o)=>(Nm(!0),sC(r,i,MF()));var Ni=void 0;function JV(t){let e=t,n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&r===0?1:5}var XV=["en",[["a","p"],["AM","PM"],Ni],[["AM","PM"],Ni,Ni],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ni,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ni,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ni,"{1} 'at' {0}",Ni],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",JV],Ig={};function Fd(t){let e=ej(t),n=Nb(e);if(n)return n;let r=e.split("-")[0];if(n=Nb(r),n)return n;if(r==="en")return XV;throw new q(701,!1)}function Nb(t){return t in Ig||(Ig[t]=nt.ng&&nt.ng.common&&nt.ng.common.locales&&nt.ng.common.locales[t]),Ig[t]}var zi=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(zi||{});function ej(t){return t.toLowerCase().replace(/_/g,"-")}var hd="en-US",tj="USD";var nj=hd;function rj(t){typeof t=="string"&&(nj=t.toLowerCase().replace(/_/g,"-"))}function iy(t,e,n,r){let i=be(),o=Yt(),s=Zt();return oj(o,i,i[ot],s,t,e,r),iy}function ij(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[$a],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function oj(t,e,n,r,i,o,s){let a=Cm(r),c=t.firstCreatePass&&sL(t),d=e[Bt],f=oL(e),m=!0;if(r.type&3||s){let _=un(r,e),T=s?s(_):_,x=f.length,V=s?H=>s(jn(H[r.index])):r.index,M=null;if(!s&&a&&(M=ij(t,e,i,r.index)),M!==null){let H=M.__ngLastListenerFn__||M;H.__ngNextListenerFn__=o,M.__ngLastListenerFn__=o,m=!1}else{o=kb(r,e,d,o,!1);let H=n.listen(T,i,o);f.push(o,H),c&&c.push(i,V,x,x+1)}}else o=kb(r,e,d,o,!1);let y=r.outputs,w;if(m&&y!==null&&(w=y[i])){let _=w.length;if(_)for(let T=0;T<_;T+=2){let x=w[T],V=w[T+1],W=e[x][V].subscribe(o),Y=f.length;f.push(o,W),c&&c.push(i,r.index,Y,-(Y+1))}}}function Pb(t,e,n,r){let i=ye(null);try{return Fn(6,e,n),n(r)!==!1}catch(o){return SC(t,o),!1}finally{Fn(7,e,n),ye(i)}}function kb(t,e,n,r,i){return function o(s){if(s===Function)return r;let a=t.componentOffset>-1?$r(t.index,e):e;Zm(a);let u=Pb(e,n,r,s),c=o.__ngNextListenerFn__;for(;c;)u=Pb(e,n,c,s)&&u,c=c.__ngNextListenerFn__;return i&&u===!1&&s.preventDefault(),u}}function QW(t=1){return xF(t)}function sj(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function YW(t,e,n){let r=be(),i=FC(r,t,e,n);FV(i)}function ZW(t,e=""){let n=be(),r=Yt(),i=t+En,o=r.firstCreatePass?Ad(r,i,1,e,null):r.data[i],s=aj(r,n,o,e,t);n[i]=s,Rm()&&qm(r,n,s,o),Xa(o,!1)}var aj=(t,e,n,r,i)=>(Nm(!0),f2(e[ot],r));function uj(t){return zC("",t,""),uj}function zC(t,e,n){let r=be(),i=FC(r,t,e,n);return i!==gr&&aL(r,Hr(),i),zC}function cj(t,e,n){let r=Yt();if(r.firstCreatePass){let i=jr(t);cm(n,r.data,r.blueprint,i,!0),cm(e,r.data,r.blueprint,i,!1)}}function cm(t,e,n,r,i){if(t=Tt(t),Array.isArray(t))for(let o=0;o<t.length;o++)cm(t[o],e,n,r,i);else{let o=Yt(),s=be(),a=Zt(),u=os(t)?t:Tt(t.provide),c=f0(t),d=a.providerIndexes&1048575,f=a.directiveStart,m=a.providerIndexes>>20;if(os(t)||!t.multi){let y=new ji(c,i,st),w=Eg(u,e,i?d:d+m,f);w===-1?(Og(Zl(a,s),o,u),_g(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),s.push(y)):(n[w]=y,s[w]=y)}else{let y=Eg(u,e,d+m,f),w=Eg(u,e,d,d+m),_=y>=0&&n[y],T=w>=0&&n[w];if(i&&!T||!i&&!_){Og(Zl(a,s),o,u);let x=hj(i?dj:lj,n.length,i,r,c);!i&&T&&(n[w].providerFactory=x),_g(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(x),s.push(x)}else{let x=GC(n[i?w:y],c,!i&&r);_g(o,t,y>-1?y:w,x)}!i&&r&&T&&n[w].componentProviders++}}}function _g(t,e,n,r){let i=os(e),o=zO(e);if(i||o){let u=(o?Tt(e.useClass):e).prototype.ngOnDestroy;if(u){let c=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let d=c.indexOf(n);d===-1?c.push(n,[r,u]):c[d+1].push(r,u)}else c.push(n,u)}}}function GC(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Eg(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function lj(t,e,n,r){return lm(this.multi,[])}function dj(t,e,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=us(n,n[oe],this.providerFactory.index,r);o=a.slice(0,s),lm(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],lm(i,o);return o}function lm(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function hj(t,e,n,r,i){let o=new ji(t,n,st);return o.multi=[],o.index=e,o.componentProviders=0,GC(o,i,r&&!n),o}function JW(t,e=[]){return n=>{n.providersResolver=(r,i)=>cj(r,i?i(t):t,e)}}var fj=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=l0(!1,r.type),o=i.length>0?kd([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=B({token:e,providedIn:"environment",factory:()=>new e(R(Qt))});let t=e;return t})();function WC(t){Pd("NgStandalone"),t.getStandaloneInjector=e=>e.get(fj).getOrCreateStandaloneInjector(t)}function pj(t,e){let n=t[e];return n===gr?void 0:n}function gj(t,e,n,r,i,o){let s=e+n;return qi(t,s,i)?yV(t,s+1,o?r.call(o,i):r(i)):pj(t,s+1)}function XW(t,e){let n=Yt(),r,i=t+En;n.firstCreatePass?(r=mj(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=Oi(r.type,!0)),s,a=Vt(st);try{let u=Yl(!1),c=o();return Yl(u),sj(n,be(),i,c),c}finally{Vt(a)}}function mj(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function e7(t,e,n){let r=t+En,i=be(),o=cF(i,r);return yj(i,r)?gj(i,EF(),e,o.transform,n,o):o.transform(n)}function yj(t,e){return t[oe].data[e].pure}var Ol=null;function vj(t){Ol!==null&&(t.defaultEncapsulation!==Ol.defaultEncapsulation||t.preserveWhitespaces!==Ol.preserveWhitespaces)||(Ol=t)}var Ur=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},KC=new Ur("17.3.6"),Ld=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var oy=new U(""),tu=new U(""),Vd=(()=>{let e=class e{constructor(r,i,o){this._ngZone=r,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,sy||(wj(o),o.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{he.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,o){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),r()},i)),this._callbacks.push({doneCb:r,timeoutId:s,updateCb:o})}whenStable(r,i,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,o){return[]}};e.\u0275fac=function(i){return new(i||e)(R(he),R(jd),R(tu))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),jd=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return sy?.findTestabilityInTree(this,r,i)??null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function wj(t){sy=t}var sy;function nu(t){return!!t&&typeof t.then=="function"}function QC(t){return!!t&&typeof t.subscribe=="function"}var Bd=new U(""),YC=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=O(Bd,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(nu(s))r.push(s);else if(QC(s)){let a=new Promise((u,c)=>{s.subscribe({complete:u,error:c})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ay=new U("");function Ij(){MD(()=>{throw new q(600,!1)})}function _j(t){return t.isBoundToModule}function Ej(t,e,n){try{let r=n();return nu(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}function ZC(t,e){return Array.isArray(e)?e.reduce(ZC,t):j(j({},t),e)}var gs=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=O(K0),this.afterRenderEffectManager=O(ey),this.externalTestViews=new Set,this.beforeRender=new Le,this.afterTick=new Le,this.componentTypes=[],this.components=[],this.isStable=O(Od).hasPendingTasks.pipe(K(r=>!r)),this._injector=O(Qt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof id;if(!this._injector.get(YC).done){let y=!o&&s0(r),w=!1;throw new q(405,w)}let a;o?a=r:a=this._injector.get(Rd).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let u=_j(a)?void 0:this._injector.get(Br),c=i||a.selector,d=a.create(Un.NULL,[],c,u),f=d.location.nativeElement,m=d.injector.get(oy,null);return m?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),Bl(this.components,d),m?.unregisterApplication(f)}),this._loadComponent(d),d}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new q(101,!1);let i=ye(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(o){this.internalErrorHandler(o)}finally{this.afterTick.next(),this._runningTick=!1,ye(i)}}detectChangesInAttachedViews(r){let i=0,o=this.afterRenderEffectManager;for(;;){if(i===xC)throw new q(103,!1);if(r){let s=i===0;this.beforeRender.next(s);for(let{_lView:a,notifyErrorHandler:u}of this._views)Dj(a,s,u)}if(i++,o.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>dm(s))&&(o.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>dm(s))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Bl(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(ay,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Bl(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new q(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Bl(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Dj(t,e,n){!e&&!dm(t)||bj(t,n,e)}function dm(t){return Am(t)}function bj(t,e,n){let r;n?(r=0,t[J]|=1024):t[J]&64?r=0:r=1,MC(t,e,r)}var hm=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Ud=(()=>{let e=class e{compileModuleSync(r){return new ud(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=a0(r),s=oC(o.declarations).reduce((a,u)=>{let c=Vr(u);return c&&a.push(new cs(c)),a},[]);return new hm(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Cj=new U("");function Tj(t,e,n){let r=new ud(n);return Promise.resolve(r)}function Ob(t){for(let e=t.length-1;e>=0;e--)if(t[e]!==void 0)return t[e]}var Sj=(()=>{let e=class e{constructor(){this.zone=O(he),this.applicationRef=O(gs)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Aj(t){return[{provide:he,useFactory:t},{provide:is,multi:!0,useFactory:()=>{let e=O(Sj,{optional:!0});return()=>e.initialize()}},{provide:is,multi:!0,useFactory:()=>{let e=O(Rj);return()=>{e.initialize()}}},{provide:K0,useFactory:xj}]}function xj(){let t=O(he),e=O(Bn);return n=>t.runOutsideAngular(()=>e.handleError(n))}function Mj(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var Rj=(()=>{let e=class e{constructor(){this.subscription=new qe,this.initialized=!1,this.zone=O(he),this.pendingTasks=O(Od)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{he.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{he.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Nj(){return typeof $localize<"u"&&$localize.locale||hd}var $d=new U("",{providedIn:"root",factory:()=>O($d,ae.Optional|ae.SkipSelf)||Nj()}),JC=new U("",{providedIn:"root",factory:()=>tj});var XC=new U(""),eT=(()=>{let e=class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){let o=LL(i?.ngZone,Mj({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return o.run(()=>{let s=pV(r.moduleType,this.injector,Aj(()=>o)),a=s.injector.get(Bn,null);return o.runOutsideAngular(()=>{let u=o.onError.subscribe({next:c=>{a.handleError(c)}});s.onDestroy(()=>{Bl(this._modules,s),u.unsubscribe()})}),Ej(a,o,()=>{let u=s.injector.get(YC);return u.runInitializers(),u.donePromise.then(()=>{let c=s.injector.get($d,hd);return rj(c||hd),this._moduleDoBootstrap(s),s})})})}bootstrapModule(r,i=[]){let o=ZC({},i);return Tj(this.injector,o,r).then(s=>this.bootstrapModuleFactory(s,o))}_moduleDoBootstrap(r){let i=r.injector.get(gs);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(o=>i.bootstrap(o));else if(r.instance.ngDoBootstrap)r.instance.ngDoBootstrap(i);else throw new q(-403,!1);this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new q(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let r=this._injector.get(XC,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(i){return new(i||e)(R(Un))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),La=null,tT=new U("");function Pj(t){if(La&&!La.get(tT,!1))throw new q(400,!1);Ij(),La=t;let e=t.get(eT);return Fj(t),e}function uy(t,e,n=[]){let r=`Platform: ${e}`,i=new U(r);return(o=[])=>{let s=nT();if(!s||s.injector.get(tT,!1)){let a=[...n,...o,{provide:i,useValue:!0}];t?t(a):Pj(kj(a,r))}return Oj(i)}}function kj(t=[],e){return Un.create({name:e,providers:[{provide:yd,useValue:"platform"},{provide:XC,useValue:new Set([()=>La=null])},...t]})}function Oj(t){let e=nT();if(!e)throw new q(401,!1);return e}function nT(){return La?.get(eT)??null}function Fj(t){t.get(Vm,null)?.forEach(n=>n())}function cy(){return!1}var ru=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Lj;let t=e;return t})();function Lj(t){return Vj(Zt(),be(),(t&16)===16)}function Vj(t,e,n){if(Id(t)&&!n){let r=$r(t.index,e);return new Ui(r,r)}else if(t.type&47){let r=e[_n];return new Ui(r,e)}return null}var fm=class{constructor(){}supports(e){return OC(e)}create(e){return new pm(e)}},jj=(t,e)=>e,pm=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||jj}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<Fb(r,i,o)?n:r,a=Fb(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let c=a-i,d=u-i;if(c!=d){for(let m=0;m<c;m++){let y=m<o.length?o[m]:o[m]=0,w=y+m;d<=w&&w<c&&(o[m]=y+1)}let f=s.previousIndex;o[f]=d-c}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!OC(e))throw new q(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,gV(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new gm(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new fd),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new fd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},gm=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},mm=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},fd=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new mm,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Fb(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function Lb(){return new ly([new fm])}var ly=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let o=i.factories.slice();r=r.concat(o)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||Lb()),deps:[[e,new wm,new ds]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i!=null)return i;throw new q(901,!1)}};e.\u0275prov=B({token:e,providedIn:"root",factory:Lb});let t=e;return t})();var rT=uy(null,"core",[]),iT=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(i){return new(i||e)(R(gs))},e.\u0275mod=an({type:e}),e.\u0275inj=sn({});let t=e;return t})();function iu(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function oT(t){let e=Vr(t);if(!e)return null;let n=new cs(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var hT=null;function Gi(){return hT}function fT(t){hT??=t}var Hd=class{};var $t=new U(""),yy=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:()=>O(Bj),providedIn:"platform"});let t=e;return t})(),pT=new U(""),Bj=(()=>{let e=class e extends yy{constructor(){super(),this._doc=O($t),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Gi().getBaseHref(this._doc)}onPopState(r){let i=Gi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Gi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function vy(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function sT(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function mr(t){return t&&t[0]!=="?"?"?"+t:t}var vr=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:()=>O(wy),providedIn:"root"});let t=e;return t})(),gT=new U(""),wy=(()=>{let e=class e extends vr{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??O($t).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return vy(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+mr(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+mr(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+mr(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(R(yy),R(gT,8))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),mT=(()=>{let e=class e extends vr{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=vy(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+mr(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+mr(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(R(yy),R(gT,8))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),ms=(()=>{let e=class e{constructor(r){this._subject=new St,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=Hj(sT(aT(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+mr(i))}normalize(r){return e.stripTrailingSlash($j(this._basePath,aT(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+mr(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+mr(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=mr,e.joinWithSlash=vy,e.stripTrailingSlash=sT,e.\u0275fac=function(i){return new(i||e)(R(vr))},e.\u0275prov=B({token:e,factory:()=>Uj(),providedIn:"root"});let t=e;return t})();function Uj(){return new ms(R(vr))}function $j(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function aT(t){return t.replace(/\/index.html$/,"")}function Hj(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var yT={ADP:[void 0,void 0,0],AFN:[void 0,"\u060B",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058F",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20BC"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09F3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xA5","\xA5"],COP:[void 0,"$",2],CRC:[void 0,"\u20A1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010D",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xA3"],ESP:[void 0,"\u20A7",0],EUR:["\u20AC"],FJD:[void 0,"$"],FKP:[void 0,"\xA3"],GBP:["\xA3"],GEL:[void 0,"\u20BE"],GHS:[void 0,"GH\u20B5"],GIP:[void 0,"\xA3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20AA"],INR:["\u20B9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xA5",void 0,0],KHR:[void 0,"\u17DB"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20A9",0],KRW:["\u20A9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20B8"],LAK:[void 0,"\u20AD",0],LBP:[void 0,"L\xA3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20AE",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20A6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20B1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20B2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20BD"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xA3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xA3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xA3",0],THB:[void 0,"\u0E3F"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20BA"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20B4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20AB",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202FCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xA4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},vT=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(vT||{});var yr={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function ou(t,e){let n=Fd(t),r=n[zi.NumberSymbols][e];if(typeof r>"u"){if(e===yr.CurrencyDecimal)return n[zi.NumberSymbols][yr.Decimal];if(e===yr.CurrencyGroup)return n[zi.NumberSymbols][yr.Group]}return r}function qj(t,e){return Fd(t)[zi.NumberFormats][e]}function zj(t){return Fd(t)[zi.Currencies]}function Gj(t,e,n="en"){let r=zj(n)[t]||yT[t]||[],i=r[1];return e==="narrow"&&typeof i=="string"?i:r[0]||t}var Wj=2;function Kj(t){let e,n=yT[t];return n&&(e=n[2]),typeof e=="number"?e:Wj}var Qj=/^(\d+)?\.((\d+)(-(\d+))?)?$/,uT=22,qd=".",su="0",Yj=";",Zj=",",dy="#",cT="\xA4";function Jj(t,e,n,r,i,o,s=!1){let a="",u=!1;if(!isFinite(t))a=ou(n,yr.Infinity);else{let c=nB(t);s&&(c=tB(c));let d=e.minInt,f=e.minFrac,m=e.maxFrac;if(o){let V=o.match(Qj);if(V===null)throw new Error(`${o} is not a valid digit info`);let M=V[1],H=V[3],W=V[5];M!=null&&(d=hy(M)),H!=null&&(f=hy(H)),W!=null?m=hy(W):H!=null&&f>m&&(m=f)}rB(c,f,m);let y=c.digits,w=c.integerLen,_=c.exponent,T=[];for(u=y.every(V=>!V);w<d;w++)y.unshift(0);for(;w<0;w++)y.unshift(0);w>0?T=y.splice(w,y.length):(T=y,y=[0]);let x=[];for(y.length>=e.lgSize&&x.unshift(y.splice(-e.lgSize,y.length).join(""));y.length>e.gSize;)x.unshift(y.splice(-e.gSize,y.length).join(""));y.length&&x.unshift(y.join("")),a=x.join(ou(n,r)),T.length&&(a+=ou(n,i)+T.join("")),_&&(a+=ou(n,yr.Exponential)+"+"+_)}return t<0&&!u?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function Xj(t,e,n,r,i){let o=qj(e,vT.Currency),s=eB(o,ou(e,yr.MinusSign));return s.minFrac=Kj(r),s.maxFrac=s.minFrac,Jj(t,s,e,yr.CurrencyGroup,yr.CurrencyDecimal,i).replace(cT,n).replace(cT,"").trim()}function eB(t,e="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(Yj),i=r[0],o=r[1],s=i.indexOf(qd)!==-1?i.split(qd):[i.substring(0,i.lastIndexOf(su)+1),i.substring(i.lastIndexOf(su)+1)],a=s[0],u=s[1]||"";n.posPre=a.substring(0,a.indexOf(dy));for(let d=0;d<u.length;d++){let f=u.charAt(d);f===su?n.minFrac=n.maxFrac=d+1:f===dy?n.maxFrac=d+1:n.posSuf+=f}let c=a.split(Zj);if(n.gSize=c[1]?c[1].length:0,n.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,o){let d=i.length-n.posPre.length-n.posSuf.length,f=o.indexOf(dy);n.negPre=o.substring(0,f).replace(/'/g,""),n.negSuf=o.slice(f+d).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function tB(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function nB(t){let e=Math.abs(t)+"",n=0,r,i,o,s,a;for((i=e.indexOf(qd))>-1&&(e=e.replace(qd,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===su;o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===su;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>uT&&(r=r.splice(0,uT-1),n=i-1,i=1),{digits:r,exponent:n,integerLen:i}}function rB(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let r=t.digits,i=r.length-t.integerLen,o=Math.min(Math.max(e,i),n),s=o+t.integerLen,a=r[s];if(s>0){r.splice(Math.max(t.integerLen,s));for(let f=s;f<r.length;f++)r[f]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let f=1;f<s;f++)r[f]=0}if(a>=5)if(s-1<0){for(let f=0;f>s;f--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let u=o!==0,c=e+t.integerLen,d=r.reduceRight(function(f,m,y,w){return m=m+f,w[y]=m<10?m:m-10,u&&(w[y]===0&&y>=c?w.pop():u=!1),m>=10?1:0},0);d&&(r.unshift(d),t.integerLen++)}function hy(t){let e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}function wT(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var fy=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},E7=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,o){this._viewContainer=r,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((o,s,a)=>{if(o.previousIndex==null)i.createEmbeddedView(this._template,new fy(o.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(s===null?void 0:s);else if(s!==null){let u=i.get(s);i.move(u,a),lT(u,o)}});for(let o=0,s=i.length;o<s;o++){let u=i.get(o).context;u.index=o,u.count=s,u.ngForOf=this._ngForOf}r.forEachIdentityChange(o=>{let s=i.get(o.currentIndex);lT(s,o)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(st(ps),st(Md),st(ly))},e.\u0275dir=hs({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function lT(t,e){t.context.$implicit=e.item}var D7=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new py,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){dT("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){dT("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(st(ps),st(Md))},e.\u0275dir=hs({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),py=class{constructor(){this.$implicit=null,this.ngIf=null}};function dT(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${At(e)}'.`)}function iB(t,e){return new q(2100,!1)}var b7=(()=>{let e=class e{constructor(r,i="USD"){this._locale=r,this._defaultCurrencyCode=i}transform(r,i=this._defaultCurrencyCode,o="symbol",s,a){if(!oB(r))return null;a||=this._locale,typeof o=="boolean"&&(o=o?"symbol":"code");let u=i||this._defaultCurrencyCode;o!=="code"&&(o==="symbol"||o==="symbol-narrow"?u=Gj(u,o==="symbol"?"wide":"narrow",a):u=o);try{let c=sB(r);return Xj(c,a,u,i,s)}catch(c){throw iB(e,c.message)}}};e.\u0275fac=function(i){return new(i||e)(st($d,16),st(JC,16))},e.\u0275pipe=r0({name:"currency",type:e,pure:!0,standalone:!0});let t=e;return t})();function oB(t){return!(t==null||t===""||t!==t)}function sB(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new Error(`${t} is not a number`);return t}var IT=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=an({type:e}),e.\u0275inj=sn({});let t=e;return t})(),Iy="browser",aB="server";function uB(t){return t===Iy}function Wi(t){return t===aB}var _T=(()=>{let e=class e{};e.\u0275prov=B({token:e,providedIn:"root",factory:()=>uB(O(Ut))?new gy(O($t),window):new my});let t=e;return t})(),gy=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=cB(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function cB(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var my=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},zd=class{};var Dy=class extends Hd{constructor(){super(...arguments),this.supportsDOMEvents=!0}},by=class t extends Dy{static makeCurrent(){fT(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=hB();return n==null?null:fB(n)}resetBaseElement(){au=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return wT(document.cookie,e)}},au=null;function hB(){return au=au||document.querySelector("base"),au?au.getAttribute("href"):null}function fB(t){return new URL(t,document.baseURI).pathname}var Cy=class{addToWindow(e){nt.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new q(5103,!1);return o},nt.getAllAngularTestabilities=()=>e.getAllTestabilities(),nt.getAllAngularRootElements=()=>e.getAllRootElements();let n=r=>{let i=nt.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};nt.frameworkStabilizers||(nt.frameworkStabilizers=[]),nt.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,r){if(n==null)return null;let i=e.getTestability(n);return i??(r?Gi().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},pB=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),Ty=new U(""),CT=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new q(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(R(Ty),R(he))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),Gd=class{constructor(e){this._doc=e}},_y="ng-app-id",TT=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Wi(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${_y}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(_y),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(_y,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(R($t),R(Dd),R(jm,8),R(Ut))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),Ey={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ay=/%COMP%/g,ST="%COMP%",gB=`_nghost-${ST}`,mB=`_ngcontent-${ST}`,yB=!0,vB=new U("",{providedIn:"root",factory:()=>yB});function wB(t){return mB.replace(Ay,t)}function IB(t){return gB.replace(Ay,t)}function AT(t,e){return e.map(n=>n.replace(Ay,t))}var ET=(()=>{let e=class e{constructor(r,i,o,s,a,u,c,d=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=u,this.ngZone=c,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=Wi(u),this.defaultRenderer=new uu(r,a,c,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Vn.ShadowDom&&(i=Pe(j({},i),{encapsulation:Vn.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof Wd?o.applyToHost(r):o instanceof cu&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,u=this.ngZone,c=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(i.encapsulation){case Vn.Emulated:s=new Wd(c,d,i,this.appId,f,a,u,m);break;case Vn.ShadowDom:return new Sy(c,d,r,i,a,u,this.nonce,m);default:s=new cu(c,d,i,f,a,u,m);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(R(CT),R(TT),R(Dd),R(vB),R($t),R(Ut),R(he),R(jm))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),uu=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Ey[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(DT(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(DT(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new q(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=Ey[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Ey[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(dr.DashCase|dr.Important)?e.style.setProperty(n,r,i&dr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&dr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Gi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function DT(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Sy=class extends uu{constructor(e,n,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=AT(i.id,i.styles);for(let d of c){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},cu=class extends uu{constructor(e,n,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?AT(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Wd=class extends cu{constructor(e,n,r,i,o,s,a,u){let c=i+"-"+r.id;super(e,n,r,o,s,a,u,c),this.contentAttr=wB(c),this.hostAttr=IB(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},_B=(()=>{let e=class e extends Gd{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(R($t))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),bT=["alt","control","meta","shift"],EB={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},DB={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},bB=(()=>{let e=class e extends Gd{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Gi().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),a="code."),bT.forEach(d=>{let f=i.indexOf(d);f>-1&&(i.splice(f,1),a+=d+".")}),a+=s,i.length!=0||s.length===0)return null;let c={};return c.domEventName=o,c.fullKey=a,c}static matchEventFullKeyCode(r,i){let o=EB[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),bT.forEach(a=>{if(a!==o){let u=DB[a];u(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(R($t))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})();function CB(){by.makeCurrent()}function TB(){return new Bn}function SB(){return eC(document),document}var AB=[{provide:Ut,useValue:Iy},{provide:Vm,useValue:CB,multi:!0},{provide:$t,useFactory:SB,deps:[]}],q7=uy(rT,"browser",AB),xB=new U(""),MB=[{provide:tu,useClass:Cy,deps:[]},{provide:oy,useClass:Vd,deps:[he,jd,tu]},{provide:Vd,useClass:Vd,deps:[he,jd,tu]}],RB=[{provide:yd,useValue:"root"},{provide:Bn,useFactory:TB,deps:[]},{provide:Ty,useClass:_B,multi:!0,deps:[$t,he,Ut]},{provide:Ty,useClass:bB,multi:!0,deps:[$t]},ET,TT,CT,{provide:Wa,useExisting:ET},{provide:zd,useClass:pB,deps:[]},[]],z7=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:Dd,useValue:r.appId}]}}};e.\u0275fac=function(i){return new(i||e)(R(xB,12))},e.\u0275mod=an({type:e}),e.\u0275inj=sn({providers:[...RB,...MB],imports:[IT,iT]});let t=e;return t})();var xT=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(R($t))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var re="primary",bu=Symbol("RouteTitle"),Py=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function _s(t){return new Py(t)}function PB(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function kB(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Hn(t[n],e[n]))return!1;return!0}function Hn(t,e){let n=t?ky(t):void 0,r=e?ky(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!VT(t[i],e[i]))return!1;return!0}function ky(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function VT(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function jT(t){return t.length>0?t[t.length-1]:null}function Kr(t){return Xp(t)?t:nu(t)?ve(Promise.resolve(t)):G(t)}var OB={exact:UT,subset:$T},BT={exact:FB,subset:LB,ignored:()=>!0};function MT(t,e,n){return OB[n.paths](t.root,e.root,n.matrixParams)&&BT[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function FB(t,e){return Hn(t,e)}function UT(t,e,n){if(!Qi(t.segments,e.segments)||!Yd(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!UT(t.children[r],e.children[r],n))return!1;return!0}function LB(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>VT(t[n],e[n]))}function $T(t,e,n){return HT(t,e,e.segments,n)}function HT(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Qi(i,n)||e.hasChildren()||!Yd(i,n,r))}else if(t.segments.length===n.length){if(!Qi(t.segments,n)||!Yd(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!$T(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Qi(t.segments,i)||!Yd(t.segments,i,r)||!t.children[re]?!1:HT(t.children[re],e,o,r)}}function Yd(t,e,n){return e.every((r,i)=>BT[n](t[i].parameters,r.parameters))}var qr=class{constructor(e=new we([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=_s(this.queryParams),this._queryParamMap}toString(){return BB.serialize(this)}},we=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Zd(this)}},Ki=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=_s(this.parameters),this._parameterMap}toString(){return zT(this)}};function VB(t,e){return Qi(t,e)&&t.every((n,r)=>Hn(n.parameters,e[r].parameters))}function Qi(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function jB(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===re&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==re&&(n=n.concat(e(i,r)))}),n}var Cu=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:()=>new mu,providedIn:"root"});let t=e;return t})(),mu=class{parse(e){let n=new Fy(e);return new qr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${lu(e.root,!0)}`,r=HB(e.queryParams),i=typeof e.fragment=="string"?`#${UB(e.fragment)}`:"";return`${n}${r}${i}`}},BB=new mu;function Zd(t){return t.segments.map(e=>zT(e)).join("/")}function lu(t,e){if(!t.hasChildren())return Zd(t);if(e){let n=t.children[re]?lu(t.children[re],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==re&&r.push(`${i}:${lu(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=jB(t,(r,i)=>i===re?[lu(t.children[re],!1)]:[`${i}:${lu(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[re]!=null?`${Zd(t)}/${n[0]}`:`${Zd(t)}/(${n.join("//")})`}}function qT(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Kd(t){return qT(t).replace(/%3B/gi,";")}function UB(t){return encodeURI(t)}function Oy(t){return qT(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Jd(t){return decodeURIComponent(t)}function RT(t){return Jd(t.replace(/\+/g,"%20"))}function zT(t){return`${Oy(t.path)}${$B(t.parameters)}`}function $B(t){return Object.entries(t).map(([e,n])=>`;${Oy(e)}=${Oy(n)}`).join("")}function HB(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Kd(n)}=${Kd(i)}`).join("&"):`${Kd(n)}=${Kd(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var qB=/^[^\/()?;#]+/;function xy(t){let e=t.match(qB);return e?e[0]:""}var zB=/^[^\/()?;=#]+/;function GB(t){let e=t.match(zB);return e?e[0]:""}var WB=/^[^=?&#]+/;function KB(t){let e=t.match(WB);return e?e[0]:""}var QB=/^[^&#]+/;function YB(t){let e=t.match(QB);return e?e[0]:""}var Fy=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new we([],{}):new we([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[re]=new we(e,n)),r}parseSegment(){let e=xy(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new q(4009,!1);return this.capture(e),new Ki(Jd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=GB(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=xy(this.remaining);i&&(r=i,this.capture(r))}e[Jd(n)]=Jd(r)}parseQueryParam(e){let n=KB(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=YB(this.remaining);s&&(r=s,this.capture(r))}let i=RT(n),o=RT(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=xy(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new q(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=re);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[re]:new we([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new q(4011,!1)}};function GT(t){return t.segments.length>0?new we([],{[re]:t}):t}function WT(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=WT(i);if(r===re&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new we(t.segments,e);return ZB(n)}function ZB(t){if(t.numberOfChildren===1&&t.children[re]){let e=t.children[re];return new we(t.segments.concat(e.segments),e.children)}return t}function Es(t){return t instanceof qr}function JB(t,e,n=null,r=null){let i=KT(t);return QT(i,e,n,r)}function KT(t){let e;function n(o){let s={};for(let u of o.children){let c=n(u);s[u.outlet]=c}let a=new we(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=GT(r);return e??i}function QT(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return My(i,i,i,n,r);let o=XB(e);if(o.toRoot())return My(i,i,new we([],{}),n,r);let s=eU(o,i,t),a=s.processChildren?fu(s.segmentGroup,s.index,o.commands):ZT(s.segmentGroup,s.index,o.commands);return My(i,s.segmentGroup,a,n,r)}function Xd(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function yu(t){return typeof t=="object"&&t!=null&&t.outlets}function My(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,c])=>{o[u]=Array.isArray(c)?c.map(d=>`${d}`):`${c}`});let s;t===e?s=n:s=YT(t,e,n);let a=GT(WT(s));return new qr(a,o,i)}function YT(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=YT(o,e,n)}),new we(t.segments,r)}var eh=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Xd(r[0]))throw new q(4003,!1);let i=r.find(yu);if(i&&i!==jT(r))throw new q(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function XB(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new eh(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,c])=>{a[u]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new eh(n,e,r)}var ws=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function eU(t,e,n){if(t.isAbsolute)return new ws(e,!0,0);if(!n)return new ws(e,!1,NaN);if(n.parent===null)return new ws(n,!0,0);let r=Xd(t.commands[0])?0:1,i=n.segments.length-1+r;return tU(n,i,t.numberOfDoubleDots)}function tU(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new q(4005,!1);i=r.segments.length}return new ws(r,!1,i-o)}function nU(t){return yu(t[0])?t[0].outlets:{[re]:t}}function ZT(t,e,n){if(t??=new we([],{}),t.segments.length===0&&t.hasChildren())return fu(t,e,n);let r=rU(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new we(t.segments.slice(0,r.pathIndex),{});return o.children[re]=new we(t.segments.slice(r.pathIndex),t.children),fu(o,0,i)}else return r.match&&i.length===0?new we(t.segments,{}):r.match&&!t.hasChildren()?Ly(t,e,n):r.match?fu(t,0,i):Ly(t,e,n)}function fu(t,e,n){if(n.length===0)return new we(t.segments,{});{let r=nU(n),i={};if(Object.keys(r).some(o=>o!==re)&&t.children[re]&&t.numberOfChildren===1&&t.children[re].segments.length===0){let o=fu(t.children[re],e,n);return new we(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=ZT(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new we(t.segments,i)}}function rU(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(yu(a))break;let u=`${a}`,c=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&c&&typeof c=="object"&&c.outlets===void 0){if(!PT(u,c,s))return o;r+=2}else{if(!PT(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Ly(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(yu(o)){let u=iU(o.outlets);return new we(r,u)}if(i===0&&Xd(n[0])){let u=t.segments[e];r.push(new Ki(u.path,NT(n[0]))),i++;continue}let s=yu(o)?o.outlets[re]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Xd(a)?(r.push(new Ki(s,NT(a))),i+=2):(r.push(new Ki(s,{})),i++)}return new we(r,{})}function iU(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Ly(new we([],{}),0,r))}),e}function NT(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function PT(t,e,n){return t==n.path&&Hn(e,n.parameters)}var pu="imperative",at=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(at||{}),cn=class{constructor(e,n){this.id=e,this.url=n}},Ds=class extends cn{constructor(e,n,r="imperative",i=null){super(e,n),this.type=at.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},qn=class extends cn{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=at.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Xt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Xt||{}),th=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(th||{}),zr=class extends cn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=at.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Gr=class extends cn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=at.NavigationSkipped}},vu=class extends cn{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=at.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},nh=class extends cn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=at.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vy=class extends cn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=at.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jy=class extends cn{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=at.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},By=class extends cn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=at.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Uy=class extends cn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=at.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$y=class{constructor(e){this.route=e,this.type=at.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Hy=class{constructor(e){this.route=e,this.type=at.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},qy=class{constructor(e){this.snapshot=e,this.type=at.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zy=class{constructor(e){this.snapshot=e,this.type=at.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Gy=class{constructor(e){this.snapshot=e,this.type=at.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Wy=class{constructor(e){this.snapshot=e,this.type=at.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},rh=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=at.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},wu=class{},Iu=class{constructor(e){this.url=e}};var Ky=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Tu,this.attachRef=null}},Tu=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Ky,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ih=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Qy(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Qy(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Yy(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Yy(e,this._root).map(n=>n.value)}};function Qy(t,e){if(t===e.value)return e;for(let n of e.children){let r=Qy(t,n);if(r)return r}return null}function Yy(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Yy(t,n);if(r.length)return r.unshift(e),r}return[]}var Jt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function vs(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var oh=class extends ih{constructor(e,n){super(e),this.snapshot=n,sv(this,e)}toString(){return this.snapshot.toString()}};function JT(t){let e=oU(t),n=new et([new Ki("",{})]),r=new et({}),i=new et({}),o=new et({}),s=new et(""),a=new Yi(n,r,o,s,i,re,t,e.root);return a.snapshot=e.root,new oh(new Jt(a,[]),e)}function oU(t){let e={},n={},r={},i="",o=new _u([],e,r,i,n,re,t,null,{});return new sh("",new Jt(o,[]))}var Yi=class{constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(K(c=>c[bu]))??G(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(K(e=>_s(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(K(e=>_s(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ov(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:j(j({},e.params),t.params),data:j(j({},e.data),t.data),resolve:j(j(j(j({},t.data),e.data),i?.data),t._resolvedData)}:r={params:j({},t.params),data:j({},t.data),resolve:j(j({},t.data),t._resolvedData??{})},i&&eS(i)&&(r.resolve[bu]=i.title),r}var _u=class{get title(){return this.data?.[bu]}constructor(e,n,r,i,o,s,a,u,c){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=_s(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=_s(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},sh=class extends ih{constructor(e,n){super(n),this.url=e,sv(this,n)}toString(){return XT(this._root)}};function sv(t,e){e.value._routerState=t,e.children.forEach(n=>sv(t,n))}function XT(t){let e=t.children.length>0?` { ${t.children.map(XT).join(", ")} } `:"";return`${t.value}${e}`}function Ry(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Hn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Hn(e.params,n.params)||t.paramsSubject.next(n.params),kB(e.url,n.url)||t.urlSubject.next(n.url),Hn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Zy(t,e){let n=Hn(t.params,e.params)&&VB(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Zy(t.parent,e.parent))}function eS(t){return typeof t.title=="string"||t.title===null}var sU=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=re,this.activateEvents=new St,this.deactivateEvents=new St,this.attachEvents=new St,this.detachEvents=new St,this.parentContexts=O(Tu),this.location=O(ps),this.changeDetector=O(ru),this.environmentInjector=O(Qt),this.inputBinder=O(dh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new q(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new q(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new q(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new q(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,c=new Jy(r,u,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:c,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=hs({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ja]});let t=e;return t})(),Jy=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Yi?this.route:e===Tu?this.childContexts:this.parent.get(e,n)}},dh=new U(""),kT=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,o=Pa([i.queryParams,i.params,i.data]).pipe(Ve(([s,a,u],c)=>(u=j(j(j({},s),a),u),c===0?G(u):Promise.resolve(u)))).subscribe(s=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=oT(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:u}of a.inputs)r.activatedComponentRef.setInput(u,s[u])});this.outletDataSubscriptions.set(r,o)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})();function aU(t,e,n){let r=Eu(t,e._root,n?n._root:void 0);return new oh(r,e)}function Eu(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=uU(t,e,n);return new Jt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Eu(t,a)),s}}let r=cU(e.value),i=e.children.map(o=>Eu(t,o));return new Jt(r,i)}}function uU(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Eu(t,r,i);return Eu(t,r)})}function cU(t){return new Yi(new et(t.url),new et(t.params),new et(t.queryParams),new et(t.fragment),new et(t.data),t.outlet,t.component,t)}var tS="ngNavigationCancelingError";function nS(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Es(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=rS(!1,Xt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function rS(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[tS]=!0,n.cancellationCode=e,n}function lU(t){return iS(t)&&Es(t.url)}function iS(t){return!!t&&t[tS]}var dU=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=n0({type:e,selectors:[["ng-component"]],standalone:!0,features:[WC],decls:1,vars:0,template:function(i,o){i&1&&ry(0,"router-outlet")},dependencies:[sU],encapsulation:2});let t=e;return t})();function hU(t,e){return t.providers&&!t._injector&&(t._injector=kd(t.providers,e,`Route: ${t.path}`)),t._injector??e}function av(t){let e=t.children&&t.children.map(av),n=e?Pe(j({},t),{children:e}):j({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==re&&(n.component=dU),n}function zn(t){return t.outlet||re}function fU(t,e){let n=t.filter(r=>zn(r)===e);return n.push(...t.filter(r=>zn(r)!==e)),n}function Su(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var pU=(t,e,n,r)=>K(i=>(new Xy(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Xy=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Ry(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=vs(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=vs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=vs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=vs(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Wy(o.value.snapshot))}),e.children.length&&this.forwardEvent(new zy(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(Ry(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Ry(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=Su(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},ah=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Is=class{constructor(e,n){this.component=e,this.route=n}};function gU(t,e,n){let r=t._root,i=e?e._root:null;return du(r,i,n,[r.value])}function mU(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Cs(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!$b(t)?t:e.get(t):r}function du(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=vs(e);return t.children.forEach(s=>{yU(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>gu(a,n.getContext(s),i)),i}function yU(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=vU(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new ah(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?du(t,e,a?a.children:null,r,i):du(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Is(a.outlet.component,s))}else s&&gu(e,a,i),i.canActivateChecks.push(new ah(r)),o.component?du(t,null,a?a.children:null,r,i):du(t,null,n,r,i);return i}function vU(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Qi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Qi(t.url,e.url)||!Hn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Zy(t,e)||!Hn(t.queryParams,e.queryParams);case"paramsChange":default:return!Zy(t,e)}}function gu(t,e,n){let r=vs(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?gu(s,e.children.getContext(o),n):gu(s,null,n):gu(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Is(e.outlet.component,i)):n.canDeactivateChecks.push(new Is(null,i)):n.canDeactivateChecks.push(new Is(null,i))}function Au(t){return typeof t=="function"}function wU(t){return typeof t=="boolean"}function IU(t){return t&&Au(t.canLoad)}function _U(t){return t&&Au(t.canActivate)}function EU(t){return t&&Au(t.canActivateChild)}function DU(t){return t&&Au(t.canDeactivate)}function bU(t){return t&&Au(t.canMatch)}function oS(t){return t instanceof cr||t?.name==="EmptyError"}var Qd=Symbol("INITIAL_VALUE");function bs(){return Ve(t=>Pa(t.map(e=>e.pipe(lr(1),Ri(Qd)))).pipe(K(e=>{for(let n of e)if(n!==!0){if(n===Qd)return Qd;if(n===!1||n instanceof qr)return n}return!0}),ft(e=>e!==Qd),lr(1)))}function CU(t,e){return Ke(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?G(Pe(j({},n),{guardsResult:!0})):TU(s,r,i,t).pipe(Ke(a=>a&&wU(a)?SU(r,o,t,e):G(a)),K(a=>Pe(j({},n),{guardsResult:a})))})}function TU(t,e,n,r){return ve(t).pipe(Ke(i=>NU(i.component,i.route,n,e,r)),on(i=>i!==!0,!0))}function SU(t,e,n,r){return ve(e).pipe(xi(i=>Qo(xU(i.route.parent,r),AU(i.route,r),RU(t,i.path,n),MU(t,i.route,n))),on(i=>i!==!0,!0))}function AU(t,e){return t!==null&&e&&e(new Gy(t)),G(!0)}function xU(t,e){return t!==null&&e&&e(new qy(t)),G(!0)}function MU(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return G(!0);let i=r.map(o=>Sl(()=>{let s=Su(e)??n,a=Cs(o,s),u=_U(a)?a.canActivate(e,t):hr(s,()=>a(e,t));return Kr(u).pipe(on())}));return G(i).pipe(bs())}function RU(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>mU(s)).filter(s=>s!==null).map(s=>Sl(()=>{let a=s.guards.map(u=>{let c=Su(s.node)??n,d=Cs(u,c),f=EU(d)?d.canActivateChild(r,t):hr(c,()=>d(r,t));return Kr(f).pipe(on())});return G(a).pipe(bs())}));return G(o).pipe(bs())}function NU(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return G(!0);let s=o.map(a=>{let u=Su(e)??i,c=Cs(a,u),d=DU(c)?c.canDeactivate(t,e,n,r):hr(u,()=>c(t,e,n,r));return Kr(d).pipe(on())});return G(s).pipe(bs())}function PU(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return G(!0);let o=i.map(s=>{let a=Cs(s,t),u=IU(a)?a.canLoad(e,n):hr(t,()=>a(e,n));return Kr(u)});return G(o).pipe(bs(),sS(r))}function sS(t){return Wp(tt(e=>{if(Es(e))throw nS(t,e)}),K(e=>e===!0))}function kU(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return G(!0);let o=i.map(s=>{let a=Cs(s,t),u=bU(a)?a.canMatch(e,n):hr(t,()=>a(e,n));return Kr(u)});return G(o).pipe(bs(),sS(r))}var Du=class{constructor(e){this.segmentGroup=e||null}},uh=class extends Error{constructor(e){super(),this.urlTree=e}};function ys(t){return Ko(new Du(t))}function OU(t){return Ko(new q(4e3,!1))}function FU(t){return Ko(rS(!1,Xt.GuardRejected))}var ev=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return G(r);if(i.numberOfChildren>1||!i.children[re])return OU(e.redirectTo);i=i.children[re]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new uh(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new qr(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new we(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new q(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},tv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function LU(t,e,n,r,i){let o=uv(t,e,n);return o.matched?(r=hU(e,r),kU(r,e,n,i).pipe(K(s=>s===!0?o:j({},tv)))):G(o)}function uv(t,e,n){if(e.path==="**")return VU(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?j({},tv):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||PB)(n,t,e);if(!i)return j({},tv);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?j(j({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function VU(t){return{matched:!0,parameters:t.length>0?jT(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function OT(t,e,n,r){return n.length>0&&UU(t,n,r)?{segmentGroup:new we(e,BU(r,new we(n,t.children))),slicedSegments:[]}:n.length===0&&$U(t,n,r)?{segmentGroup:new we(t.segments,jU(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new we(t.segments,t.children),slicedSegments:n}}function jU(t,e,n,r){let i={};for(let o of n)if(hh(t,e,o)&&!r[zn(o)]){let s=new we([],{});i[zn(o)]=s}return j(j({},r),i)}function BU(t,e){let n={};n[re]=e;for(let r of t)if(r.path===""&&zn(r)!==re){let i=new we([],{});n[zn(r)]=i}return n}function UU(t,e,n){return n.some(r=>hh(t,e,r)&&zn(r)!==re)}function $U(t,e,n){return n.some(r=>hh(t,e,r))}function hh(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function HU(t,e,n,r){return zn(t)!==r&&(r===re||!hh(e,n,t))?!1:uv(e,t,n).matched}function qU(t,e,n){return e.length===0&&!t.children[n]}var nv=class{};function zU(t,e,n,r,i,o,s="emptyOnly"){return new rv(t,e,n,r,i,s,o).recognize()}var GU=31,rv=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new ev(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new q(4002,`'${e.segmentGroup}'`)}recognize(){let e=OT(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(K(n=>{let r=new _u([],Object.freeze({}),Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,{},re,this.rootComponentType,null,{}),i=new Jt(r,n),o=new sh("",i),s=JB(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,re).pipe(kr(r=>{if(r instanceof uh)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Du?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=ov(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(K(o=>o instanceof Jt?[o]:[]))}processChildren(e,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return ve(i).pipe(xi(o=>{let s=r.children[o],a=fU(n,o);return this.processSegmentGroup(e,a,s,o)}),Mi((o,s)=>(o.push(...s),o)),Or(null),rg(),Ke(o=>{if(o===null)return ys(r);let s=aS(o);return WU(s),G(s)}))}processSegment(e,n,r,i,o,s){return ve(n).pipe(xi(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,o,s).pipe(kr(u=>{if(u instanceof Du)return G(null);throw u}))),on(a=>!!a),kr(a=>{if(oS(a))return qU(r,i,o)?G(new nv):ys(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,o,s,a){return HU(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s):ys(i):ys(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){let{matched:a,consumedSegments:u,positionalParamSegments:c,remainingSegments:d}=uv(n,i,o);if(!a)return ys(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>GU&&(this.allowRedirects=!1));let f=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,c);return this.applyRedirects.lineralizeSegments(i,f).pipe(Ke(m=>this.processSegment(e,r,n,m.concat(d),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o){let s=LU(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),s.pipe(Ve(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ve(({routes:u})=>{let c=r._loadedInjector??e,{consumedSegments:d,remainingSegments:f,parameters:m}=a,y=new _u(d,m,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,QU(r),zn(r),r.component??r._loadedComponent??null,r,YU(r)),{segmentGroup:w,slicedSegments:_}=OT(n,d,f,u);if(_.length===0&&w.hasChildren())return this.processChildren(c,u,w).pipe(K(x=>x===null?null:new Jt(y,x)));if(u.length===0&&_.length===0)return G(new Jt(y,[]));let T=zn(r)===o;return this.processSegment(c,u,w,_,T?re:o,!0).pipe(K(x=>new Jt(y,x instanceof Jt?[x]:[])))}))):ys(n)))}getChildConfig(e,n,r){return n.children?G({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?G({routes:n._loadedRoutes,injector:n._loadedInjector}):PU(e,n,r,this.urlSerializer).pipe(Ke(i=>i?this.configLoader.loadChildren(e,n).pipe(tt(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):FU(n))):G({routes:[],injector:e})}};function WU(t){t.sort((e,n)=>e.value.outlet===re?-1:n.value.outlet===re?1:e.value.outlet.localeCompare(n.value.outlet))}function KU(t){let e=t.value.routeConfig;return e&&e.path===""}function aS(t){let e=[],n=new Set;for(let r of t){if(!KU(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=aS(r.children);e.push(new Jt(r.value,i))}return e.filter(r=>!n.has(r))}function QU(t){return t.data||{}}function YU(t){return t.resolve||{}}function ZU(t,e,n,r,i,o){return Ke(s=>zU(t,e,n,r,s.extractedUrl,i,o).pipe(K(({state:a,tree:u})=>Pe(j({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function JU(t,e){return Ke(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return G(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let c of uS(u))s.add(c);let a=0;return ve(s).pipe(xi(u=>o.has(u)?XU(u,r,t,e):(u.data=ov(u,u.parent,t).resolve,G(void 0))),tt(()=>a++),Yo(1),Ke(u=>a===s.size?G(n):bt))})}function uS(t){let e=t.children.map(n=>uS(n)).flat();return[t,...e]}function XU(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!eS(i)&&(o[bu]=i.title),e$(o,t,e,r).pipe(K(s=>(t._resolvedData=s,t.data=ov(t,t.parent,n).resolve,null)))}function e$(t,e,n,r){let i=ky(t);if(i.length===0)return G({});let o={};return ve(i).pipe(Ke(s=>t$(t[s],e,n,r).pipe(on(),tt(a=>{o[s]=a}))),Yo(1),tg(o),kr(s=>oS(s)?bt:Ko(s)))}function t$(t,e,n,r){let i=Su(e)??r,o=Cs(t,i),s=o.resolve?o.resolve(e,n):hr(i,()=>o(e,n));return Kr(s)}function Ny(t){return Ve(e=>{let n=t(e);return n?ve(n).pipe(K(()=>e)):G(e)})}var cS=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===re);return i}getResolvedTitleForRoute(r){return r.data[bu]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:()=>O(n$),providedIn:"root"});let t=e;return t})(),n$=(()=>{let e=class e extends cS{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(R(xT))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),xu=new U("",{providedIn:"root",factory:()=>({})}),ch=new U(""),cv=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=O(Ud)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return G(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Kr(r.loadComponent()).pipe(K(lS),tt(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),ka(()=>{this.componentLoaders.delete(r)})),o=new Ho(i,()=>new Le).pipe($o());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return G({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=r$(i,this.compiler,r,this.onLoadEndListener).pipe(ka(()=>{this.childrenLoaders.delete(i)})),a=new Ho(s,()=>new Le).pipe($o());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function r$(t,e,n,r){return Kr(t.loadChildren()).pipe(K(lS),Ke(i=>i instanceof Ka||Array.isArray(i)?G(i):ve(e.compileModuleAsync(i))),K(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(ch,[],{optional:!0,self:!0}).flat()),{routes:s.map(av),injector:o}}))}function i$(t){return t&&typeof t=="object"&&"default"in t}function lS(t){return i$(t)?t.default:t}var lv=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:()=>O(o$),providedIn:"root"});let t=e;return t})(),o$=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),dS=new U(""),hS=new U("");function s$(t,e,n){let r=t.get(hS),i=t.get($t);return t.get(he).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let o,s=new Promise(c=>{o=c}),a=i.startViewTransition(()=>(o(),a$(t))),{onViewTransitionCreated:u}=r;return u&&hr(t,()=>u({transition:a,from:e,to:n})),s})}function a$(t){return new Promise(e=>{Xm(e,{injector:t})})}var dv=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Le,this.transitionAbortSubject=new Le,this.configLoader=O(cv),this.environmentInjector=O(Qt),this.urlSerializer=O(Cu),this.rootContexts=O(Tu),this.location=O(ms),this.inputBindingEnabled=O(dh,{optional:!0})!==null,this.titleStrategy=O(cS),this.options=O(xu,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=O(lv),this.createViewTransition=O(dS,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>G(void 0),this.rootComponentType=null;let r=o=>this.events.next(new $y(o)),i=o=>this.events.next(new Hy(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(Pe(j(j({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new et({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:pu,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ft(s=>s.id!==0),K(s=>Pe(j({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Ve(s=>{let a=!1,u=!1;return G(s).pipe(Ve(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Xt.SupersededByNewNavigation),bt;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?Pe(j({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=c.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!d&&f!=="reload"){let m="";return this.events.next(new Gr(c.id,this.urlSerializer.serialize(c.rawUrl),m,th.IgnoredSameUrlNavigation)),c.resolve(null),bt}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return G(c).pipe(Ve(m=>{let y=this.transitions?.getValue();return this.events.next(new Ds(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),y!==this.transitions?.getValue()?bt:Promise.resolve(m)}),ZU(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),tt(m=>{s.targetSnapshot=m.targetSnapshot,s.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation=Pe(j({},this.currentNavigation),{finalUrl:m.urlAfterRedirects});let y=new nh(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(y)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:m,extractedUrl:y,source:w,restoredState:_,extras:T}=c,x=new Ds(m,this.urlSerializer.serialize(y),w,_);this.events.next(x);let V=JT(this.rootComponentType).snapshot;return this.currentTransition=s=Pe(j({},c),{targetSnapshot:V,urlAfterRedirects:y,extras:Pe(j({},T),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=y,G(s)}else{let m="";return this.events.next(new Gr(c.id,this.urlSerializer.serialize(c.extractedUrl),m,th.IgnoredByUrlHandlingStrategy)),c.resolve(null),bt}}),tt(c=>{let d=new Vy(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}),K(c=>(this.currentTransition=s=Pe(j({},c),{guards:gU(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),CU(this.environmentInjector,c=>this.events.next(c)),tt(c=>{if(s.guardsResult=c.guardsResult,Es(c.guardsResult))throw nS(this.urlSerializer,c.guardsResult);let d=new jy(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(d)}),ft(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Xt.GuardRejected),!1)),Ny(c=>{if(c.guards.canActivateChecks.length)return G(c).pipe(tt(d=>{let f=new By(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),Ve(d=>{let f=!1;return G(d).pipe(JU(this.paramsInheritanceStrategy,this.environmentInjector),tt({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(d,"",Xt.NoDataFromResolver)}}))}),tt(d=>{let f=new Uy(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),Ny(c=>{let d=f=>{let m=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(f.routeConfig).pipe(tt(y=>{f.component=y}),K(()=>{})));for(let y of f.children)m.push(...d(y));return m};return Pa(d(c.targetSnapshot.root)).pipe(Or(null),lr(1))}),Ny(()=>this.afterPreactivation()),Ve(()=>{let{currentSnapshot:c,targetSnapshot:d}=s,f=this.createViewTransition?.(this.environmentInjector,c.root,d.root);return f?ve(f).pipe(K(()=>s)):G(s)}),K(c=>{let d=aU(r.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=Pe(j({},c),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,s}),tt(()=>{this.events.next(new wu)}),pU(this.rootContexts,r.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),lr(1),tt({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new qn(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),sg(this.transitionAbortSubject.pipe(tt(c=>{throw c}))),ka(()=>{!a&&!u&&this.cancelNavigationTransition(s,"",Xt.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),kr(c=>{if(u=!0,iS(c))this.events.next(new zr(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),lU(c)?this.events.next(new Iu(c.url)):s.resolve(!1);else{this.events.next(new vu(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0));try{s.resolve(r.errorHandler(c))}catch(d){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(d)}}return bt}))}))}cancelNavigationTransition(r,i,o){let s=new zr(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function u$(t){return t!==pu}var c$=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:()=>O(l$),providedIn:"root"});let t=e;return t})(),iv=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},l$=(()=>{let e=class e extends iv{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Om(e)))(o||e)}})(),e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),fS=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:()=>O(d$),providedIn:"root"});let t=e;return t})(),d$=(()=>{let e=class e extends fS{constructor(){super(...arguments),this.location=O(ms),this.urlSerializer=O(Cu),this.options=O(xu,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=O(lv),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new qr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=JT(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Ds)this.stateMemento=this.createStateMemento();else if(r instanceof Gr)this.rawUrlTree=i.initialUrl;else if(r instanceof nh){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof wu?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof zr&&(r.code===Xt.GuardRejected||r.code===Xt.NoDataFromResolver)?this.restoreHistory(i):r instanceof vu?this.restoreHistory(i,!0):r instanceof qn&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=j(j({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=j(j({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Om(e)))(o||e)}})(),e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),hu=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(hu||{});function pS(t,e){t.events.pipe(ft(n=>n instanceof qn||n instanceof zr||n instanceof vu||n instanceof Gr),K(n=>n instanceof qn||n instanceof Gr?hu.COMPLETE:(n instanceof zr?n.code===Xt.Redirect||n.code===Xt.SupersededByNewNavigation:!1)?hu.REDIRECTING:hu.FAILED),ft(n=>n!==hu.REDIRECTING),lr(1)).subscribe(()=>{e()})}function h$(t){throw t}var f$={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},p$={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Wr=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=O(Ld),this.stateManager=O(fS),this.options=O(xu,{optional:!0})||{},this.pendingTasks=O(Od),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=O(dv),this.urlSerializer=O(Cu),this.location=O(ms),this.urlHandlingStrategy=O(lv),this._events=new Le,this.errorHandler=this.options.errorHandler||h$,this.navigated=!1,this.routeReuseStrategy=O(c$),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=O(ch,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!O(dh,{optional:!0}),this.eventsSubscription=new qe,this.isNgZoneEnabled=O(he)instanceof he&&he.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof zr&&i.code!==Xt.Redirect&&i.code!==Xt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof qn)this.navigated=!0;else if(i instanceof Iu){let a=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),u={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||u$(o.source)};this.scheduleNavigation(a,pu,null,u,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}m$(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),pu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let c=j({},o);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let u=this.parseUrl(r);this.scheduleNavigation(u,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(av),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:u,preserveFragment:c}=i,d=c?this.currentUrlTree.fragment:a,f=null;switch(u){case"merge":f=j(j({},this.currentUrlTree.queryParams),s);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}f!==null&&(f=this.removeEmptyProps(f));let m;try{let y=o?o.snapshot:this.routerState.snapshot.root;m=KT(y)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),m=this.currentUrlTree.root}return QT(m,r,f,d??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=Es(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,pu,null,i)}navigate(r,i={skipLocationChange:!1}){return g$(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=j({},f$):i===!1?o=j({},p$):o=i,Es(r))return MT(this.currentUrlTree,r,o);let s=this.parseUrl(r);return MT(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let u,c,d;a?(u=a.resolve,c=a.reject,d=a.promise):d=new Promise((m,y)=>{u=m,c=y});let f=this.pendingTasks.add();return pS(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:u,reject:c,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(m=>Promise.reject(m))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function g$(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new q(4008,!1)}function m$(t){return!(t instanceof wu)&&!(t instanceof Iu)}var hK=(()=>{let e=class e{constructor(r,i,o,s,a,u){this.router=r,this.route=i,this.tabIndexAttribute=o,this.renderer=s,this.el=a,this.locationStrategy=u,this.href=null,this.commands=null,this.onChanges=new Le,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let c=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=r.events.subscribe(d=>{d instanceof qn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,o,s,a){let u=this.urlTree;if(u===null||this.isAnchorElement&&(r!==0||i||o||s||a||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(u,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:rC(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let o=this.renderer,s=this.el.nativeElement;i!==null?o.setAttribute(s,r,i):o.removeAttribute(s,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(st(Wr),st(Yi),Fm("tabindex"),st(Nd),st(eu),st(vr))},e.\u0275dir=hs({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,o){i&1&&iy("click",function(a){return o.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&ny("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[wn.HasDecoratorInputTransform,"preserveFragment","preserveFragment",iu],skipLocationChange:[wn.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",iu],replaceUrl:[wn.HasDecoratorInputTransform,"replaceUrl","replaceUrl",iu],routerLink:"routerLink"},standalone:!0,features:[ty,Ja]});let t=e;return t})();var lh=class{};var y$=(()=>{let e=class e{constructor(r,i,o,s,a){this.router=r,this.injector=o,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(ft(r=>r instanceof qn),xi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let o=[];for(let s of i){s.providers&&!s._injector&&(s._injector=kd(s.providers,r,`Route: ${s.path}`));let a=s._injector??r,u=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&o.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&o.push(this.processRoutes(u,s.children??s._loadedRoutes))}return ve(o).pipe(Pr())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let o;i.loadChildren&&i.canLoad===void 0?o=this.loader.loadChildren(r,i):o=G(null);let s=o.pipe(Ke(a=>a===null?G(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return ve([s,a]).pipe(Pr())}else return s})}};e.\u0275fac=function(i){return new(i||e)(R(Wr),R(Ud),R(Qt),R(lh),R(cv))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),gS=new U(""),v$=(()=>{let e=class e{constructor(r,i,o,s,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=o,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Ds?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof qn?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Gr&&r.code===th.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof rh&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new rh(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){pC()},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})();function w$(t){return t.routerState.root}function Mu(t,e){return{\u0275kind:t,\u0275providers:e}}function I$(){let t=O(Un);return e=>{let n=t.get(gs);if(e!==n.components[0])return;let r=t.get(Wr),i=t.get(mS);t.get(hv)===1&&r.initialNavigation(),t.get(yS,null,ae.Optional)?.setUpPreloading(),t.get(gS,null,ae.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var mS=new U("",{factory:()=>new Le}),hv=new U("",{providedIn:"root",factory:()=>1});function _$(){return Mu(2,[{provide:hv,useValue:0},{provide:Bd,multi:!0,deps:[Un],useFactory:e=>{let n=e.get(pT,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(Wr),o=e.get(mS);pS(i,()=>{r(!0)}),e.get(dv).afterPreactivation=()=>(r(!0),o.closed?G(void 0):o),i.initialNavigation()}))}}])}function E$(){return Mu(3,[{provide:Bd,multi:!0,useFactory:()=>{let e=O(Wr);return()=>{e.setUpLocationChangeListener()}}},{provide:hv,useValue:2}])}var yS=new U("");function D$(t){return Mu(0,[{provide:yS,useExisting:y$},{provide:lh,useExisting:t}])}function b$(){return Mu(8,[kT,{provide:dh,useExisting:kT}])}function C$(t){let e=[{provide:dS,useValue:s$},{provide:hS,useValue:j({skipNextTransition:!!t?.skipInitialTransition},t)}];return Mu(9,e)}var FT=new U("ROUTER_FORROOT_GUARD"),T$=[ms,{provide:Cu,useClass:mu},Wr,Tu,{provide:Yi,useFactory:w$,deps:[Wr]},cv,[]],fK=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[T$,[],{provide:ch,multi:!0,useValue:r},{provide:FT,useFactory:M$,deps:[[Wr,new ds,new wm]]},{provide:xu,useValue:i||{}},i?.useHash?A$():x$(),S$(),i?.preloadingStrategy?D$(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?R$(i):[],i?.bindToComponentInputs?b$().\u0275providers:[],i?.enableViewTransitions?C$().\u0275providers:[],N$()]}}static forChild(r){return{ngModule:e,providers:[{provide:ch,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(R(FT,8))},e.\u0275mod=an({type:e}),e.\u0275inj=sn({});let t=e;return t})();function S$(){return{provide:gS,useFactory:()=>{let t=O(_T),e=O(he),n=O(xu),r=O(dv),i=O(Cu);return n.scrollOffset&&t.setOffset(n.scrollOffset),new v$(i,r,t,e,n)}}}function A$(){return{provide:vr,useClass:mT}}function x$(){return{provide:vr,useClass:wy}}function M$(t){return"guarded"}function R$(t){return[t.initialNavigation==="disabled"?E$().\u0275providers:[],t.initialNavigation==="enabledBlocking"?_$().\u0275providers:[]]}var LT=new U("");function N$(){return[{provide:LT,useFactory:I$},{provide:ay,multi:!0,useExisting:LT}]}var yK=(()=>{let e=class e{constructor(){this.status=new et(!1)}display(r){try{setTimeout(()=>{this.status.next(r)},0)}catch{}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var wS=S1(vS());var wK=(()=>{let e=class e{constructor(){}showAlert(r,i,o="success"){return wS.default.fire({title:r,text:i,icon:o,showConfirmButton:!0})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var P$="firebase",k$="10.11.1";ar(P$,k$,"app");var Ts=new Ur("ANGULARFIRE2_VERSION");function xK(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var O$=(t,e)=>{let n=e?[e]:Lp(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Zi=class{constructor(){return O$(F$)}},F$="app-check";function pv(){}var fh=class{zone;delegate;constructor(e,n=Zp){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},gv=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",pv,{},pv,pv)),n.pipe(tt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},ph=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new fh(Zone.current)),this.insideAngular=n.run(()=>new fh(Zone.current,Ai)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(R(he))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function IS(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function MK(t){return t.pipe(Kt(IS().outsideAngular))}function Ht(t){return L$(IS())(t)}function L$(t){return function(n){return n=n.lift(new gv(t.ngZone)),n.pipe(mn(t.outsideAngular),Kt(t.insideAngular))}}var V$="firebase",j$="10.11.1";Ft.registerVersion(V$,j$,"app-compat");var B$=["ngOnDestroy"],DS=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{if(t[o])return r?.spy?.get&&r.spy.get(o,t[o]),t[o];if(B$.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let u=a?.[o];return typeof u=="function"?u.bind(a):u?.then?u.then(c=>n.run(()=>c)):n.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,c)=>s.then(d=>{let f=d?.(...c);return r?.spy?.apply&&r.spy.apply(o,c,f),f})})})});var gh=class{constructor(e){return e}},Ss=new U("angularfire2.app.options"),As=new U("angularfire2.app.name");function Ru(t,e,n){let r=typeof n=="string"&&n||"[DEFAULT]",i=typeof n=="object"&&n||{};i.name=i.name||r;let s=Ft.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Ft.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){let a=!!module.hot;U$("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new gh(s)}var U$=(t,...e)=>{cy()&&typeof console<"u"&&console[t](...e)},$$={provide:gh,useFactory:Ru,deps:[Ss,he,[new ds,As]]},jK=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:Ss,useValue:n},{provide:As,useValue:r}]}}constructor(n){Ft.registerVersion("angularfire",Ts.full,"core"),Ft.registerVersion("angularfire",Ts.full,"app-compat"),Ft.registerVersion("angular",KC.full,n.toString())}static \u0275fac=function(r){return new(r||t)(R(Ut))};static \u0275mod=an({type:t});static \u0275inj=sn({providers:[$$]})}return t})();function mh(t,e,n,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return H$(i,s)||(ES("error",`${e} was already initialized on the ${n} Firebase App with different settings.${q$?" You may need to reload as Firebase is not HMR aware.":""}`),ES("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}function H$(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var q$=typeof module<"u"&&!!module.hot,ES=(t,...e)=>{cy()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var bS=class{constructor(e){return e}};var G$=new Map,W$={activated:!1,tokenObservers:[]},K$={initialized:!1,enabled:!1};function bn(t){return G$.get(t)||Object.assign({},W$)}function MS(){return K$}var Q$="https://content-firebaseappcheck.googleapis.com/v1";var Y$="exchangeDebugToken",TS={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},nQ=24*60*60*1e3;var yv=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return D(this,null,function*(){this.stop();try{this.pending=new kp,this.pending.promise.catch(n=>{}),yield Z$(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new kp,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function Z$(t){return new Promise(e=>{setTimeout(e,t)})}var J$={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Qr=new ED("appCheck","AppCheck",J$);function RS(t){if(!bn(t).activated)throw Qr.create("use-before-activation",{appName:t.name})}function NS(r,i){return D(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(t,a)}catch(y){throw Qr.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw Qr.create("fetch-status-error",{httpStatus:u.status});let c;try{c=yield u.json()}catch(y){throw Qr.create("fetch-parse-error",{originalErrorMessage:y?.message})}let d=c.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw Qr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});let f=Number(d[1])*1e3,m=Date.now();return{token:c.token,expireTimeMillis:m+f,issuedAtTimeMillis:m}})}function PS(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${Q$}/projects/${n}/apps/${r}:${Y$}?key=${i}`,body:{debug_token:e}}}var X$="firebase-app-check-database",eH=1,vv="firebase-app-check-store";var yh=null;function tH(){return yh||(yh=new Promise((t,e)=>{try{let n=indexedDB.open(X$,eH);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Qr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(vv,{keyPath:"compositeKey"})}}}catch(n){e(Qr.create("storage-open",{originalErrorMessage:n?.message}))}}),yh)}function nH(t,e){return rH(iH(t),e)}function rH(t,e){return D(this,null,function*(){let r=(yield tH()).transaction(vv,"readwrite"),o=r.objectStore(vv).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var c;a(Qr.create("storage-set",{originalErrorMessage:(c=u.target.error)===null||c===void 0?void 0:c.message}))}})})}function iH(t){return`${t.options.appId}-${t.name}`}var wv=new rl("@firebase/app-check");function mv(t,e){return nl()?nH(t,e).catch(n=>{wv.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function kS(){return MS().enabled}function OS(){return D(this,null,function*(){let t=MS();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var oH={error:"UNKNOWN_ERROR"};function sH(t){return wD.encodeString(JSON.stringify(t),!1)}function Iv(t,e=!1){return D(this,null,function*(){let n=t.app;RS(n);let r=bn(n),i=r.token,o;if(i&&!Nu(i)&&(r.token=void 0,i=void 0),!i){let u=yield r.cachedTokenPromise;u&&(Nu(u)?i=u:yield mv(n,void 0))}if(!e&&i&&Nu(i))return{token:i.token};let s=!1;if(kS()){r.exchangeTokenPromise||(r.exchangeTokenPromise=NS(PS(n,yield OS()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let u=yield r.exchangeTokenPromise;return yield mv(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield bn(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?wv.warn(u.message):wv.error(u),o=u}let a;return i?o?Nu(i)?a={token:i.token,internalError:o}:a=AS(o):(a={token:i.token},r.token=i,yield mv(n,i)):a=AS(o),s&&lH(n,a),a})}function aH(t){return D(this,null,function*(){let e=t.app;RS(e);let{provider:n}=bn(e);if(kS()){let r=yield OS(),{token:i}=yield NS(PS(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function uH(t,e,n,r){let{app:i}=t,o=bn(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Nu(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),SS(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>SS(t))}function FS(t,e){let n=bn(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function SS(t){let{app:e}=t,n=bn(e),r=n.tokenRefresher;r||(r=cH(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function cH(t){let{app:e}=t;return new yv(()=>D(this,null,function*(){let n=bn(e),r;if(n.token?r=yield Iv(t,!0):r=yield Iv(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=bn(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},TS.RETRIAL_MIN_WAIT,TS.RETRIAL_MAX_WAIT)}function lH(t,e){let n=bn(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Nu(t){return t.expireTimeMillis-Date.now()>0}function AS(t){return{token:sH(oH),error:t}}var _v=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=bn(this.app);for(let n of e)FS(this.app,n.next);return Promise.resolve()}};function dH(t,e){return new _v(t,e)}function hH(t){return{getToken:e=>Iv(t,e),getLimitedUseToken:()=>aH(t),addTokenListener:e=>uH(t,"INTERNAL",e),removeTokenListener:e=>FS(t.app,e)}}var fH="@firebase/app-check",pH="0.8.3";var gH="app-check",xS="app-check-internal";function mH(){Ma(new Di(gH,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return dH(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(xS).initialize()})),Ma(new Di(xS,t=>{let e=t.getProvider("app-check").getImmediate();return hH(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),ar(fH,pH)}mH();var yH=["localhost","0.0.0.0","127.0.0.1"],pQ=typeof window<"u"&&yH.includes(window.location.hostname);var Ev=new U("angularfire2.auth.use-emulator"),Dv=new U("angularfire2.auth.settings"),bv=new U("angularfire2.auth.tenant-id"),Cv=new U("angularfire2.auth.langugage-code"),Tv=new U("angularfire2.auth.use-device-language"),Sv=new U("angularfire.auth.persistence"),Av=(t,e,n,r,i,o,s,a)=>mh(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let u=e.runOutsideAngular(()=>t.auth());if(n&&u.useEmulator(...n),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(let[c,d]of Object.entries(s))u.settings[c]=d;return a&&u.setPersistence(a),u},[n,r,i,o,s,a]),VS=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,o,s,a,u,c,d,f,m,y){let w=new Le,_=G(void 0).pipe(Kt(s.outsideAngular),Ve(()=>o.runOutsideAngular(()=>import("./chunk-JJ23YVEB.js"))),K(()=>Ru(n,o,r)),K(T=>Av(T,o,a,c,d,f,u,m)),xl({bufferSize:1,refCount:!1}));if(Wi(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=G(null);else{_.pipe(on()).subscribe();let T=_.pipe(Ve(M=>M.getRedirectResult().then(H=>H,()=>null)),Ht,xl({bufferSize:1,refCount:!1})),x=_.pipe(Ve(M=>new ce(H=>({unsubscribe:o.runOutsideAngular(()=>M.onAuthStateChanged(W=>H.next(W),W=>H.error(W),()=>H.complete()))})))),V=_.pipe(Ve(M=>new ce(H=>({unsubscribe:o.runOutsideAngular(()=>M.onIdTokenChanged(W=>H.next(W),W=>H.error(W),()=>H.complete()))}))));this.authState=T.pipe(Ml(x),mn(s.outsideAngular),Kt(s.insideAngular)),this.user=T.pipe(Ml(V),mn(s.outsideAngular),Kt(s.insideAngular)),this.idToken=this.user.pipe(Ve(M=>M?ve(M.getIdToken()):G(null))),this.idTokenResult=this.user.pipe(Ve(M=>M?ve(M.getIdTokenResult()):G(null))),this.credential=eg(T,w,this.authState.pipe(ft(M=>!M))).pipe(K(M=>M?.user?M:null),mn(s.outsideAngular),Kt(s.insideAngular))}return DS(this,_,o,{spy:{apply:(T,x,V)=>{(T.startsWith("signIn")||T.startsWith("createUser"))&&V.then(M=>w.next(M))}}})}static \u0275fac=function(r){return new(r||t)(R(Ss),R(As,8),R(Ut),R(he),R(ph),R(Ev,8),R(Dv,8),R(bv,8),R(Cv,8),R(Tv,8),R(Sv,8),R(Zi,8))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var wH=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Tn={},k,Yv=Yv||{},ee=wH||self;function Rh(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Gu(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function IH(t){return Object.prototype.hasOwnProperty.call(t,xv)&&t[xv]||(t[xv]=++_H)}var xv="closure_uid_"+(1e9*Math.random()>>>0),_H=0;function EH(t,e,n){return t.call.apply(t.bind,arguments)}function DH(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function It(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?It=EH:It=DH,It.apply(null,arguments)}function vh(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function ct(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[i].apply(r,s)}}function Yr(){this.s=this.s,this.o=this.o}var bH=0;Yr.prototype.s=!1;Yr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),bH!=0)&&IH(this)};Yr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var ZS=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Zv(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function jS(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(Rh(r)){let i=t.length||0,o=r.length||0;t.length=i+o;for(let s=0;s<o;s++)t[i+s]=r[s]}else t.push(r)}}function _t(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}_t.prototype.h=function(){this.defaultPrevented=!0};var CH=function(){if(!ee.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};ee.addEventListener("test",n,e),ee.removeEventListener("test",n,e)}catch{}return t}();function Vu(t){return/^[\s\xa0]*$/.test(t)}function Nh(){var t=ee.navigator;return t&&(t=t.userAgent)?t:""}function Wn(t){return Nh().indexOf(t)!=-1}function Jv(t){return Jv[" "](t),t}Jv[" "]=function(){};function TH(t,e){var n=pq;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var SH=Wn("Opera"),Ns=Wn("Trident")||Wn("MSIE"),JS=Wn("Edge"),kv=JS||Ns,XS=Wn("Gecko")&&!(Nh().toLowerCase().indexOf("webkit")!=-1&&!Wn("Edge"))&&!(Wn("Trident")||Wn("MSIE"))&&!Wn("Edge"),AH=Nh().toLowerCase().indexOf("webkit")!=-1&&!Wn("Edge");function eA(){var t=ee.document;return t?t.documentMode:void 0}var Ov;e:{if(wh="",Ih=function(){var t=Nh();if(XS)return/rv:([^\);]+)(\)|;)/.exec(t);if(JS)return/Edge\/([\d\.]+)/.exec(t);if(Ns)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(AH)return/WebKit\/(\S+)/.exec(t);if(SH)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),Ih&&(wh=Ih?Ih[1]:""),Ns&&(_h=eA(),_h!=null&&_h>parseFloat(wh))){Ov=String(_h);break e}Ov=wh}var wh,Ih,_h,Fv;ee.document&&Ns?(Mv=eA(),Fv=Mv||parseInt(Ov,10)||void 0):Fv=void 0;var Mv,xH=Fv;function ju(t,e){if(_t.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(XS){e:{try{Jv(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:MH[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&ju.$.h.call(this)}}ct(ju,_t);var MH={2:"touch",3:"pen",4:"mouse"};ju.prototype.h=function(){ju.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Wu="closure_listenable_"+(1e6*Math.random()|0),RH=0;function NH(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++RH,this.fa=this.ia=!1}function Ph(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Xv(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function PH(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function tA(t){let e={};for(let n in t)e[n]=t[n];return e}var BS="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function nA(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let o=0;o<BS.length;o++)n=BS[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function kh(t){this.src=t,this.g={},this.h=0}kh.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var s=Vv(t,e,r,i);return-1<s?(e=t[s],n||(e.ia=!1)):(e=new NH(e,this.src,o,!!r,i),e.ia=n,t.push(e)),e};function Lv(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=ZS(r,e),o;(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(Ph(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Vv(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.fa&&o.listener==e&&o.capture==!!n&&o.la==r)return i}return-1}var ew="closure_lm_"+(1e6*Math.random()|0),Rv={};function rA(t,e,n,r,i){if(r&&r.once)return oA(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)rA(t,e[o],n,r,i);return null}return n=rw(n),t&&t[Wu]?t.O(e,n,Gu(r)?!!r.capture:!!r,i):iA(t,e,n,!1,r,i)}function iA(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Gu(i)?!!i.capture:!!i,a=nw(t);if(a||(t[ew]=a=new kh(t)),n=a.add(e,n,r,s,o),n.proxy)return n;if(r=kH(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)CH||(i=s),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(aA(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function kH(){function t(n){return e.call(t.src,t.listener,n)}let e=OH;return t}function oA(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)oA(t,e[o],n,r,i);return null}return n=rw(n),t&&t[Wu]?t.P(e,n,Gu(r)?!!r.capture:!!r,i):iA(t,e,n,!0,r,i)}function sA(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)sA(t,e[o],n,r,i);else r=Gu(r)?!!r.capture:!!r,n=rw(n),t&&t[Wu]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],n=Vv(o,n,r,i),-1<n&&(Ph(o[n]),Array.prototype.splice.call(o,n,1),o.length==0&&(delete t.g[e],t.h--)))):t&&(t=nw(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Vv(e,n,r,i)),(n=-1<t?e[t]:null)&&tw(n))}function tw(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Wu])Lv(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(aA(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=nw(e))?(Lv(n,t),n.h==0&&(n.src=null,e[ew]=null)):Ph(t)}}}function aA(t){return t in Rv?Rv[t]:Rv[t]="on"+t}function OH(t,e){if(t.fa)t=!0;else{e=new ju(e,this);var n=t.listener,r=t.la||t.src;t.ia&&tw(t),t=n.call(r,e)}return t}function nw(t){return t=t[ew],t instanceof kh?t:null}var Nv="__closure_events_fn_"+(1e9*Math.random()>>>0);function rw(t){return typeof t=="function"?t:(t[Nv]||(t[Nv]=function(e){return t.handleEvent(e)}),t[Nv])}function ut(){Yr.call(this),this.i=new kh(this),this.S=this,this.J=null}ct(ut,Yr);ut.prototype[Wu]=!0;ut.prototype.removeEventListener=function(t,e,n,r){sA(this,t,e,n,r)};function gt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new _t(e,t);else if(e instanceof _t)e.target=e.target||t;else{var i=e;e=new _t(r,t),nA(e,i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=Eh(s,r,!0,e)&&i}if(s=e.g=t,i=Eh(s,r,!0,e)&&i,i=Eh(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)s=e.g=n[o],i=Eh(s,r,!1,e)&&i}ut.prototype.N=function(){if(ut.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Ph(n[r]);delete t.g[e],t.h--}}this.J=null};ut.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};ut.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Eh(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,u=s.la||s.src;s.ia&&Lv(t.i,s),i=a.call(u,r)!==!1&&i}}return i&&!r.defaultPrevented}var iw=ee.JSON.stringify,jv=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function FH(){var t=ow;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Bv=class{constructor(){this.h=this.g=null}add(e,n){let r=uA.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},uA=new jv(()=>new Uv,t=>t.reset()),Uv=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function LH(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function VH(t){ee.setTimeout(()=>{throw t},0)}var Bu,Uu=!1,ow=new Bv,cA=()=>{let t=ee.Promise.resolve(void 0);Bu=()=>{t.then(jH)}},jH=()=>{for(var t;t=FH();){try{t.h.call(t.g)}catch(n){VH(n)}var e=uA;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Uu=!1};function Oh(t,e){ut.call(this),this.h=t||1,this.g=e||ee,this.j=It(this.qb,this),this.l=Date.now()}ct(Oh,ut);k=Oh.prototype;k.ga=!1;k.T=null;k.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),gt(this,"tick"),this.ga&&(sw(this),this.start()))}};k.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function sw(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}k.N=function(){Oh.$.N.call(this),sw(this),delete this.g};function aw(t,e,n){if(typeof t=="function")n&&(t=It(t,n));else if(t&&typeof t.handleEvent=="function")t=It(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:ee.setTimeout(t,e||0)}function lA(t){t.g=aw(()=>{t.g=null,t.i&&(t.i=!1,lA(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var $v=class extends Yr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:lA(this)}N(){super.N(),this.g&&(ee.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function $u(t){Yr.call(this),this.h=t,this.g={}}ct($u,Yr);var US=[];function dA(t,e,n,r){Array.isArray(n)||(n&&(US[0]=n.toString()),n=US);for(var i=0;i<n.length;i++){var o=rA(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function hA(t){Xv(t.g,function(e,n){this.g.hasOwnProperty(n)&&tw(e)},t),t.g={}}$u.prototype.N=function(){$u.$.N.call(this),hA(this)};$u.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Fh(){this.g=!0}Fh.prototype.Ea=function(){this.g=!1};function BH(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var d=c[0];c=c[1];var f=d.split("_");s=2<=f.length&&f[1]=="type"?s+(d+"="+c+"&"):s+(d+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+s})}function UH(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+o+" "+s})}function Ms(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+HH(t,n)+(r?" "+r:"")})}function $H(t,e){t.info(function(){return"TIMEOUT: "+e})}Fh.prototype.info=function(){};function HH(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if(o!="noop"&&o!="stop"&&o!="close")for(var s=1;s<i.length;s++)i[s]=""}}}}return iw(n)}catch{return e}}var to={},$S=null;function Lh(){return $S=$S||new ut}to.Ta="serverreachability";function fA(t){_t.call(this,to.Ta,t)}ct(fA,_t);function Hu(t){let e=Lh();gt(e,new fA(e))}to.STAT_EVENT="statevent";function pA(t,e){_t.call(this,to.STAT_EVENT,t),this.stat=e}ct(pA,_t);function Mt(t){let e=Lh();gt(e,new pA(e,t))}to.Ua="timingevent";function gA(t,e){_t.call(this,to.Ua,t),this.size=e}ct(gA,_t);function Ku(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return ee.setTimeout(function(){t()},e)}var Vh={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},mA={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function uw(){}uw.prototype.h=null;function HS(t){return t.h||(t.h=t.i())}function yA(){}var Qu={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function cw(){_t.call(this,"d")}ct(cw,_t);function lw(){_t.call(this,"c")}ct(lw,_t);var Hv;function jh(){}ct(jh,uw);jh.prototype.g=function(){return new XMLHttpRequest};jh.prototype.i=function(){return{}};Hv=new jh;function Yu(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new $u(this),this.P=qH,t=kv?125:void 0,this.V=new Oh(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new vA}function vA(){this.i=null,this.g="",this.h=!1}var qH=45e3,wA={},qv={};k=Yu.prototype;k.setTimeout=function(t){this.P=t};function zv(t,e,n){t.L=1,t.A=Uh(Ir(e)),t.u=n,t.S=!0,IA(t,null)}function IA(t,e){t.G=Date.now(),Zu(t),t.B=Ir(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),AA(n.i,"t",r),t.o=0,n=t.l.J,t.h=new vA,t.g=QA(t.l,n?e:null,!t.u),0<t.O&&(t.M=new $v(It(t.Pa,t,t.g),t.O)),dA(t.U,t.g,"readystatechange",t.nb),e=t.I?tA(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Hu(),BH(t.j,t.v,t.B,t.m,t.W,t.u)}k.nb=function(t){t=t.target;let e=this.M;e&&Kn(t)==3?e.l():this.Pa(t)};k.Pa=function(t){try{if(t==this.g)e:{let d=Kn(this.g);var e=this.g.Ia();let f=this.g.da();if(!(3>d)&&(d!=3||kv||this.g&&(this.h.h||this.g.ja()||WS(this.g)))){this.J||d!=4||e==7||(e==8||0>=f?Hu(3):Hu(2)),Bh(this);var n=this.g.da();this.ca=n;t:if(_A(this)){var r=WS(this.g);t="";var i=r.length,o=Kn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ji(this),Lu(this);var s="";break t}this.h.i=new ee.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.length=0,this.h.g+=t,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=n==200,UH(this.j,this.v,this.B,this.m,this.W,d,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Vu(a)){var c=a;break t}}c=null}if(n=c)Ms(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Gv(this,n);else{this.i=!1,this.s=3,Mt(12),Ji(this),Lu(this);break e}}this.S?(EA(this,d,s),kv&&this.i&&d==3&&(dA(this.U,this.V,"tick",this.mb),this.V.start())):(Ms(this.j,this.m,s,null),Gv(this,s)),d==4&&Ji(this),this.i&&!this.J&&(d==4?zA(this.l,this):(this.i=!1,Zu(this)))}else dq(this.g),n==400&&0<s.indexOf("Unknown SID")?(this.s=3,Mt(12)):(this.s=0,Mt(13)),Ji(this),Lu(this)}}}catch{}finally{}};function _A(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function EA(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=zH(t,n),i==qv){e==4&&(t.s=4,Mt(14),r=!1),Ms(t.j,t.m,null,"[Incomplete Response]");break}else if(i==wA){t.s=4,Mt(15),Ms(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Ms(t.j,t.m,i,null),Gv(t,i);_A(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,Mt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),mw(e),e.M=!0,Mt(11))):(Ms(t.j,t.m,n,"[Invalid Chunked Response]"),Ji(t),Lu(t))}k.mb=function(){if(this.g){var t=Kn(this.g),e=this.g.ja();this.o<e.length&&(Bh(this),EA(this,t,e),this.i&&t!=4&&Zu(this))}};function zH(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?qv:(n=Number(e.substring(n,r)),isNaN(n)?wA:(r+=1,r+n>e.length?qv:(e=e.slice(r,r+n),t.o=r+n,e)))}k.cancel=function(){this.J=!0,Ji(this)};function Zu(t){t.Y=Date.now()+t.P,DA(t,t.P)}function DA(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=Ku(It(t.lb,t),e)}function Bh(t){t.C&&(ee.clearTimeout(t.C),t.C=null)}k.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?($H(this.j,this.B),this.L!=2&&(Hu(),Mt(17)),Ji(this),this.s=2,Lu(this)):DA(this,this.Y-t)};function Lu(t){t.l.H==0||t.J||zA(t.l,t)}function Ji(t){Bh(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,sw(t.V),hA(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Gv(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Wv(n.i,t))){if(!t.K&&Wv(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Sh(n),qh(n);else break e;gw(n),Mt(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Ku(It(n.ib,n),6e3));if(1>=RA(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Xi(n,11)}else if((t.K||n.g==t)&&Sh(n),!Vu(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];let d=c[3];d!=null&&(n.ra=d,n.l.info("VER="+n.ra));let f=c[4];f!=null&&(n.Ga=f,n.l.info("SVER="+n.Ga));let m=c[5];m!=null&&typeof m=="number"&&0<m&&(r=1.5*m,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let y=t.g;if(y){let w=y.g?y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(w){var o=r.i;o.g||w.indexOf("spdy")==-1&&w.indexOf("quic")==-1&&w.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(dw(o,o.h),o.h=null))}if(r.F){let _=y.g?y.g.getResponseHeader("X-HTTP-Session-Id"):null;_&&(r.Da=_,Me(r.I,r.F,_))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var s=t;if(r.wa=KA(r,r.J?r.pa:null,r.Y),s.K){NA(r.i,s);var a=s,u=r.L;u&&a.setTimeout(u),a.C&&(Bh(a),Zu(a)),r.g=s}else HA(r);0<n.j.length&&zh(n)}else c[0]!="stop"&&c[0]!="close"||Xi(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Xi(n,7):pw(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}Hu(4)}catch{}}function GH(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Rh(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function WH(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Rh(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function bA(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Rh(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=WH(t),r=GH(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}var CA=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function KH(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function eo(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof eo){this.h=t.h,Ch(this,t.j),this.s=t.s,this.g=t.g,Th(this,t.m),this.l=t.l;var e=t.i,n=new qu;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),qS(this,n),this.o=t.o}else t&&(e=String(t).match(CA))?(this.h=!1,Ch(this,e[1]||"",!0),this.s=Ou(e[2]||""),this.g=Ou(e[3]||"",!0),Th(this,e[4]),this.l=Ou(e[5]||"",!0),qS(this,e[6]||"",!0),this.o=Ou(e[7]||"")):(this.h=!1,this.i=new qu(null,this.h))}eo.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Fu(e,zS,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Fu(e,zS,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Fu(n,n.charAt(0)=="/"?ZH:YH,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Fu(n,XH)),t.join("")};function Ir(t){return new eo(t)}function Ch(t,e,n){t.j=n?Ou(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Th(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function qS(t,e,n){e instanceof qu?(t.i=e,eq(t.i,t.h)):(n||(e=Fu(e,JH)),t.i=new qu(e,t.h))}function Me(t,e,n){t.i.set(e,n)}function Uh(t){return Me(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ou(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Fu(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,QH),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function QH(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var zS=/[#\/\?@]/g,YH=/[#\?:]/g,ZH=/[#\?]/g,JH=/[#\?@]/g,XH=/#/g;function qu(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Zr(t){t.g||(t.g=new Map,t.h=0,t.i&&KH(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}k=qu.prototype;k.add=function(t,e){Zr(this),this.i=null,t=Ps(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function TA(t,e){Zr(t),e=Ps(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function SA(t,e){return Zr(t),e=Ps(t,e),t.g.has(e)}k.forEach=function(t,e){Zr(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};k.ta=function(){Zr(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let o=0;o<i.length;o++)n.push(e[r])}return n};k.Z=function(t){Zr(this);let e=[];if(typeof t=="string")SA(this,t)&&(e=e.concat(this.g.get(Ps(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};k.set=function(t,e){return Zr(this),this.i=null,t=Ps(this,t),SA(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};k.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function AA(t,e,n){TA(t,e),0<n.length&&(t.i=null,t.g.set(Ps(t,e),Zv(n)),t.h+=n.length)}k.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;s[r]!==""&&(i+="="+encodeURIComponent(String(s[r]))),t.push(i)}}return this.i=t.join("&")};function Ps(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function eq(t,e){e&&!t.j&&(Zr(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(TA(this,r),AA(this,i,n))},t)),t.j=e}var tq=class{constructor(t,e){this.g=t,this.map=e}};function xA(t){this.l=t||nq,ee.PerformanceNavigationTiming?(t=ee.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(ee.g&&ee.g.Ka&&ee.g.Ka()&&ee.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var nq=10;function MA(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function RA(t){return t.h?1:t.g?t.g.size:0}function Wv(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function dw(t,e){t.g?t.g.add(e):t.h=e}function NA(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}xA.prototype.cancel=function(){if(this.i=PA(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function PA(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return Zv(t.i)}var rq=class{stringify(t){return ee.JSON.stringify(t,void 0)}parse(t){return ee.JSON.parse(t,void 0)}};function iq(){this.g=new rq}function oq(t,e,n){let r=n||"";try{bA(t,function(i,o){let s=i;Gu(i)&&(s=iw(i)),e.push(r+o+"="+encodeURIComponent(s))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function sq(t,e){let n=new Fh;if(ee.Image){let r=new Image;r.onload=vh(Dh,n,r,"TestLoadImage: loaded",!0,e),r.onerror=vh(Dh,n,r,"TestLoadImage: error",!1,e),r.onabort=vh(Dh,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=vh(Dh,n,r,"TestLoadImage: timeout",!1,e),ee.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Dh(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Ju(t){this.l=t.ec||null,this.j=t.ob||!1}ct(Ju,uw);Ju.prototype.g=function(){return new $h(this.l,this.j)};Ju.prototype.i=function(t){return function(){return t}}({});function $h(t,e){ut.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=hw,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ct($h,ut);var hw=0;k=$h.prototype;k.open=function(t,e){if(this.readyState!=hw)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,zu(this)};k.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||ee).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};k.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Xu(this)),this.readyState=hw};k.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,zu(this)),this.g&&(this.readyState=3,zu(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ee.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;kA(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function kA(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}k.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Xu(this):zu(this),this.readyState==3&&kA(this)}};k.Za=function(t){this.g&&(this.response=this.responseText=t,Xu(this))};k.Ya=function(t){this.g&&(this.response=t,Xu(this))};k.ka=function(){this.g&&Xu(this)};function Xu(t){t.readyState=4,t.l=null,t.j=null,t.A=null,zu(t)}k.setRequestHeader=function(t,e){this.v.append(t,e)};k.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};k.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function zu(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty($h.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var aq=ee.JSON.parse;function je(t){ut.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=OA,this.L=this.M=!1}ct(je,ut);var OA="",uq=/^https?$/i,cq=["POST","PUT"];k=je.prototype;k.Oa=function(t){this.M=t};k.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Hv.g(),this.C=this.u?HS(this.u):HS(Hv),this.g.onreadystatechange=It(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){GS(this,o);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let o of r.keys())n.set(o,r.get(o));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(o=>o.toLowerCase()=="content-type"),i=ee.FormData&&t instanceof ee.FormData,!(0<=ZS(cq,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[o,s]of n)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{VA(this),0<this.B&&((this.L=lq(this.g))?(this.g.timeout=this.B,this.g.ontimeout=It(this.ua,this)):this.A=aw(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){GS(this,o)}};function lq(t){return Ns&&typeof t.timeout=="number"&&t.ontimeout!==void 0}k.ua=function(){typeof Yv<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,gt(this,"timeout"),this.abort(8))};function GS(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,FA(t),Hh(t)}function FA(t){t.F||(t.F=!0,gt(t,"complete"),gt(t,"error"))}k.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,gt(this,"complete"),gt(this,"abort"),Hh(this))};k.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Hh(this,!0)),je.$.N.call(this)};k.La=function(){this.s||(this.G||this.v||this.l?LA(this):this.kb())};k.kb=function(){LA(this)};function LA(t){if(t.h&&typeof Yv<"u"&&(!t.C[1]||Kn(t)!=4||t.da()!=2)){if(t.v&&Kn(t)==4)aw(t.La,0,t);else if(gt(t,"readystatechange"),Kn(t)==4){t.h=!1;try{let s=t.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=s===0){var i=String(t.I).match(CA)[1]||null;!i&&ee.self&&ee.self.location&&(i=ee.self.location.protocol.slice(0,-1)),r=!uq.test(i?i.toLowerCase():"")}n=r}if(n)gt(t,"complete"),gt(t,"success");else{t.m=6;try{var o=2<Kn(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",FA(t)}}finally{Hh(t)}}}}function Hh(t,e){if(t.g){VA(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||gt(t,"ready");try{n.onreadystatechange=r}catch{}}}function VA(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(ee.clearTimeout(t.A),t.A=null)}k.isActive=function(){return!!this.g};function Kn(t){return t.g?t.g.readyState:0}k.da=function(){try{return 2<Kn(this)?this.g.status:-1}catch{return-1}};k.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};k.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),aq(e)}};function WS(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case OA:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function dq(t){let e={};t=(t.g&&2<=Kn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Vu(t[r]))continue;var n=LH(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let o=e[i]||[];e[i]=o,o.push(n)}PH(e,function(r){return r.join(", ")})}k.Ia=function(){return this.m};k.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function jA(t){let e="";return Xv(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function fw(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=jA(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Me(t,e,n))}function Pu(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function BA(t){this.Ga=0,this.j=[],this.l=new Fh,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Pu("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Pu("baseRetryDelayMs",5e3,t),this.hb=Pu("retryDelaySeedMs",1e4,t),this.eb=Pu("forwardChannelMaxRetries",2,t),this.xa=Pu("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new xA(t&&t.concurrentRequestLimit),this.Ja=new iq,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}k=BA.prototype;k.ra=8;k.H=1;function pw(t){if(UA(t),t.H==3){var e=t.W++,n=Ir(t.I);if(Me(n,"SID",t.K),Me(n,"RID",e),Me(n,"TYPE","terminate"),ec(t,n),e=new Yu(t,t.l,e),e.L=2,e.A=Uh(Ir(n)),n=!1,ee.navigator&&ee.navigator.sendBeacon)try{n=ee.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&ee.Image&&(new Image().src=e.A,n=!0),n||(e.g=QA(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Zu(e)}WA(t)}function qh(t){t.g&&(mw(t),t.g.cancel(),t.g=null)}function UA(t){qh(t),t.u&&(ee.clearTimeout(t.u),t.u=null),Sh(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&ee.clearTimeout(t.m),t.m=null)}function zh(t){if(!MA(t.i)&&!t.m){t.m=!0;var e=t.Na;Bu||cA(),Uu||(Bu(),Uu=!0),ow.add(e,t),t.C=0}}function hq(t,e){return RA(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Ku(It(t.Na,t,e),GA(t,t.C)),t.C++,!0)}k.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new Yu(this,this.l,t),o=this.s;if(this.U&&(o?(o=tA(o),nA(o,this.U)):o=this.U),this.o!==null||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=$A(this,i,e),n=Ir(this.I),Me(n,"RID",t),Me(n,"CVER",22),this.F&&Me(n,"X-HTTP-Session-Id",this.F),ec(this,n),o&&(this.O?e="headers="+encodeURIComponent(String(jA(o)))+"&"+e:this.o&&fw(n,this.o,o)),dw(this.i,i),this.bb&&Me(n,"TYPE","init"),this.P?(Me(n,"$req",e),Me(n,"SID","null"),i.aa=!0,zv(i,n,null)):zv(i,n,e),this.H=2}}else this.H==3&&(t?KS(this,t):this.j.length==0||MA(this.i)||KS(this))};function KS(t,e){var n;e?n=e.m:n=t.W++;let r=Ir(t.I);Me(r,"SID",t.K),Me(r,"RID",n),Me(r,"AID",t.V),ec(t,r),t.o&&t.s&&fw(r,t.o,t.s),n=new Yu(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=$A(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),dw(t.i,n),zv(n,r,e)}function ec(t,e){t.na&&Xv(t.na,function(n,r){Me(e,r,n)}),t.h&&bA({},function(n,r){Me(e,r,n)})}function $A(t,e,n){n=Math.min(t.j.length,n);var r=t.h?It(t.h.Va,t.h,t):null;e:{var i=t.j;let o=-1;for(;;){let s=["count="+n];o==-1?0<n?(o=i[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let u=0;u<n;u++){let c=i[u].g,d=i[u].map;if(c-=o,0>c)o=Math.max(0,i[u].g-100),a=!1;else try{oq(d,s,"req"+c+"_")}catch{r&&r(d)}}if(a){r=s.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function HA(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Bu||cA(),Uu||(Bu(),Uu=!0),ow.add(e,t),t.A=0}}function gw(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Ku(It(t.Ma,t),GA(t,t.A)),t.A++,!0)}k.Ma=function(){if(this.u=null,qA(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Ku(It(this.jb,this),t)}};k.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Mt(10),qh(this),qA(this))};function mw(t){t.B!=null&&(ee.clearTimeout(t.B),t.B=null)}function qA(t){t.g=new Yu(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Ir(t.wa);Me(e,"RID","rpc"),Me(e,"SID",t.K),Me(e,"AID",t.V),Me(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Me(e,"TO",t.qa),Me(e,"TYPE","xmlhttp"),ec(t,e),t.o&&t.s&&fw(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Uh(Ir(e)),n.u=null,n.S=!0,IA(n,t)}k.ib=function(){this.v!=null&&(this.v=null,qh(this),gw(this),Mt(19))};function Sh(t){t.v!=null&&(ee.clearTimeout(t.v),t.v=null)}function zA(t,e){var n=null;if(t.g==e){Sh(t),mw(t),t.g=null;var r=2}else if(Wv(t.i,e))n=e.F,NA(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=Lh(),gt(r,new gA(r,n)),zh(t)}else HA(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&hq(t,e)||r==2&&gw(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Xi(t,5);break;case 4:Xi(t,10);break;case 3:Xi(t,6);break;default:Xi(t,2)}}}function GA(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Xi(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=It(t.pb,t);n||(n=new eo("//www.google.com/images/cleardot.gif"),ee.location&&ee.location.protocol=="http"||Ch(n,"https"),Uh(n)),sq(n.toString(),r)}else Mt(2);t.H=0,t.h&&t.h.za(e),WA(t),UA(t)}k.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Mt(2)):(this.l.info("Failed to ping google.com"),Mt(1))};function WA(t){if(t.H=0,t.ma=[],t.h){let e=PA(t.i);(e.length!=0||t.j.length!=0)&&(jS(t.ma,e),jS(t.ma,t.j),t.i.i.length=0,Zv(t.j),t.j.length=0),t.h.ya()}}function KA(t,e,n){var r=n instanceof eo?Ir(n):new eo(n);if(r.g!="")e&&(r.g=e+"."+r.g),Th(r,r.m);else{var i=ee.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new eo(null);r&&Ch(o,r),e&&(o.g=e),i&&Th(o,i),n&&(o.l=n),r=o}return n=t.F,e=t.Da,n&&e&&Me(r,n,e),Me(r,"VER",t.ra),ec(t,r),r}function QA(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new je(new Ju({ob:n})):new je(t.va),e.Oa(t.J),e}k.isActive=function(){return!!this.h&&this.h.isActive(this)};function YA(){}k=YA.prototype;k.Ba=function(){};k.Aa=function(){};k.za=function(){};k.ya=function(){};k.isActive=function(){return!0};k.Va=function(){};function Ah(){if(Ns&&!(10<=Number(xH)))throw Error("Environmental error: no available transport.")}Ah.prototype.g=function(t,e){return new en(t,e)};function en(t,e){ut.call(this),this.g=new BA(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Vu(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Vu(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new ks(this)}ct(en,ut);en.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Mt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=KA(t,null,t.Y),zh(t)};en.prototype.close=function(){pw(this.g)};en.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=iw(t),t=n);e.j.push(new tq(e.fb++,t)),e.H==3&&zh(e)};en.prototype.N=function(){this.g.h=null,delete this.j,pw(this.g),delete this.g,en.$.N.call(this)};function ZA(t){cw.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}ct(ZA,cw);function JA(){lw.call(this),this.status=1}ct(JA,lw);function ks(t){this.g=t}ct(ks,YA);ks.prototype.Ba=function(){gt(this.g,"a")};ks.prototype.Aa=function(t){gt(this.g,new ZA(t))};ks.prototype.za=function(t){gt(this.g,new JA)};ks.prototype.ya=function(){gt(this.g,"b")};function fq(){this.blockSize=-1}function Cn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}ct(Cn,fq);Cn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Pv(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var o=t.g[3],s=e+(o^n&(i^o))+r[0]+3614090360&4294967295;e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[1]+3905402710&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[2]+606105819&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[3]+3250441966&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[4]+4118548399&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[5]+1200080426&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[6]+2821735955&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[7]+4249261313&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[8]+1770035416&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[9]+2336552879&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[10]+4294925233&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[11]+2304563134&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[12]+1804603682&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[13]+4254626195&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[14]+2792965006&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[15]+1236535329&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(i^o&(n^i))+r[1]+4129170786&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[6]+3225465664&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[11]+643717713&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[0]+3921069994&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[5]+3593408605&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[10]+38016083&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[15]+3634488961&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[4]+3889429448&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[9]+568446438&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[14]+3275163606&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[3]+4107603335&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[8]+1163531501&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[13]+2850285829&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[2]+4243563512&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[7]+1735328473&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[12]+2368359562&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(n^i^o)+r[5]+4294588738&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[8]+2272392833&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[11]+1839030562&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[14]+4259657740&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[1]+2763975236&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[4]+1272893353&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[7]+4139469664&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[10]+3200236656&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[13]+681279174&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[0]+3936430074&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[3]+3572445317&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[6]+76029189&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[9]+3654602809&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[12]+3873151461&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[15]+530742520&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[2]+3299628645&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(i^(n|~o))+r[0]+4096336452&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[7]+1126891415&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[14]+2878612391&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[5]+4237533241&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[12]+1700485571&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[3]+2399980690&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[10]+4293915773&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[1]+2240044497&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[8]+1873313359&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[15]+4264355552&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[6]+2734768916&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[13]+1309151649&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[4]+4149444226&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[11]+3174756917&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[2]+718787259&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+o&4294967295}Cn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(i==0)for(;o<=n;)Pv(this,t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<e;)if(r[i++]=t.charCodeAt(o++),i==this.blockSize){Pv(this,r),i=0;break}}else for(;o<e;)if(r[i++]=t[o++],i==this.blockSize){Pv(this,r),i=0;break}}this.h=i,this.i+=e};Cn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function Ee(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var o=t[i]|0;r&&o==e||(n[i]=o,r=!1)}this.g=n}var pq={};function yw(t){return-128<=t&&128>t?TH(t,function(e){return new Ee([e|0],0>e?-1:0)}):new Ee([t|0],0>t?-1:0)}function Qn(t){if(isNaN(t)||!isFinite(t))return Rs;if(0>t)return pt(Qn(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Kv;return new Ee(e,0)}function XA(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return pt(XA(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Qn(Math.pow(e,8)),r=Rs,i=0;i<t.length;i+=8){var o=Math.min(8,t.length-i),s=parseInt(t.substring(i,i+o),e);8>o?(o=Qn(Math.pow(e,o)),r=r.R(o).add(Qn(s))):(r=r.R(n),r=r.add(Qn(s)))}return r}var Kv=4294967296,Rs=yw(0),Qv=yw(1),QS=yw(16777216);k=Ee.prototype;k.ea=function(){if(ln(this))return-pt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Kv+r)*e,e*=Kv}return t};k.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(wr(this))return"0";if(ln(this))return"-"+pt(this).toString(t);for(var e=Qn(Math.pow(t,6)),n=this,r="";;){var i=Mh(n,e).g;n=xh(n,i.R(e));var o=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,wr(n))return o+r;for(;6>o.length;)o="0"+o;r=o+r}};k.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function wr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function ln(t){return t.h==-1}k.X=function(t){return t=xh(this,t),ln(t)?-1:wr(t)?0:1};function pt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Ee(n,~t.h).add(Qv)}k.abs=function(){return ln(this)?pt(this):this};k.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var o=r+(this.D(i)&65535)+(t.D(i)&65535),s=(o>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=s>>>16,o&=65535,s&=65535,n[i]=s<<16|o}return new Ee(n,n[n.length-1]&-2147483648?-1:0)};function xh(t,e){return t.add(pt(e))}k.R=function(t){if(wr(this)||wr(t))return Rs;if(ln(this))return ln(t)?pt(this).R(pt(t)):pt(pt(this).R(t));if(ln(t))return pt(this.R(pt(t)));if(0>this.X(QS)&&0>t.X(QS))return Qn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var o=this.D(r)>>>16,s=this.D(r)&65535,a=t.D(i)>>>16,u=t.D(i)&65535;n[2*r+2*i]+=s*u,bh(n,2*r+2*i),n[2*r+2*i+1]+=o*u,bh(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,bh(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,bh(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Ee(n,0)};function bh(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function ku(t,e){this.g=t,this.h=e}function Mh(t,e){if(wr(e))throw Error("division by zero");if(wr(t))return new ku(Rs,Rs);if(ln(t))return e=Mh(pt(t),e),new ku(pt(e.g),pt(e.h));if(ln(e))return e=Mh(t,pt(e)),new ku(pt(e.g),e.h);if(30<t.g.length){if(ln(t)||ln(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Qv,r=e;0>=r.X(t);)n=YS(n),r=YS(r);var i=xs(n,1),o=xs(r,1);for(r=xs(r,2),n=xs(n,2);!wr(r);){var s=o.add(r);0>=s.X(t)&&(i=i.add(n),o=s),r=xs(r,1),n=xs(n,1)}return e=xh(t,i.R(e)),new ku(i,e)}for(i=Rs;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),o=Qn(n),s=o.R(e);ln(s)||0<s.X(t);)n-=r,o=Qn(n),s=o.R(e);wr(o)&&(o=Qv),i=i.add(o),t=xh(t,s)}return new ku(i,t)}k.gb=function(t){return Mh(this,t).h};k.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Ee(n,this.h&t.h)};k.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Ee(n,this.h|t.h)};k.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Ee(n,this.h^t.h)};function YS(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Ee(n,t.h)}function xs(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],o=0;o<r;o++)i[o]=0<e?t.D(o+n)>>>e|t.D(o+n+1)<<32-e:t.D(o+n);return new Ee(i,t.h)}Ah.prototype.createWebChannel=Ah.prototype.g;en.prototype.send=en.prototype.u;en.prototype.open=en.prototype.m;en.prototype.close=en.prototype.close;Vh.NO_ERROR=0;Vh.TIMEOUT=8;Vh.HTTP_ERROR=6;mA.COMPLETE="complete";yA.EventType=Qu;Qu.OPEN="a";Qu.CLOSE="b";Qu.ERROR="c";Qu.MESSAGE="d";ut.prototype.listen=ut.prototype.O;je.prototype.listenOnce=je.prototype.P;je.prototype.getLastError=je.prototype.Sa;je.prototype.getLastErrorCode=je.prototype.Ia;je.prototype.getStatus=je.prototype.da;je.prototype.getResponseJson=je.prototype.Wa;je.prototype.getResponseText=je.prototype.ja;je.prototype.send=je.prototype.ha;je.prototype.setWithCredentials=je.prototype.Oa;Cn.prototype.digest=Cn.prototype.l;Cn.prototype.reset=Cn.prototype.reset;Cn.prototype.update=Cn.prototype.j;Ee.prototype.add=Ee.prototype.add;Ee.prototype.multiply=Ee.prototype.R;Ee.prototype.modulo=Ee.prototype.gb;Ee.prototype.compare=Ee.prototype.X;Ee.prototype.toNumber=Ee.prototype.ea;Ee.prototype.toString=Ee.prototype.toString;Ee.prototype.getBits=Ee.prototype.D;Ee.fromNumber=Qn;Ee.fromString=XA;var ex=Tn.createWebChannelTransport=function(){return new Ah},tx=Tn.getStatEventTarget=function(){return Lh()},Gh=Tn.ErrorCode=Vh,nx=Tn.EventType=mA,rx=Tn.Event=to,vw=Tn.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},ix=Tn.FetchXmlHttpFactory=Ju,tc=Tn.WebChannel=yA,ox=Tn.XhrIo=je,sx=Tn.Md5=Cn,no=Tn.Integer=Ee;var ax="@firebase/firestore";var Ze=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ze.UNAUTHENTICATED=new Ze(null),Ze.GOOGLE_CREDENTIALS=new Ze("google-credentials-uid"),Ze.FIRST_PARTY=new Ze("first-party-uid"),Ze.MOCK_USER=new Ze("mock-user");var da="10.11.1";var ii=new rl("@firebase/firestore");function js(){return ii.logLevel}function aM(t){ii.setLogLevel(t)}function A(t,...e){if(ii.logLevel<=kn.DEBUG){let n=e.map(__);ii.debug(`Firestore (${da}): ${t}`,...n)}}function ze(t,...e){if(ii.logLevel<=kn.ERROR){let n=e.map(__);ii.error(`Firestore (${da}): ${t}`,...n)}}function hn(t,...e){if(ii.logLevel<=kn.WARN){let n=e.map(__);ii.warn(`Firestore (${da}): ${t}`,...n)}}function __(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function L(t="Unexpected state"){let e=`FIRESTORE (${da}) INTERNAL ASSERTION FAILED: `+t;throw ze(e),new Error(e)}function $(t,e){t||L()}function uM(t,e){t||L()}function P(t,e){return t}var E={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},S=class extends _D{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Je=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var rf=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Dw=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ze.UNAUTHENTICATED))}shutdown(){}},bw=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Cw=class{constructor(e){this.t=e,this.currentUser=Ze.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new Je;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Je,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>D(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{A("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(A("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Je)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(A("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?($(typeof r.accessToken=="string"),new rf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return $(e===null||typeof e=="string"),new Ze(e)}},Tw=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ze.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Sw=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Tw(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ze.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Aw=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},xw=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=o=>{o.error!=null&&A("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,A("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{A("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):A("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?($(typeof n.token=="string"),this.R=n.token,new Aw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function gq(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var of=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=gq(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}};function te(t,e){return t<e?-1:t>e?1:0}function Ks(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function cM(t){return t+"\0"}var Oe=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new S(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new S(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new S(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new S(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?te(this.nanoseconds,e.nanoseconds):te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var z=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Oe(0,0))}static max(){return new t(new Oe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var sf=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&L(),r===void 0?r=e.length-n:r>e.length-n&&L(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},pe=class t extends sf{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new S(E.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},mq=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ge=class t extends sf{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return mq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new S(E.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new S(E.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new S(E.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new S(E.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var N=class t{constructor(e){this.path=e}static fromPath(e){return new t(pe.fromString(e))}static fromName(e){return new t(pe.fromString(e).popFirst(5))}static empty(){return new t(pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return pe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new pe(e.slice()))}};var Qs=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};function Mw(t){return t.fields.find(e=>e.kind===2)}function io(t){return t.fields.filter(e=>e.kind!==2)}Qs.UNKNOWN_ID=-1;var zs=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var fc=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,fn.min())}};function lM(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=z.fromTimestamp(r===1e9?new Oe(n+1,0):new Oe(n,r));return new fn(i,N.empty(),e)}function dM(t){return new fn(t.readTime,t.key,-1)}var fn=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(z.min(),N.empty(),-1)}static max(){return new t(z.max(),N.empty(),-1)}};function E_(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=N.comparator(t.documentKey,e.documentKey),n!==0?n:te(t.largestBatchId,e.largestBatchId))}var hM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",af=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function pi(t){return D(this,null,function*(){if(t.code!==E.FAILED_PRECONDITION||t.message!==hM)throw t;A("LocalStore","Unexpectedly lost primary lease")})}var I=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&L(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let c=u;n(e[c]).next(d=>{s[c]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};var uf=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Je,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new lo(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=D_(r.target.error);this.V.reject(new lo(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new lo(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(A("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new Nw(n)}},oi=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(xa())===12.2&&ze("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return A("SimpleDb","Removing database:",e),oo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!nl())return!1;if(t.C())return!0;let e=xa(),n=t.S(e),r=0<n&&n<10,i=fM(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static F(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return D(this,null,function*(){return this.db||(A("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;n(s)},i.onblocked=()=>{r(new lo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new S(E.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new S(E.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new lo(e,s))},i.onupgradeneeded=o=>{A("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{A("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return D(this,null,function*(){let o=n==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=uf.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),I.reject(c))).toPromise();return u.catch(()=>{}),yield a.m,u}catch(a){let u=a,c=u.name!=="FirebaseError"&&s<3;if(A("SimpleDb","Transaction failed with error:",u.message,"Retrying:",c),this.close(),!c)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function fM(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}var Rw=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return oo(this.B.delete())}},lo=class extends S{constructor(e,n){super(E.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function gi(t){return t.name==="IndexedDbTransactionError"}var Nw=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(A("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(A("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),oo(r)}add(e){return A("SimpleDb","ADD",this.store.name,e,e),oo(this.store.add(e))}get(e){return oo(this.store.get(e)).next(n=>(n===void 0&&(n=null),A("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return A("SimpleDb","DELETE",this.store.name,e),oo(this.store.delete(e))}count(){return A("SimpleDb","COUNT",this.store.name),oo(this.store.count())}U(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new I((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,u)=>{s.push(u)}).next(()=>s)}}G(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new I((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,n){A("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.W(i,n)}Y(e){let n=this.cursor({});return new I((r,i)=>{n.onerror=o=>{let s=D_(o.target.error);i(s)},n.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,n){let r=[];return new I((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new Rw(a),c=n(a.primaryKey,a.value,u);if(c instanceof I){let d=c.catch(f=>(u.done(),I.reject(f)));r.push(d)}u.isDone?i():u.K===null?a.continue():a.continue(u.K)}}).next(()=>I.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function oo(t){return new I((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=D_(r.target.error);n(i)}})}var ux=!1;function D_(t){let e=oi.S(xa());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new S("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ux||(ux=!0,setTimeout(()=>{throw r},0)),r}}return t}var Pw=class{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){A("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>D(this,null,function*(){this.task=null;try{A("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(n){gi(n)?A("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield pi(n)}yield this.X(6e4)}))}},kw=class{constructor(e,n){this.localStore=e,this.persistence=n}ee(e=50){return D(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))})}te(e,n){let r=new Set,i=n,o=!0;return I.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return A("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(A("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}re(e,n){let r=e;return n.changes.forEach((i,o)=>{let s=dM(o);E_(s,r)>0&&(r=s)}),new fn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}};var tn=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function Oc(t){return t==null}function pc(t){return t===0&&1/t==-1/0}function pM(t){return typeof t=="number"&&Number.isInteger(t)&&!pc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function Rt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=cx(e)),e=yq(t.get(n),e);return cx(e)}function yq(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function cx(t){return t+""}function Yn(t){let e=t.length;if($(e>=2),e===2)return $(t.charAt(0)===""&&t.charAt(1)===""),pe.emptyPath();let n=e-2,r=[],i="";for(let o=0;o<e;){let s=t.indexOf("",o);switch((s<0||s>n)&&L(),t.charAt(s+1)){case"":let a=t.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:L()}o=s+2}return new pe(r)}var lx=["userId","batchId"];function Zh(t,e){return[t,Rt(e)]}function gM(t,e,n){return[t,Rt(e),n]}var vq={},wq=["prefixPath","collectionGroup","readTime","documentId"],Iq=["prefixPath","collectionGroup","documentId"],_q=["collectionGroup","readTime","prefixPath","documentId"],Eq=["canonicalId","targetId"],Dq=["targetId","path"],bq=["path","targetId"],Cq=["collectionId","parent"],Tq=["indexId","uid"],Sq=["uid","sequenceNumber"],Aq=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],xq=["indexId","uid","orderedDocumentKey"],Mq=["userId","collectionPath","documentId"],Rq=["userId","collectionPath","largestBatchId"],Nq=["userId","collectionGroup","largestBatchId"],mM=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Pq=[...mM,"documentOverlays"],yM=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],vM=yM,wM=[...vM,"indexConfiguration","indexState","indexEntries"],kq=wM;var gc=class extends af{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}};function dt(t,e){let n=P(t);return oi.F(n._e,e)}function dx(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Do(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function IM(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Re=class t{constructor(e,n){this.comparator=e,this.root=n||Jn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Jn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qs(this.root,e,this.comparator,!1)}getReverseIterator(){return new qs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qs(this.root,e,this.comparator,!0)}},qs=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Jn=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw L();let e=this.left.check();if(e!==this.right.check())throw L();return e+(this.isRed()?0:1)}};Jn.EMPTY=null,Jn.RED=!0,Jn.BLACK=!1;Jn.EMPTY=new class{constructor(){this.size=0}get key(){throw L()}get value(){throw L()}get color(){throw L()}get left(){throw L()}get right(){throw L()}copy(e,n,r,i,o){return this}insert(e,n,r){return new Jn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Se=class t{constructor(e){this.comparator=e,this.data=new Re(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new cf(this.data.getIterator())}getIteratorFrom(e){return new cf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},cf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Os(t){return t.hasNext()?t.getNext():void 0}var nn=class t{constructor(e){this.fields=e,e.sort(Ge.comparator)}static empty(){return new t([])}unionWith(e){let n=new Se(Ge.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ks(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var lf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function _M(){return typeof atob<"u"}var lt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new lf("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};lt.EMPTY_BYTE_STRING=new lt("");var Oq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dr(t){if($(!!t),typeof t=="string"){let e=0,n=Oq.exec(t);if($(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Be(t.seconds),nanos:Be(t.nanos)}}function Be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function si(t){return typeof t=="string"?lt.fromBase64String(t):lt.fromUint8Array(t)}function ep(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function b_(t){let e=t.mapValue.fields.__previous_value__;return ep(e)?b_(e):e}function mc(t){let e=Dr(t.mapValue.fields.__local_write_time__.timestampValue);return new Oe(e.seconds,e.nanos)}var Ow=class{constructor(e,n,r,i,o,s,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}},ai=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var ni={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Jh={nullValue:"NULL_VALUE"};function ho(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ep(t)?4:EM(t)?9007199254740991:10:L()}function tr(t,e){if(t===e)return!0;let n=ho(t);if(n!==ho(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return mc(t).isEqual(mc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Dr(i.timestampValue),a=Dr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return si(i.bytesValue).isEqual(si(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Be(i.geoPointValue.latitude)===Be(o.geoPointValue.latitude)&&Be(i.geoPointValue.longitude)===Be(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Be(i.integerValue)===Be(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Be(i.doubleValue),a=Be(o.doubleValue);return s===a?pc(s)===pc(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return Ks(t.arrayValue.values||[],e.arrayValue.values||[],tr);case 10:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(dx(s)!==dx(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!tr(s[u],a[u])))return!1;return!0}(t,e);default:return L()}}function yc(t,e){return(t.values||[]).find(n=>tr(n,e))!==void 0}function ui(t,e){if(t===e)return 0;let n=ho(t),r=ho(e);if(n!==r)return te(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return te(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Be(o.integerValue||o.doubleValue),u=Be(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return hx(t.timestampValue,e.timestampValue);case 4:return hx(mc(t),mc(e));case 5:return te(t.stringValue,e.stringValue);case 6:return function(o,s){let a=si(o),u=si(s);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let c=0;c<a.length&&c<u.length;c++){let d=te(a[c],u[c]);if(d!==0)return d}return te(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=te(Be(o.latitude),Be(s.latitude));return a!==0?a:te(Be(o.longitude),Be(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){let a=o.values||[],u=s.values||[];for(let c=0;c<a.length&&c<u.length;++c){let d=ui(a[c],u[c]);if(d)return d}return te(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===ni.mapValue&&s===ni.mapValue)return 0;if(o===ni.mapValue)return 1;if(s===ni.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),c=s.fields||{},d=Object.keys(c);u.sort(),d.sort();for(let f=0;f<u.length&&f<d.length;++f){let m=te(u[f],d[f]);if(m!==0)return m;let y=ui(a[u[f]],c[d[f]]);if(y!==0)return y}return te(u.length,d.length)}(t.mapValue,e.mapValue);default:throw L()}}function hx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return te(t,e);let n=Dr(t),r=Dr(e),i=te(n.seconds,r.seconds);return i!==0?i:te(n.nanos,r.nanos)}function Ys(t){return Fw(t)}function Fw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Dr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return si(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return N.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=Fw(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Fw(n.fields[s])}`;return i+"}"}(t.mapValue):L()}function fo(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Lw(t){return!!t&&"integerValue"in t}function vc(t){return!!t&&"arrayValue"in t}function fx(t){return!!t&&"nullValue"in t}function px(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Xh(t){return!!t&&"mapValue"in t}function uc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Do(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=uc(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=uc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function EM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function Fq(t){return"nullValue"in t?Jh:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?fo(ai.empty(),N.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:L()}function Lq(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?fo(ai.empty(),N.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?ni:L()}function gx(t,e){let n=ui(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function mx(t,e){let n=ui(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var Dt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Xh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=uc(n)}setAll(e){let n=Ge.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=uc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());Xh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return tr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Xh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Do(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(uc(this.value))}};function DM(t){let e=[];return Do(t.fields,(n,r)=>{let i=new Ge([n]);if(Xh(r)){let o=DM(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new nn(e)}var Xe=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,z.min(),z.min(),z.min(),Dt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,z.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,z.min(),z.min(),Dt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,z.min(),z.min(),Dt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var nr=class{constructor(e,n){this.position=e,this.inclusive=n}};function yx(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=N.comparator(N.fromName(s.referenceValue),n.key):r=ui(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function vx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!tr(t.position[n],e.position[n]))return!1;return!0}var po=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function Vq(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var df=class{},le=class t extends df{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Bw(e,n,r):n==="array-contains"?new Hw(e,r):n==="in"?new hf(e,r):n==="not-in"?new qw(e,r):n==="array-contains-any"?new zw(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Uw(e,r):new $w(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ui(n,this.value)):n!==null&&ho(this.value)===ho(n)&&this.matchesComparison(ui(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return L()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},De=class t extends df{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return Zs(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Zs(t){return t.op==="and"}function Vw(t){return t.op==="or"}function C_(t){return bM(t)&&Zs(t)}function bM(t){for(let e of t.filters)if(e instanceof De)return!1;return!0}function jw(t){if(t instanceof le)return t.field.canonicalString()+t.op.toString()+Ys(t.value);if(C_(t))return t.filters.map(e=>jw(e)).join(",");{let e=t.filters.map(n=>jw(n)).join(",");return`${t.op}(${e})`}}function CM(t,e){return t instanceof le?function(r,i){return i instanceof le&&r.op===i.op&&r.field.isEqual(i.field)&&tr(r.value,i.value)}(t,e):t instanceof De?function(r,i){return i instanceof De&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&CM(s,i.filters[a]),!0):!1}(t,e):void L()}function TM(t,e){let n=t.filters.concat(e);return De.create(n,t.op)}function SM(t){return t instanceof le?function(n){return`${n.field.canonicalString()} ${n.op} ${Ys(n.value)}`}(t):t instanceof De?function(n){return n.op.toString()+" {"+n.getFilters().map(SM).join(" ,")+"}"}(t):"Filter"}var Bw=class extends le{constructor(e,n,r){super(e,n,r),this.key=N.fromName(r.referenceValue)}matches(e){let n=N.comparator(e.key,this.key);return this.matchesComparison(n)}},Uw=class extends le{constructor(e,n){super(e,"in",n),this.keys=AM("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},$w=class extends le{constructor(e,n){super(e,"not-in",n),this.keys=AM("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function AM(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>N.fromName(r.referenceValue))}var Hw=class extends le{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return vc(n)&&yc(n.arrayValue,this.value)}},hf=class extends le{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&yc(this.value.arrayValue,n)}},qw=class extends le{constructor(e,n){super(e,"not-in",n)}matches(e){if(yc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!yc(this.value.arrayValue,n)}},zw=class extends le{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!vc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>yc(this.value.arrayValue,r))}};var Gw=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function Ww(t,e=null,n=[],r=[],i=null,o=null,s=null){return new Gw(t,e,n,r,i,o,s)}function go(t){let e=P(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>jw(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Oc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ys(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ys(r)).join(",")),e.ue=n}return e.ue}function Fc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Vq(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!CM(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!vx(t.startAt,e.startAt)&&vx(t.endAt,e.endAt)}function ff(t){return N.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function pf(t,e){return t.filters.filter(n=>n instanceof le&&n.field.isEqual(e))}function wx(t,e,n){let r=Jh,i=!0;for(let o of pf(t,e)){let s=Jh,a=!0;switch(o.op){case"<":case"<=":s=Fq(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Jh}gx({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];gx({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function Ix(t,e,n){let r=ni,i=!0;for(let o of pf(t,e)){let s=ni,a=!0;switch(o.op){case">=":case">":s=Lq(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=ni}mx({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];mx({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}var Sn=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function xM(t,e,n,r,i,o,s,a){return new Sn(t,e,n,r,i,o,s,a)}function ha(t){return new Sn(t)}function _x(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function T_(t){return t.collectionGroup!==null}function Gs(t){let e=P(t);if(e.ce===null){e.ce=[];let n=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Se(Ge.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new po(o,r))}),n.has(Ge.keyField().canonicalString())||e.ce.push(new po(Ge.keyField(),r))}return e.ce}function Nt(t){let e=P(t);return e.le||(e.le=jq(e,Gs(t))),e.le}function jq(t,e){if(t.limitType==="F")return Ww(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new po(i.field,o)});let n=t.endAt?new nr(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new nr(t.startAt.position,t.startAt.inclusive):null;return Ww(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Kw(t,e){let n=t.filters.concat([e]);return new Sn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function gf(t,e,n){return new Sn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Lc(t,e){return Fc(Nt(t),Nt(e))&&t.limitType===e.limitType}function MM(t){return`${go(Nt(t))}|lt:${t.limitType}`}function Bs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>SM(i)).join(", ")}]`),Oc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ys(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ys(i)).join(",")),`Target(${r})`}(Nt(t))}; limitType=${t.limitType})`}function Vc(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):N.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of Gs(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let c=yx(s,a,u);return s.inclusive?c<=0:c<0}(r.startAt,Gs(r),i)||r.endAt&&!function(s,a,u){let c=yx(s,a,u);return s.inclusive?c>=0:c>0}(r.endAt,Gs(r),i))}(t,e)}function RM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function NM(t){return(e,n)=>{let r=!1;for(let i of Gs(t)){let o=Bq(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function Bq(t,e,n){let r=t.field.isKeyField()?N.comparator(e.key,n.key):function(o,s,a){let u=s.data.field(o),c=a.data.field(o);return u!==null&&c!==null?ui(u,c):L()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return L()}}var rr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Do(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return IM(this.inner)}size(){return this.innerSize}};var Uq=new Re(N.comparator);function qt(){return Uq}var PM=new Re(N.comparator);function sc(...t){let e=PM;for(let n of t)e=e.insert(n.key,n);return e}function kM(t){let e=PM;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Zn(){return cc()}function OM(){return cc()}function cc(){return new rr(t=>t.toString(),(t,e)=>t.isEqual(e))}var $q=new Re(N.comparator),Hq=new Se(N.comparator);function ne(...t){let e=Hq;for(let n of t)e=e.add(n);return e}var qq=new Se(te);function S_(){return qq}function FM(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pc(e)?"-0":e}}function LM(t){return{integerValue:""+t}}function VM(t,e){return pM(e)?LM(e):FM(t,e)}var Js=class{constructor(){this._=void 0}};function zq(t,e,n){return t instanceof ci?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&ep(o)&&(o=b_(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof br?BM(t,e):t instanceof Cr?UM(t,e):function(i,o){let s=jM(i,o),a=Ex(s)+Ex(i.Pe);return Lw(s)&&Lw(i.Pe)?LM(a):FM(i.serializer,a)}(t,e)}function Gq(t,e,n){return t instanceof br?BM(t,e):t instanceof Cr?UM(t,e):n}function jM(t,e){return t instanceof li?function(r){return Lw(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var ci=class extends Js{},br=class extends Js{constructor(e){super(),this.elements=e}};function BM(t,e){let n=$M(e);for(let r of t.elements)n.some(i=>tr(i,r))||n.push(r);return{arrayValue:{values:n}}}var Cr=class extends Js{constructor(e){super(),this.elements=e}};function UM(t,e){let n=$M(e);for(let r of t.elements)n=n.filter(i=>!tr(i,r));return{arrayValue:{values:n}}}var li=class extends Js{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function Ex(t){return Be(t.integerValue||t.doubleValue)}function $M(t){return vc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var mo=class{constructor(e,n){this.field=e,this.transform=n}};function Wq(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof br&&i instanceof br||r instanceof Cr&&i instanceof Cr?Ks(r.elements,i.elements,tr):r instanceof li&&i instanceof li?tr(r.Pe,i.Pe):r instanceof ci&&i instanceof ci}(t.transform,e.transform)}var Qw=class{constructor(e,n){this.version=e,this.transformResults=n}},Ue=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function ef(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Xs=class{};function HM(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new hi(t.key,Ue.none()):new di(t.key,t.data,Ue.none());{let n=t.data,r=Dt.empty(),i=new Se(Ge.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new An(t.key,r,new nn(i.toArray()),Ue.none())}}function Kq(t,e,n){t instanceof di?function(i,o,s){let a=i.value.clone(),u=bx(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof An?function(i,o,s){if(!ef(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=bx(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(qM(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function lc(t,e,n,r){return t instanceof di?function(o,s,a,u){if(!ef(o.precondition,s))return a;let c=o.value.clone(),d=Cx(o.fieldTransforms,u,s);return c.setAll(d),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof An?function(o,s,a,u){if(!ef(o.precondition,s))return a;let c=Cx(o.fieldTransforms,u,s),d=s.data;return d.setAll(qM(o)),d.setAll(c),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(o,s,a){return ef(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function Qq(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=jM(r.transform,i||null);o!=null&&(n===null&&(n=Dt.empty()),n.set(r.field,o))}return n||null}function Dx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ks(r,i,(o,s)=>Wq(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var di=class extends Xs{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},An=class extends Xs{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function qM(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function bx(t,e,n){let r=new Map;$(t.length===n.length);for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Gq(s,a,n[i]))}return r}function Cx(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,zq(o,s,e))}return r}var hi=class extends Xs{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},wc=class extends Xs{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Ic=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&Kq(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=lc(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=lc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=OM();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=HM(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(z.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ne())}isEqual(e){return this.batchId===e.batchId&&Ks(this.mutations,e.mutations,(n,r)=>Dx(n,r))&&Ks(this.baseMutations,e.baseMutations,(n,r)=>Dx(n,r))}},Yw=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){$(e.mutations.length===r.length);let i=function(){return $q}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var _c=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Zw=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Qe,fe;function zM(t){switch(t){default:return L();case E.CANCELLED:case E.UNKNOWN:case E.DEADLINE_EXCEEDED:case E.RESOURCE_EXHAUSTED:case E.INTERNAL:case E.UNAVAILABLE:case E.UNAUTHENTICATED:return!1;case E.INVALID_ARGUMENT:case E.NOT_FOUND:case E.ALREADY_EXISTS:case E.PERMISSION_DENIED:case E.FAILED_PRECONDITION:case E.ABORTED:case E.OUT_OF_RANGE:case E.UNIMPLEMENTED:case E.DATA_LOSS:return!0}}function GM(t){if(t===void 0)return ze("GRPC error has no .code"),E.UNKNOWN;switch(t){case Qe.OK:return E.OK;case Qe.CANCELLED:return E.CANCELLED;case Qe.UNKNOWN:return E.UNKNOWN;case Qe.DEADLINE_EXCEEDED:return E.DEADLINE_EXCEEDED;case Qe.RESOURCE_EXHAUSTED:return E.RESOURCE_EXHAUSTED;case Qe.INTERNAL:return E.INTERNAL;case Qe.UNAVAILABLE:return E.UNAVAILABLE;case Qe.UNAUTHENTICATED:return E.UNAUTHENTICATED;case Qe.INVALID_ARGUMENT:return E.INVALID_ARGUMENT;case Qe.NOT_FOUND:return E.NOT_FOUND;case Qe.ALREADY_EXISTS:return E.ALREADY_EXISTS;case Qe.PERMISSION_DENIED:return E.PERMISSION_DENIED;case Qe.FAILED_PRECONDITION:return E.FAILED_PRECONDITION;case Qe.ABORTED:return E.ABORTED;case Qe.OUT_OF_RANGE:return E.OUT_OF_RANGE;case Qe.UNIMPLEMENTED:return E.UNIMPLEMENTED;case Qe.DATA_LOSS:return E.DATA_LOSS;default:return L()}}(fe=Qe||(Qe={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";var Tx=null;function WM(){return new TextEncoder}var Yq=new no([4294967295,4294967295],0);function Sx(t){let e=WM().encode(t),n=new sx;return n.update(e),new Uint8Array(n.digest())}function Ax(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new no([n,r],0),new no([i,o],0)]}var Jw=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new co(`Invalid padding: ${n}`);if(r<0)throw new co(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new co(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new co(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=no.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(no.fromNumber(r)));return i.compare(Yq)===1&&(i=new no([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=Sx(e),[r,i]=Ax(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let n=Sx(e),[r,i]=Ax(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},co=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ec=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Dc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(z.min(),i,new Re(te),qt(),ne())}},Dc=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ne(),ne(),ne())}};var Ws=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},mf=class{constructor(e,n){this.targetId=e,this.me=n}},yf=class{constructor(e,n,r=lt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},vf=class{constructor(){this.fe=0,this.ge=Mx(),this.pe=lt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=ne(),n=ne(),r=ne();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:L()}}),new Dc(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=Mx()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,$(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Xw=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=qt(),this.qe=xx(),this.Qe=new Re(te)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:L()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let o=i.target;if(ff(o))if(r===0){let s=new N(o.path);this.Ue(n,s,Xe.newNoDocument(s,z.min()))}else $(r===1);else{let s=this.Ye(n);if(s!==r){let a=this.Ze(e),u=a?this.Xe(a,e,s):1;if(u!==0){this.je(n);let c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}Tx?.et(function(d,f,m,y,w){var _,T,x,V,M,H;let W={localCacheCount:d,existenceFilterCount:f.count,databaseId:m.database,projectId:m.projectId},Y=f.unchangedNames;return Y&&(W.bloomFilter={applied:w===0,hashCount:(_=Y?.hashCount)!==null&&_!==void 0?_:0,bitmapLength:(V=(x=(T=Y?.bits)===null||T===void 0?void 0:T.bitmap)===null||x===void 0?void 0:x.length)!==null&&V!==void 0?V:0,padding:(H=(M=Y?.bits)===null||M===void 0?void 0:M.padding)!==null&&H!==void 0?H:0,mightContain:Ie=>{var yt;return(yt=y?.mightContain(Ie))!==null&&yt!==void 0&&yt}}),W}(s,e.me,this.Le.tt(),a,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=si(r).toUint8Array()}catch(u){if(u instanceof lf)return hn("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Jw(s,i,o)}catch(u){return hn(u instanceof co?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,o,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&ff(a.target)){let u=new N(a.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,Xe.newNoDocument(u,e))}o.be&&(n.set(s,o.Ce()),o.ve())}});let r=ne();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Ec(e,n,this.Qe,this.ke,r);return this.ke=qt(),this.qe=xx(),this.Qe=new Re(te),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new vf,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Se(te),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||A("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new vf),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function xx(){return new Re(N.comparator)}function Mx(){return new Re(N.comparator)}var Zq={asc:"ASCENDING",desc:"DESCENDING"},Jq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Xq={and:"AND",or:"OR"},eI=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function tI(t,e){return t.useProto3Json||Oc(e)?e:{value:e}}function ea(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function KM(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function e4(t,e){return ea(t,e.toTimestamp())}function We(t){return $(!!t),z.fromTimestamp(function(n){let r=Dr(n);return new Oe(r.seconds,r.nanos)}(t))}function A_(t,e){return nI(t,e).canonicalString()}function nI(t,e){let n=function(i){return new pe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function QM(t){let e=pe.fromString(t);return $(oR(e)),e}function bc(t,e){return A_(t.databaseId,e.path)}function Xn(t,e){let n=QM(e);if(n.get(1)!==t.databaseId.projectId)throw new S(E.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new S(E.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new N(JM(n))}function YM(t,e){return A_(t.databaseId,e)}function ZM(t){let e=QM(t);return e.length===4?pe.emptyPath():JM(e)}function rI(t){return new pe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function JM(t){return $(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Rx(t,e,n){return{name:bc(t,e),fields:n.value.mapValue.fields}}function XM(t,e,n){let r=Xn(t,e.name),i=We(e.updateTime),o=e.createTime?We(e.createTime):z.min(),s=new Dt({mapValue:{fields:e.fields}}),a=Xe.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function t4(t,e){return"found"in e?function(r,i){$(!!i.found),i.found.name,i.found.updateTime;let o=Xn(r,i.found.name),s=We(i.found.updateTime),a=i.found.createTime?We(i.found.createTime):z.min(),u=new Dt({mapValue:{fields:i.found.fields}});return Xe.newFoundDocument(o,s,a,u)}(t,e):"missing"in e?function(r,i){$(!!i.missing),$(!!i.readTime);let o=Xn(r,i.missing),s=We(i.readTime);return Xe.newNoDocument(o,s)}(t,e):L()}function n4(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:L()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(c,d){return c.useProto3Json?($(d===void 0||typeof d=="string"),lt.fromBase64String(d||"")):($(d===void 0||d instanceof Buffer||d instanceof Uint8Array),lt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(c){let d=c.code===void 0?E.UNKNOWN:GM(c.code);return new S(d,c.message||"")}(s);n=new yf(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Xn(t,r.document.name),o=We(r.document.updateTime),s=r.document.createTime?We(r.document.createTime):z.min(),a=new Dt({mapValue:{fields:r.document.fields}}),u=Xe.newFoundDocument(i,o,s,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Ws(c,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Xn(t,r.document),o=r.readTime?We(r.readTime):z.min(),s=Xe.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Ws([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Xn(t,r.document),o=r.removedTargetIds||[];n=new Ws([],o,i,null)}else{if(!("filter"in e))return L();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Zw(i,o),a=r.targetId;n=new mf(a,s)}}return n}function Cc(t,e){let n;if(e instanceof di)n={update:Rx(t,e.key,e.value)};else if(e instanceof hi)n={delete:bc(t,e.key)};else if(e instanceof An)n={update:Rx(t,e.key,e.data),updateMask:u4(e.fieldMask)};else{if(!(e instanceof wc))return L();n={verify:bc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof ci)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof br)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Cr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof li)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw L()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:e4(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:L()}(t,e.precondition)),n}function iI(t,e){let n=e.currentDocument?function(o){return o.updateTime!==void 0?Ue.updateTime(We(o.updateTime)):o.exists!==void 0?Ue.exists(o.exists):Ue.none()}(e.currentDocument):Ue.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)$(a.setToServerValue==="REQUEST_TIME"),u=new ci;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];u=new br(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];u=new Cr(d)}else"increment"in a?u=new li(s,a.increment):L();let c=Ge.fromServerFormat(a.fieldPath);return new mo(c,u)}(t,i)):[];if(e.update){e.update.name;let i=Xn(t,e.update.name),o=new Dt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let c=u.fieldPaths||[];return new nn(c.map(d=>Ge.fromServerFormat(d)))}(e.updateMask);return new An(i,o,s,n,r)}return new di(i,o,n,r)}if(e.delete){let i=Xn(t,e.delete);return new hi(i,n)}if(e.verify){let i=Xn(t,e.verify);return new wc(i,n)}return L()}function r4(t,e){return t&&t.length>0?($(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?We(i.updateTime):We(o);return s.isEqual(z.min())&&(s=We(o)),new Qw(s,i.transformResults||[])}(n,e))):[]}function eR(t,e){return{documents:[YM(t,e.path)]}}function tR(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=YM(t,i);let o=function(c){if(c.length!==0)return iR(De.create(c,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(c){if(c.length!==0)return c.map(d=>function(m){return{field:Us(m.field),direction:o4(m.dir)}}(d))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=tI(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function nR(t){let e=ZM(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){$(r===1);let d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];n.where&&(o=function(f){let m=rR(f);return m instanceof De&&C_(m)?m.getFilters():[m]}(n.where));let s=[];n.orderBy&&(s=function(f){return f.map(m=>function(w){return new po($s(w.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,Oc(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(f){let m=!!f.before,y=f.values||[];return new nr(y,m)}(n.startAt));let c=null;return n.endAt&&(c=function(f){let m=!f.before,y=f.values||[];return new nr(y,m)}(n.endAt)),xM(e,i,s,o,a,"F",u,c)}function i4(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return L()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function rR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=$s(n.unaryFilter.field);return le.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=$s(n.unaryFilter.field);return le.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=$s(n.unaryFilter.field);return le.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=$s(n.unaryFilter.field);return le.create(s,"!=",{nullValue:"NULL_VALUE"});default:return L()}}(t):t.fieldFilter!==void 0?function(n){return le.create($s(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return L()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return De.create(n.compositeFilter.filters.map(r=>rR(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return L()}}(n.compositeFilter.op))}(t):L()}function o4(t){return Zq[t]}function s4(t){return Jq[t]}function a4(t){return Xq[t]}function Us(t){return{fieldPath:t.canonicalString()}}function $s(t){return Ge.fromServerFormat(t.fieldPath)}function iR(t){return t instanceof le?function(n){if(n.op==="=="){if(px(n.value))return{unaryFilter:{field:Us(n.field),op:"IS_NAN"}};if(fx(n.value))return{unaryFilter:{field:Us(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(px(n.value))return{unaryFilter:{field:Us(n.field),op:"IS_NOT_NAN"}};if(fx(n.value))return{unaryFilter:{field:Us(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Us(n.field),op:s4(n.op),value:n.value}}}(t):t instanceof De?function(n){let r=n.getFilters().map(i=>iR(i));return r.length===1?r[0]:{compositeFilter:{op:a4(n.op),filters:r}}}(t):L()}function u4(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function oR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var ta=class t{constructor(e,n,r,i,o=z.min(),s=z.min(),a=lt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var wf=class{constructor(e){this.ut=e}};function c4(t,e){let n;if(e.document)n=XM(t.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=N.fromSegments(e.noDocument.path),i=vo(e.noDocument.readTime);n=Xe.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return L();{let r=N.fromSegments(e.unknownDocument.path),i=vo(e.unknownDocument.version);n=Xe.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){let o=new Oe(i[0],i[1]);return z.fromTimestamp(o)}(e.readTime)),n}function Nx(t,e){let n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:If(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:bc(o,s.key),fields:s.data.value.mapValue.fields,updateTime:ea(o,s.version.toTimestamp()),createTime:ea(o,s.createTime.toTimestamp())}}(t.ut,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:yo(e.version)};else{if(!e.isUnknownDocument())return L();r.unknownDocument={path:n.path.toArray(),version:yo(e.version)}}return r}function If(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function yo(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function vo(t){let e=new Oe(t.seconds,t.nanoseconds);return z.fromTimestamp(e)}function so(t,e){let n=(e.baseMutations||[]).map(o=>iI(t.ut,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>iI(t.ut,o)),i=Oe.fromMillis(e.localWriteTimeMs);return new Ic(e.batchId,i,n,r)}function ac(t){let e=vo(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?vo(t.lastLimboFreeSnapshotVersion):z.min(),r;return r=function(o){return o.documents!==void 0}(t.query)?function(o){return $(o.documents.length===1),Nt(ha(ZM(o.documents[0])))}(t.query):function(o){return Nt(nR(o))}(t.query),new ta(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,lt.fromBase64String(t.resumeToken))}function sR(t,e){let n=yo(e.snapshotVersion),r=yo(e.lastLimboFreeSnapshotVersion),i;i=ff(e.target)?eR(t.ut,e.target):tR(t.ut,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:go(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function x_(t){let e=nR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?gf(e,e.limit,"L"):e}function ww(t,e){return new _c(e.largestBatchId,iI(t.ut,e.overlayMutation))}function Px(t,e){let n=e.path.lastSegment();return[t,Rt(e.path.popLast()),n]}function kx(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:yo(r.readTime),documentKey:Rt(r.documentKey.path),largestBatchId:r.largestBatchId}}var oI=class{getBundleMetadata(e,n){return Ox(e).get(n).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:vo(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,n){return Ox(e).put(function(i){return{bundleId:i.id,createTime:yo(We(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return Fx(e).get(n).next(r=>{if(r)return function(o){return{name:o.name,query:x_(o.bundledQuery),readTime:vo(o.readTime)}}(r)})}saveNamedQuery(e,n){return Fx(e).put(function(i){return{name:i.name,readTime:yo(We(i.readTime)),bundledQuery:i.bundledQuery}}(n))}};function Ox(t){return dt(t,"bundles")}function Fx(t){return dt(t,"namedQueries")}var _f=class t{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){let r=n.uid||"";return new t(e,r)}getOverlay(e,n){return nc(e).get(Px(this.userId,n)).next(r=>r?ww(this.serializer,r):null)}getOverlays(e,n){let r=Zn();return I.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){let i=[];return r.forEach((o,s)=>{let a=new _c(n,s);i.push(this.lt(e,a))}),I.waitFor(i)}removeOverlaysForBatchId(e,n,r){let i=new Set;n.forEach(s=>i.add(Rt(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(nc(e).j("collectionPathOverlayIndex",a))}),I.waitFor(o)}getOverlaysForCollection(e,n,r){let i=Zn(),o=Rt(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return nc(e).U("collectionPathOverlayIndex",s).next(a=>{for(let u of a){let c=ww(this.serializer,u);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,n,r,i){let o=Zn(),s,a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return nc(e).J({index:"collectionGroupOverlayIndex",range:a},(u,c,d)=>{let f=ww(this.serializer,c);o.size()<i||f.largestBatchId===s?(o.set(f.getKey(),f),s=f.largestBatchId):d.done()}).next(()=>o)}lt(e,n){return nc(e).put(function(i,o,s){let[a,u,c]=Px(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:c,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Cc(i.ut,s.mutation)}}(this.serializer,this.userId,n))}};function nc(t){return dt(t,"documentOverlays")}var _r=class{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(Be(e.integerValue));else if("doubleValue"in e){let r=Be(e.doubleValue);isNaN(r)?this.Tt(n,13):(this.Tt(n,15),pc(r)?n.Et(0):n.Et(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Tt(n,20),typeof r=="string"&&(r=Dr(r)),n.dt(`${r.seconds||""}`),n.Et(r.nanos||0)}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(si(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Tt(n,45),n.Et(r.latitude||0),n.Et(r.longitude||0)}else"mapValue"in e?EM(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):L()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){let r=e.fields||{};this.Tt(n,55);for(let i of Object.keys(r))this.At(i,n),this.Pt(r[i],n)}yt(e,n){let r=e.values||[];this.Tt(n,50);for(let i of r)this.Pt(i,n)}ft(e,n){this.Tt(n,37),N.fromName(e).path.forEach(r=>{this.Tt(n,60),this.wt(r,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}};_r.St=new _r;function l4(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function Lx(t){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=l4(255&r[o]);if(i+=s,s!==8)break}return i}(t);return Math.ceil(e/8)}var sI=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Dt(r.value),r=n.next();this.Ct()}vt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Dt(r);else if(r<2048)this.Dt(960|r>>>6),this.Dt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Dt(480|r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r);else{let i=n.codePointAt(0);this.Dt(240|i>>>18),this.Dt(128|63&i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i)}}this.Ct()}Ot(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Nt(e){let n=this.Lt(e),r=Lx(n);this.Bt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}kt(e){let n=this.Lt(e),r=Lx(n);this.Bt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Bt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Lt(e){let n=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Dt(e){let n=255&e;n===0?(this.Qt(0),this.Qt(255)):n===255?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){let n=255&e;n===0?(this.$t(0),this.$t(255)):n===255?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Bt(1),this.buffer[this.position++]=e}$t(e){this.Bt(1),this.buffer[this.position++]=~e}Bt(e){let n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},aI=class{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}},uI=class{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}},ao=class{constructor(){this.Wt=new sI,this.Gt=new aI(this.Wt),this.zt=new uI(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return e===0?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}};var uo=class t{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Ht(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new t(this.indexId,this.documentKey,this.arrayValue,r)}};function Jr(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=Vx(t.arrayValue,e.arrayValue),n!==0?n:(n=Vx(t.directionalValue,e.directionalValue),n!==0?n:N.comparator(t.documentKey,e.documentKey)))}function Vx(t,e){for(let n=0;n<t.length&&n<e.length;++n){let r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}var Ef=class{constructor(e){this.Jt=new Se((n,r)=>Ge.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(let n of e.filters){let r=n;r.isInequality()?this.Jt=this.Jt.add(r):this.Zt.push(r)}}get Xt(){return this.Jt.size>1}en(e){if($(e.collectionGroup===this.collectionId),this.Xt)return!1;let n=Mw(e);if(n!==void 0&&!this.tn(n))return!1;let r=io(e),i=new Set,o=0,s=0;for(;o<r.length&&this.tn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Jt.size>0){let a=this.Jt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.nn(a,u)||!this.rn(this.Yt[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.Yt.length||!this.rn(this.Yt[s++],a))return!1}return!0}sn(){if(this.Xt)return null;let e=new Se(Ge.comparator),n=[];for(let r of this.Zt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new zs(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new zs(r.field,0))}for(let r of this.Yt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new zs(r.field,r.dir==="asc"?0:1)));return new Qs(Qs.UNKNOWN_ID,this.collectionId,n,fc.empty())}tn(e){for(let n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function aR(t){var e,n;if($(t instanceof le||t instanceof De),t instanceof le){if(t instanceof hf){let i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>le.create(t.field,"==",o)))||[];return De.create(i,"or")}return t}let r=t.filters.map(i=>aR(i));return De.create(r,t.op)}function d4(t){if(t.getFilters().length===0)return[];let e=dI(aR(t));return $(uR(e)),cI(e)||lI(e)?[e]:e.getFilters()}function cI(t){return t instanceof le}function lI(t){return t instanceof De&&C_(t)}function uR(t){return cI(t)||lI(t)||function(n){if(n instanceof De&&Vw(n)){for(let r of n.getFilters())if(!cI(r)&&!lI(r))return!1;return!0}return!1}(t)}function dI(t){if($(t instanceof le||t instanceof De),t instanceof le)return t;if(t.filters.length===1)return dI(t.filters[0]);let e=t.filters.map(r=>dI(r)),n=De.create(e,t.op);return n=Df(n),uR(n)?n:($(n instanceof De),$(Zs(n)),$(n.filters.length>1),n.filters.reduce((r,i)=>M_(r,i)))}function M_(t,e){let n;return $(t instanceof le||t instanceof De),$(e instanceof le||e instanceof De),n=t instanceof le?e instanceof le?function(i,o){return De.create([i,o],"and")}(t,e):jx(t,e):e instanceof le?jx(e,t):function(i,o){if($(i.filters.length>0&&o.filters.length>0),Zs(i)&&Zs(o))return TM(i,o.getFilters());let s=Vw(i)?i:o,a=Vw(i)?o:i,u=s.filters.map(c=>M_(c,a));return De.create(u,"or")}(t,e),Df(n)}function jx(t,e){if(Zs(e))return TM(e,t.getFilters());{let n=e.filters.map(r=>M_(t,r));return De.create(n,"or")}}function Df(t){if($(t instanceof le||t instanceof De),t instanceof le)return t;let e=t.getFilters();if(e.length===1)return Df(e[0]);if(bM(t))return t;let n=e.map(i=>Df(i)),r=[];return n.forEach(i=>{i instanceof le?r.push(i):i instanceof De&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:De.create(r,t.op)}var hI=class{constructor(){this.on=new Tc}addToCollectionParentIndex(e,n){return this.on.add(n),I.resolve()}getCollectionParents(e,n){return I.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return I.resolve()}deleteFieldIndex(e,n){return I.resolve()}deleteAllFieldIndexes(e){return I.resolve()}createTargetIndexes(e,n){return I.resolve()}getDocumentsMatchingTarget(e,n){return I.resolve(null)}getIndexType(e,n){return I.resolve(0)}getFieldIndexes(e,n){return I.resolve([])}getNextCollectionGroupToUpdate(e){return I.resolve(null)}getMinOffset(e,n){return I.resolve(fn.min())}getMinOffsetFromCollectionGroup(e,n){return I.resolve(fn.min())}updateCollectionGroup(e,n,r){return I.resolve()}updateIndexEntries(e,n){return I.resolve()}},Tc=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Se(pe.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Se(pe.comparator)).toArray()}};var Wh=new Uint8Array(0),fI=class{constructor(e,n){this.databaseId=n,this._n=new Tc,this.an=new rr(r=>go(r),(r,i)=>Fc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){let r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});let o={collectionId:r,parent:Rt(i)};return Bx(e).put(o)}return I.resolve()}getCollectionParents(e,n){let r=[],i=IDBKeyRange.bound([n,""],[cM(n),""],!1,!0);return Bx(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==n)break;r.push(Yn(s.parent))}return r})}addFieldIndex(e,n){let r=rc(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(n);delete i.indexId;let o=r.add(i);if(n.indexState){let s=Ls(e);return o.next(a=>{s.put(kx(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){let r=rc(e),i=Ls(e),o=Fs(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=rc(e),r=Fs(e),i=Ls(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return I.forEach(this.un(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new Ef(r).sn();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){let r=Fs(e),i=!0,o=new Map;return I.forEach(this.un(n),s=>this.cn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=ne(),a=[];return I.forEach(o,(u,c)=>{A("IndexedDbIndexManager",`Using index ${function(M){return`id=${M.indexId}|cg=${M.collectionGroup}|f=${M.fields.map(H=>`${H.fieldPath}:${H.kind}`).join(",")}`}(u)} to execute ${go(n)}`);let d=function(M,H){let W=Mw(H);if(W===void 0)return null;for(let Y of pf(M,W.fieldPath))switch(Y.op){case"array-contains-any":return Y.value.arrayValue.values||[];case"array-contains":return[Y.value]}return null}(c,u),f=function(M,H){let W=new Map;for(let Y of io(H))for(let Ie of pf(M,Y.fieldPath))switch(Ie.op){case"==":case"in":W.set(Y.fieldPath.canonicalString(),Ie.value);break;case"not-in":case"!=":return W.set(Y.fieldPath.canonicalString(),Ie.value),Array.from(W.values())}return null}(c,u),m=function(M,H){let W=[],Y=!0;for(let Ie of io(H)){let yt=Ie.kind===0?wx(M,Ie.fieldPath,M.startAt):Ix(M,Ie.fieldPath,M.startAt);W.push(yt.value),Y&&(Y=yt.inclusive)}return new nr(W,Y)}(c,u),y=function(M,H){let W=[],Y=!0;for(let Ie of io(H)){let yt=Ie.kind===0?Ix(M,Ie.fieldPath,M.endAt):wx(M,Ie.fieldPath,M.endAt);W.push(yt.value),Y&&(Y=yt.inclusive)}return new nr(W,Y)}(c,u),w=this.ln(u,c,m),_=this.ln(u,c,y),T=this.hn(u,c,f),x=this.Pn(u.indexId,d,w,m.inclusive,_,y.inclusive,T);return I.forEach(x,V=>r.G(V,n.limit).next(M=>{M.forEach(H=>{let W=N.fromSegments(H.documentKey);s.has(W)||(s=s.add(W),a.push(W))})}))}).next(()=>a)}return I.resolve(null)})}un(e){let n=this.an.get(e);return n||(e.filters.length===0?n=[e]:n=d4(De.create(e.filters,"and")).map(r=>Ww(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,r,i,o,s,a){let u=(n!=null?n.length:1)*Math.max(r.length,o.length),c=u/(n!=null?n.length:1),d=[];for(let f=0;f<u;++f){let m=n?this.In(n[f/c]):Wh,y=this.Tn(e,m,r[f%c],i),w=this.En(e,m,o[f%c],s),_=a.map(T=>this.Tn(e,m,T,!0));d.push(...this.createRange(y,w,_))}return d}Tn(e,n,r,i){let o=new uo(e,N.empty(),n,r);return i?o:o.Ht()}En(e,n,r,i){let o=new uo(e,N.empty(),n,r);return i?o.Ht():o}cn(e,n){let r=new Ef(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.en(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let r=2,i=this.un(n);return I.forEach(i,o=>this.cn(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let c=new Se(Ge.comparator),d=!1;for(let f of u.filters)for(let m of f.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?d=!0:c=c.add(m.field));for(let f of u.orderBy)f.field.isKeyField()||(c=c.add(f.field));return c.size+(d?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(n)&&i.length>1&&r===2?1:r)}dn(e,n){let r=new ao;for(let i of io(e)){let o=n.data.field(i.fieldPath);if(o==null)return null;let s=r.jt(i.kind);_r.St.ht(o,s)}return r.Ut()}In(e){let n=new ao;return _r.St.ht(e,n.jt(0)),n.Ut()}An(e,n){let r=new ao;return _r.St.ht(fo(this.databaseId,n),r.jt(function(o){let s=io(o);return s.length===0?0:s[s.length-1].kind}(e))),r.Ut()}hn(e,n,r){if(r===null)return[];let i=[];i.push(new ao);let o=0;for(let s of io(e)){let a=r[o++];for(let u of i)if(this.Rn(n,s.fieldPath)&&vc(a))i=this.Vn(i,s,a);else{let c=u.jt(s.kind);_r.St.ht(a,c)}}return this.mn(i)}ln(e,n,r){return this.hn(e,n,r.position)}mn(e){let n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Ut();return n}Vn(e,n,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new ao;u.seed(a.Ut()),_r.St.ht(s,u.jt(n.kind)),o.push(u)}return o}Rn(e,n){return!!e.filters.find(r=>r instanceof le&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){let r=rc(e),i=Ls(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(o=>{let s=[];return I.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(d,f){let m=f?new fc(f.sequenceNumber,new fn(vo(f.readTime),new N(Yn(f.documentKey)),f.largestBatchId)):fc.empty(),y=d.fields.map(([w,_])=>new zs(Ge.fromServerFormat(w),_));return new Qs(d.indexId,d.collectionGroup,y,m)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:te(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){let i=rc(e),o=Ls(e);return this.fn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>I.forEach(a,u=>o.put(kx(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,n){let r=new Map;return I.forEach(n,(i,o)=>{let s=r.get(i.collectionGroup);return(s?I.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),I.forEach(a,u=>this.gn(e,i,u).next(c=>{let d=this.pn(o,u);return c.isEqual(d)?I.resolve():this.yn(e,o,u,c,d)}))))})}wn(e,n,r,i){return Fs(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.An(r,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,r,i){return Fs(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.An(r,n.key),n.key.path.toArray()])}gn(e,n,r){let i=Fs(e),o=new Se(Jr);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.An(r,n)])},(s,a)=>{o=o.add(new uo(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}pn(e,n){let r=new Se(Jr),i=this.dn(n,e);if(i==null)return r;let o=Mw(n);if(o!=null){let s=e.data.field(o.fieldPath);if(vc(s))for(let a of s.arrayValue.values||[])r=r.add(new uo(n.indexId,e.key,this.In(a),i))}else r=r.add(new uo(n.indexId,e.key,Wh,i));return r}yn(e,n,r,i,o){A("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let s=[];return function(u,c,d,f,m){let y=u.getIterator(),w=c.getIterator(),_=Os(y),T=Os(w);for(;_||T;){let x=!1,V=!1;if(_&&T){let M=d(_,T);M<0?V=!0:M>0&&(x=!0)}else _!=null?V=!0:x=!0;x?(f(T),T=Os(w)):V?(m(_),_=Os(y)):(_=Os(y),T=Os(w))}}(i,o,Jr,a=>{s.push(this.wn(e,n,r,a))},a=>{s.push(this.Sn(e,n,r,a))}),I.waitFor(s)}fn(e){let n=1;return Ls(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((s,a)=>Jr(s,a)).filter((s,a,u)=>!a||Jr(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=Jr(s,e),u=Jr(s,n);if(a===0)i[0]=e.Ht();else if(a>0&&u<0)i.push(s),i.push(s.Ht());else if(u>0)break}i.push(n);let o=[];for(let s=0;s<i.length;s+=2){if(this.bn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Wh,[]],u=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Wh,[]];o.push(IDBKeyRange.bound(a,u))}return o}bn(e,n){return Jr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Ux)}getMinOffset(e,n){return I.mapArray(this.un(n),r=>this.cn(e,r).next(i=>i||L())).next(Ux)}};function Bx(t){return dt(t,"collectionParents")}function Fs(t){return dt(t,"indexEntries")}function rc(t){return dt(t,"indexConfiguration")}function Ls(t){return dt(t,"indexState")}function Ux(t){$(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){let i=t[r].indexState.offset;E_(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new fn(e.readTime,e.documentKey,n)}var $x={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},dn=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function cR(t,e,n){let r=t.store("mutations"),i=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.J({range:s},(d,f,m)=>(a++,m.delete()));o.push(u.next(()=>{$(a===1)}));let c=[];for(let d of n.mutations){let f=gM(e,d.key.path,n.batchId);o.push(i.delete(f)),c.push(d.key)}return I.waitFor(o).next(()=>c)}function bf(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw L();e=t.noDocument}return JSON.stringify(e).length}dn.DEFAULT_COLLECTION_PERCENTILE=10,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dn.DEFAULT=new dn(41943040,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dn.DISABLED=new dn(-1,0,0);var Cf=class t{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Dn={}}static ct(e,n,r,i){$(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new t(o,n,r,i)}checkEmpty(e){let n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Xr(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,r,i){let o=Hs(e),s=Xr(e);return s.add({}).next(a=>{$(typeof a=="number");let u=new Ic(a,n,r,i),c=function(y,w,_){let T=_.baseMutations.map(V=>Cc(y.ut,V)),x=_.mutations.map(V=>Cc(y.ut,V));return{userId:w,batchId:_.batchId,localWriteTimeMs:_.localWriteTime.toMillis(),baseMutations:T,mutations:x}}(this.serializer,this.userId,u),d=[],f=new Se((m,y)=>te(m.canonicalString(),y.canonicalString()));for(let m of i){let y=gM(this.userId,m.key.path,a);f=f.add(m.key.path.popLast()),d.push(s.put(c)),d.push(o.put(y,vq))}return f.forEach(m=>{d.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Dn[a]=u.keys()}),I.waitFor(d).next(()=>u)})}lookupMutationBatch(e,n){return Xr(e).get(n).next(r=>r?($(r.userId===this.userId),so(this.serializer,r)):null)}Cn(e,n){return this.Dn[n]?I.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){let i=r.keys();return this.Dn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Xr(e).J({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&($(a.batchId>=r),o=so(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Xr(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Xr(e).U("userMutationsIndex",n).next(r=>r.map(i=>so(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){let r=Zh(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return Hs(e).J({range:i},(s,a,u)=>{let[c,d,f]=s,m=Yn(d);if(c===this.userId&&n.path.isEqual(m))return Xr(e).get(f).next(y=>{if(!y)throw L();$(y.userId===this.userId),o.push(so(this.serializer,y))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Se(te),i=[];return n.forEach(o=>{let s=Zh(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=Hs(e).J({range:a},(c,d,f)=>{let[m,y,w]=c,_=Yn(y);m===this.userId&&o.path.isEqual(_)?r=r.add(w):f.done()});i.push(u)}),I.waitFor(i).next(()=>this.vn(e,r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=Zh(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Se(te);return Hs(e).J({range:s},(u,c,d)=>{let[f,m,y]=u,w=Yn(m);f===this.userId&&r.isPrefixOf(w)?w.length===i&&(a=a.add(y)):d.done()}).next(()=>this.vn(e,a))}vn(e,n){let r=[],i=[];return n.forEach(o=>{i.push(Xr(e).get(o).next(s=>{if(s===null)throw L();$(s.userId===this.userId),r.push(so(this.serializer,s))}))}),I.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return cR(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),I.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return I.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Hs(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=Yn(o[1]);i.push(u)}else a.done()}).next(()=>{$(i.length===0)})})}containsKey(e,n){return lR(e,this.userId,n)}Mn(e){return dR(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function lR(t,e,n){let r=Zh(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Hs(t).J({range:o,H:!0},(a,u,c)=>{let[d,f,m]=a;d===e&&f===i&&(s=!0),c.done()}).next(()=>s)}function Xr(t){return dt(t,"mutations")}function Hs(t){return dt(t,"documentMutations")}function dR(t){return dt(t,"mutationQueues")}var na=class t{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new t(0)}static Nn(){return new t(-1)}};var pI=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Ln(e).next(n=>{let r=new na(n.highestTargetId);return n.highestTargetId=r.next(),this.Bn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ln(e).next(n=>z.fromTimestamp(new Oe(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ln(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Ln(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Bn(e,i)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Ln(e).next(r=>(r.targetCount+=1,this.qn(n,r),this.Bn(e,r))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Vs(e).delete(n.targetId)).next(()=>this.Ln(e)).next(r=>($(r.targetCount>0),r.targetCount-=1,this.Bn(e,r)))}removeTargets(e,n,r){let i=0,o=[];return Vs(e).J((s,a)=>{let u=ac(a);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>I.waitFor(o)).next(()=>i)}forEachTarget(e,n){return Vs(e).J((r,i)=>{let o=ac(i);n(o)})}Ln(e){return Hx(e).get("targetGlobalKey").next(n=>($(n!==null),n))}Bn(e,n){return Hx(e).put("targetGlobalKey",n)}kn(e,n){return Vs(e).put(sR(this.serializer,n))}qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Ln(e).next(n=>n.targetCount)}getTargetData(e,n){let r=go(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Vs(e).J({range:i,index:"queryTargetsIndex"},(s,a,u)=>{let c=ac(a);Fc(n,c.target)&&(o=c,u.done())}).next(()=>o)}addMatchingKeys(e,n,r){let i=[],o=ei(e);return n.forEach(s=>{let a=Rt(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),I.waitFor(i)}removeMatchingKeys(e,n,r){let i=ei(e);return I.forEach(n,o=>{let s=Rt(o.path);return I.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,n){let r=ei(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){let r=IDBKeyRange.bound([n],[n+1],!1,!0),i=ei(e),o=ne();return i.J({range:r,H:!0},(s,a,u)=>{let c=Yn(s[1]),d=new N(c);o=o.add(d)}).next(()=>o)}containsKey(e,n){let r=Rt(n.path),i=IDBKeyRange.bound([r],[cM(r)],!1,!0),o=0;return ei(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],u,c)=>{s!==0&&(o++,c.done())}).next(()=>o>0)}ot(e,n){return Vs(e).get(n).next(r=>r?ac(r):null)}};function Vs(t){return dt(t,"targets")}function Hx(t){return dt(t,"targetGlobal")}function ei(t){return dt(t,"targetDocuments")}function qx([t,e],[n,r]){let i=te(t,n);return i===0?te(e,r):i}var gI=class{constructor(e){this.Qn=e,this.buffer=new Se(qx),this.Kn=0}$n(){return++this.Kn}Un(e){let n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();qx(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},mI=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Wn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return this.Wn!==null}Gn(e){A("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>D(this,null,function*(){this.Wn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){gi(n)?A("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield pi(n)}yield this.Gn(3e5)}))}},yI=class{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return I.resolve(tn.oe);let r=new gI(n);return this.zn.forEachTarget(e,i=>r.Un(i.sequenceNumber)).next(()=>this.zn.Hn(e,i=>r.Un(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(A("LruGarbageCollector","Garbage collection skipped; disabled"),I.resolve($x)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(A("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$x):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let r,i,o,s,a,u,c,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(A("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(o=f,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(c=Date.now(),js()<=kn.DEBUG&&A("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${f} documents in `+(c-u)+`ms
Total Duration: ${c-d}ms`),I.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}};function h4(t,e){return new yI(t,e)}var vI=class{constructor(e,n){this.db=e,this.garbageCollector=h4(this,n)}jn(e){let n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Yn(e){let n=0;return this.Hn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(r,i)=>n(i))}addReference(e,n,r){return Kh(e,r)}removeReference(e,n,r){return Kh(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Kh(e,n)}Xn(e,n){return function(i,o){let s=!1;return dR(i).Y(a=>lR(i,a,o).next(u=>(u&&(s=!0),I.resolve(!u)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.Zn(e,(s,a)=>{if(a<=n){let u=this.Xn(e,s).next(c=>{if(!c)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,z.min()),ei(e).delete(function(f){return[0,Rt(f.path)]}(s))))});i.push(u)}}).next(()=>I.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Kh(e,n)}Zn(e,n){let r=ei(e),i,o=tn.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:c})=>{s===0?(o!==tn.oe&&n(new N(Yn(i)),o),o=c,i=u):o=tn.oe}).next(()=>{o!==tn.oe&&n(new N(Yn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Kh(t,e){return ei(t).put(function(r,i){return{targetId:0,path:Rt(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}var Tf=class{constructor(){this.changes=new rr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Xe.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?I.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var wI=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return ro(e).put(r)}removeEntry(e,n,r){return ro(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],If(s),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.er(e,r)))}getEntry(e,n){let r=Xe.newInvalidDocument(n);return ro(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ic(n))},(i,o)=>{r=this.tr(n,o)}).next(()=>r)}nr(e,n){let r={size:0,document:Xe.newInvalidDocument(n)};return ro(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ic(n))},(i,o)=>{r={document:this.tr(n,o),size:bf(o)}}).next(()=>r)}getEntries(e,n){let r=qt();return this.rr(e,n,(i,o)=>{let s=this.tr(i,o);r=r.insert(i,s)}).next(()=>r)}ir(e,n){let r=qt(),i=new Re(N.comparator);return this.rr(e,n,(o,s)=>{let a=this.tr(o,s);r=r.insert(o,a),i=i.insert(o,bf(s))}).next(()=>({documents:r,sr:i}))}rr(e,n,r){if(n.isEmpty())return I.resolve();let i=new Se(Wx);n.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(ic(i.first()),ic(i.last())),s=i.getIterator(),a=s.getNext();return ro(e).J({index:"documentKeyIndex",range:o},(u,c,d)=>{let f=N.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&Wx(a,f)<0;)r(a,null),a=s.getNext();a&&a.isEqual(f)&&(r(a,c),a=s.hasNext()?s.getNext():null),a?d.$(ic(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,o){let s=n.path,a=[s.popLast().toArray(),s.lastSegment(),If(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ro(e).U(IDBKeyRange.bound(a,u,!0)).next(c=>{o?.incrementDocumentReadCount(c.length);let d=qt();for(let f of c){let m=this.tr(N.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);m.isFoundDocument()&&(Vc(n,m)||i.has(m.key))&&(d=d.insert(m.key,m))}return d})}getAllFromCollectionGroup(e,n,r,i){let o=qt(),s=Gx(n,r),a=Gx(n,fn.max());return ro(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,c,d)=>{let f=this.tr(N.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);o=o.insert(f.key,f),o.size===i&&d.done()}).next(()=>o)}newChangeBuffer(e){return new II(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return zx(e).get("remoteDocumentGlobalKey").next(n=>($(!!n),n))}er(e,n){return zx(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){let r=c4(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(z.min())))return r}return Xe.newInvalidDocument(e)}};function hR(t){return new wI(t)}var II=class extends Tf{constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new rr(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let n=[],r=0,i=new Se((o,s)=>te(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.ar.get(o);if(n.push(this._r.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=Nx(this._r.serializer,s);i=i.add(o.path.popLast());let c=bf(u);r+=c-a.size,n.push(this._r.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=Nx(this._r.serializer,s.convertToNoDocument(z.min()));n.push(this._r.addEntry(e,o,u))}}),i.forEach(o=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,o))}),n.push(this._r.updateMetadata(e,r)),I.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(r=>(this.ar.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:r,sr:i})=>(i.forEach((o,s)=>{this.ar.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function zx(t){return dt(t,"remoteDocumentGlobal")}function ro(t){return dt(t,"remoteDocumentsV14")}function ic(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Gx(t,e){let n=e.documentKey.path.toArray();return[t,If(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Wx(t,e){let n=t.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=te(n[o],r[o]),i)return i;return i=te(n.length,r.length),i||(i=te(n[n.length-2],r[r.length-2]),i||te(n[n.length-1],r[r.length-1]))}var _I=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Sf=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&lc(r.mutation,i,nn.empty(),Oe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ne()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ne()){let i=Zn();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=sc();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Zn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ne()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=qt(),s=cc(),a=function(){return cc()}();return n.forEach((u,c)=>{let d=r.get(c.key);i.has(c.key)&&(d===void 0||d.mutation instanceof An)?o=o.insert(c.key,c):d!==void 0?(s.set(c.key,d.mutation.getFieldMask()),lc(d.mutation,c,d.mutation.getFieldMask(),Oe.now())):s.set(c.key,nn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((c,d)=>s.set(c,d)),n.forEach((c,d)=>{var f;return a.set(c,new _I(d,(f=s.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){let r=cc(),i=new Re((s,a)=>s-a),o=ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let c=n.get(u);if(c===null)return;let d=r.get(u)||nn.empty();d=a.applyToLocalView(c,d),r.set(u,d);let f=(i.get(a.batchId)||ne()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),c=u.key,d=u.value,f=OM();d.forEach(m=>{if(!o.has(m)){let y=HM(n.get(m),r.get(m));y!==null&&f.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,c,f))}return I.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return N.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):T_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):I.resolve(Zn()),a=-1,u=o;return s.next(c=>I.forEach(c,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(d)?I.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{u=u.insert(d,m)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,u,c,ne())).next(d=>({batchId:a,changes:kM(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new N(n)).next(r=>{let i=sc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=sc();return this.indexManager.getCollectionParents(e,o).next(a=>I.forEach(a,u=>{let c=function(f,m){return new Sn(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(d=>{d.forEach((f,m)=>{s=s.insert(f,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,c)=>{let d=c.getKey();s.get(d)===null&&(s=s.insert(d,Xe.newInvalidDocument(d)))});let a=sc();return s.forEach((u,c)=>{let d=o.get(u);d!==void 0&&lc(d.mutation,c,nn.empty(),Oe.now()),Vc(n,c)&&(a=a.insert(u,c))}),a})}};var EI=class{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return I.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,function(i){return{id:i.id,version:i.version,createTime:We(i.createTime)}}(n)),I.resolve()}getNamedQuery(e,n){return I.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,function(i){return{name:i.name,query:x_(i.bundledQuery),readTime:We(i.readTime)}}(n)),I.resolve()}};var DI=class{constructor(){this.overlays=new Re(N.comparator),this.lr=new Map}getOverlay(e,n){return I.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Zn();return I.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.lt(e,n,o)}),I.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.lr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.lr.delete(r)),I.resolve()}getOverlaysForCollection(e,n,r){let i=Zn(),o=n.length+1,s=new N(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return I.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Re((c,d)=>c-d),s=this.overlays.getIterator();for(;s.hasNext();){let c=s.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=o.get(c.largestBatchId);d===null&&(d=Zn(),o=o.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}let a=Zn(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=i)););return I.resolve(a)}lt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new _c(n,r));let o=this.lr.get(n);o===void 0&&(o=ne(),this.lr.set(n,o)),this.lr.set(n,o.add(r.key))}};var Sc=class{constructor(){this.hr=new Se(Ye.Pr),this.Ir=new Se(Ye.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){let r=new Ye(e,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.dr(new Ye(e,n))}Ar(e,n){e.forEach(r=>this.removeReference(r,n))}Rr(e){let n=new N(new pe([])),r=new Ye(n,e),i=new Ye(n,e+1),o=[];return this.Ir.forEachInRange([r,i],s=>{this.dr(s),o.push(s.key)}),o}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){let n=new N(new pe([])),r=new Ye(n,e),i=new Ye(n,e+1),o=ne();return this.Ir.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Ye(e,0),r=this.hr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Ye=class{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return N.comparator(e.key,n.key)||te(e.gr,n.gr)}static Tr(e,n){return te(e.gr,n.gr)||N.comparator(e.key,n.key)}};var bI=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new Se(Ye.Pr)}checkEmpty(e){return I.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Ic(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.yr=this.yr.add(new Ye(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return I.resolve(s)}lookupMutationBatch(e,n){return I.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Sr(r),o=i<0?0:i;return I.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return I.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(e){return I.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Ye(n,0),i=new Ye(n,Number.POSITIVE_INFINITY),o=[];return this.yr.forEachInRange([r,i],s=>{let a=this.wr(s.gr);o.push(a)}),I.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Se(te);return n.forEach(i=>{let o=new Ye(i,0),s=new Ye(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([o,s],a=>{r=r.add(a.gr)})}),I.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;N.isDocumentKey(o)||(o=o.child(""));let s=new Ye(new N(o),0),a=new Se(te);return this.yr.forEachWhile(u=>{let c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.gr)),!0)},s),I.resolve(this.br(a))}br(e){let n=[];return e.forEach(r=>{let i=this.wr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){$(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.yr;return I.forEach(n.mutations,i=>{let o=new Ye(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,n){let r=new Ye(n,0),i=this.yr.firstAfterOrEqual(r);return I.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,I.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}wr(e){let n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var CI=class{constructor(e){this.Cr=e,this.docs=function(){return new Re(N.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return I.resolve(r?r.document.mutableCopy():Xe.newInvalidDocument(n))}getEntries(e,n){let r=qt();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Xe.newInvalidDocument(i))}),I.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=qt(),s=n.path,a=new N(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:c,value:{document:d}}=u.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||E_(dM(d),r)<=0||(i.has(d.key)||Vc(n,d))&&(o=o.insert(d.key,d.mutableCopy()))}return I.resolve(o)}getAllFromCollectionGroup(e,n,r,i){L()}vr(e,n){return I.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new TI(this)}getSize(e){return I.resolve(this.size)}},TI=class extends Tf{constructor(e){super(),this._r=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),I.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}};var SI=class{constructor(e){this.persistence=e,this.Fr=new rr(n=>go(n),Fc),this.lastRemoteSnapshotVersion=z.min(),this.highestTargetId=0,this.Mr=0,this.Or=new Sc,this.targetCount=0,this.Nr=na.On()}forEachTarget(e,n){return this.Fr.forEach((r,i)=>n(i)),I.resolve()}getLastRemoteSnapshotVersion(e){return I.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return I.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),I.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),I.resolve()}kn(e){this.Fr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Nr=new na(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,I.resolve()}updateTargetData(e,n){return this.kn(n),I.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,I.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.Fr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Fr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),I.waitFor(o).next(()=>i)}getTargetCount(e){return I.resolve(this.targetCount)}getTargetData(e,n){let r=this.Fr.get(n)||null;return I.resolve(r)}addMatchingKeys(e,n,r){return this.Or.Er(n,r),I.resolve()}removeMatchingKeys(e,n,r){this.Or.Ar(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),I.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),I.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Or.mr(n);return I.resolve(r)}containsKey(e,n){return I.resolve(this.Or.containsKey(n))}};var Af=class{constructor(e,n){this.Lr={},this.overlays={},this.Br=new tn(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new SI(this),this.indexManager=new hI,this.remoteDocumentCache=function(i){return new CI(i)}(r=>this.referenceDelegate.Qr(r)),this.serializer=new wf(n),this.Kr=new EI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new DI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new bI(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,r){A("MemoryPersistence","Starting transaction:",e);let i=new AI(this.Br.next());return this.referenceDelegate.$r(),r(i).next(o=>this.referenceDelegate.Ur(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Wr(e,n){return I.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}},AI=class extends af{constructor(e){super(),this.currentSequenceNumber=e}},xf=class t{constructor(e){this.persistence=e,this.Gr=new Sc,this.zr=null}static jr(e){return new t(e)}get Hr(){if(this.zr)return this.zr;throw L()}addReference(e,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),I.resolve()}removeReference(e,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),I.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),I.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Hr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return I.forEach(this.Hr,r=>{let i=N.fromPath(r);return this.Jr(e,i).next(o=>{o||n.removeEntry(i,z.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return I.or([()=>I.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}};var xI=class{constructor(e){this.serializer=e}O(e,n,r,i){let o=new uf("createOrUpgrade",n);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",lx,{unique:!0}),u.createObjectStore("documentMutations")}(e),Kx(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=I.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),Kx(e)),s=s.next(()=>function(u){let c=u.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:z.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",d)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,c){return c.store("mutations").U().next(d=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",lx,{unique:!0});let f=c.store("mutations"),m=d.map(y=>f.put(y));return I.waitFor(m)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.Zr(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(o)))),r<7&&i>=7&&(s=s.next(()=>this.ei(o))),r<8&&i>=8&&(s=s.next(()=>this.ti(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.ni(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let c=u.createObjectStore("documentOverlays",{keyPath:Mq});c.createIndex("collectionPathOverlayIndex",Rq,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",Nq,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){let c=u.createObjectStore("remoteDocumentsV14",{keyPath:wq});c.createIndex("documentKeyIndex",Iq),c.createIndex("collectionGroupIndex",_q)}(e)).next(()=>this.ri(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ii(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:Tq}).createIndex("sequenceNumberIndex",Sq,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:Aq}).createIndex("documentKeyIndex",xq,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),s}Xr(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=bf(i)}).next(()=>{let r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Zr(e){let n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>I.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>I.forEach(a,u=>{$(u.userId===o.userId);let c=so(this.serializer,u);return cR(e,o.userId,c).next(()=>{})}))}))}ei(e){let n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let u=new pe(s),c=function(f){return[0,Rt(f)]}(u);o.push(n.get(c).next(d=>d?I.resolve():(f=>n.put({targetId:0,path:Rt(f),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>I.waitFor(o))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:Cq});let r=n.store("collectionParents"),i=new Tc,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:Rt(u)})}};return n.store("remoteDocuments").J({H:!0},(s,a)=>{let u=new pe(s);return o(u.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([s,a,u],c)=>{let d=Yn(a);return o(d.popLast())}))}ni(e){let n=e.store("targets");return n.J((r,i)=>{let o=ac(i),s=sR(this.serializer,o);return n.put(s)})}ri(e,n){let r=n.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=n.store("remoteDocumentsV14"),u=function(f){return f.document?new N(pe.fromString(f.document.name).popFirst(5)):f.noDocument?N.fromSegments(f.noDocument.path):f.unknownDocument?N.fromSegments(f.unknownDocument.path):L()}(s).path.toArray(),c={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(c))}).next(()=>I.waitFor(i))}ii(e,n){let r=n.store("mutations"),i=hR(this.serializer),o=new Af(xf.jr,this.serializer.ut);return r.U().next(s=>{let a=new Map;return s.forEach(u=>{var c;let d=(c=a.get(u.userId))!==null&&c!==void 0?c:ne();so(this.serializer,u).keys().forEach(f=>d=d.add(f)),a.set(u.userId,d)}),I.forEach(a,(u,c)=>{let d=new Ze(c),f=_f.ct(this.serializer,d),m=o.getIndexManager(d),y=Cf.ct(d,this.serializer,m,o.referenceDelegate);return new Sf(i,y,f,m).recalculateAndSaveOverlaysForDocumentKeys(new gc(n,tn.oe),u).next()})})}};function Kx(t){t.createObjectStore("targetDocuments",{keyPath:Dq}).createIndex("documentTargetsIndex",bq,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Eq,{unique:!0}),t.createObjectStore("targetGlobal")}var Iw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",MI=class t{constructor(e,n,r,i,o,s,a,u,c,d,f=16){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.si=o,this.window=s,this.document=a,this.oi=c,this._i=d,this.ai=f,this.Br=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=m=>Promise.resolve(),!t.D())throw new S(E.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new vI(this,i),this.Ii=n+"main",this.serializer=new wf(u),this.Ti=new oi(this.Ii,this.ai,new xI(this.serializer)),this.qr=new pI(this.referenceDelegate,this.serializer),this.remoteDocumentCache=hR(this.serializer),this.Kr=new oI,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,d===!1&&ze("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new S(E.FAILED_PRECONDITION,Iw);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Br=new tn(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){return this.Pi=n=>D(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(n=>D(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget(()=>D(this,null,function*(){this.started&&(yield this.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Qh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if(gi(e))return A("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return A("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return oc(e).get("owner").next(n=>I.resolve(this.wi(n)))}Si(e){return Qh(e).delete(this.clientId)}bi(){return D(this,null,function*(){if(this.isPrimary&&!this.Di(this.hi,18e5)){this.hi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let r=dt(n,"clientMetadata");return r.U().next(i=>{let o=this.Ci(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return I.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Ei)for(let n of e)this.Ei.removeItem(this.vi(n.clientId))}})}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?I.resolve(!0):oc(e).get("owner").next(n=>{if(n!==null&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new S(E.FAILED_PRECONDITION,Iw);return!1}}return!(!this.networkEnabled||!this.inForeground)||Qh(e).U().next(r=>this.Ci(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&A("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return D(this,null,function*(){this.kr=!1,this.Mi(),this.li&&(this.li.cancel(),this.li=null),this.xi(),this.Oi(),yield this.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new gc(e,tn.oe);return this.pi(n).next(()=>this.Si(n))}),this.Ti.close(),this.Ni()})}Ci(e,n){return e.filter(r=>this.Di(r.updateTimeMs,n)&&!this.Fi(r.clientId))}Li(){return this.runTransaction("getActiveClients","readonly",e=>Qh(e).U().next(n=>this.Ci(n,18e5).map(r=>r.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return Cf.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new fI(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return _f.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,r){A("IndexedDbPersistence","Starting transaction:",e);let i=n==="readonly"?"readonly":"readwrite",o=function(u){return u===16?kq:u===15?wM:u===14?vM:u===13?yM:u===12?Pq:u===11?mM:void L()}(this.ai),s;return this.Ti.runTransaction(e,i,o,a=>(s=new gc(a,this.Br?this.Br.next():tn.oe),n==="readwrite-primary"?this.fi(s).next(u=>!!u||this.gi(s)).next(u=>{if(!u)throw ze(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new S(E.FAILED_PRECONDITION,hM);return r(s)}).next(u=>this.yi(s).next(()=>u)):this.Bi(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Bi(e){return oc(e).get("owner").next(n=>{if(n!==null&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new S(E.FAILED_PRECONDITION,Iw)})}yi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return oc(e).put("owner",n)}static D(){return oi.D()}pi(e){let n=oc(e);return n.get("owner").next(r=>this.wi(r)?(A("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):I.resolve())}Di(e,n){let r=Date.now();return!(e<r-n)&&(!(e>r)||(ze(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ai(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground=this.document.visibilityState==="visible")}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ui=()=>{this.Mi();let n=/(?:Version|Mobile)\/1[456]/;Op()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{let r=((n=this.Ei)===null||n===void 0?void 0:n.getItem(this.vi(e)))!==null;return A("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ze("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){ze("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function oc(t){return dt(t,"owner")}function Qh(t){return dt(t,"clientMetadata")}function R_(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var RI=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ki=r,this.qi=i}static Qi(e,n){let r=ne(),i=ne();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var NI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Mf=class{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=function(){return Op()?8:fM(xa())>0?6:4}()}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.zi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ji(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new NI;return this.Hi(e,n,s).next(a=>{if(o.result=a,this.$i)return this.Ji(e,n,s,a.size)})}).next(()=>o.result)}Ji(e,n,r,i){return r.documentReadCount<this.Ui?(js()<=kn.DEBUG&&A("QueryEngine","SDK will not create cache indexes for query:",Bs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),I.resolve()):(js()<=kn.DEBUG&&A("QueryEngine","Query:",Bs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?(js()<=kn.DEBUG&&A("QueryEngine","The SDK decides to create cache indexes for query:",Bs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nt(n))):I.resolve())}zi(e,n){if(_x(n))return I.resolve(null);let r=Nt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=gf(n,null,"F"),r=Nt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ne(...o);return this.Gi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let c=this.Yi(n,a);return this.Zi(n,c,s,u.readTime)?this.zi(e,gf(n,null,"F")):this.Xi(e,c,n,u)}))})))}ji(e,n,r,i){return _x(n)||i.isEqual(z.min())?I.resolve(null):this.Gi.getDocuments(e,r).next(o=>{let s=this.Yi(n,o);return this.Zi(n,s,r,i)?I.resolve(null):(js()<=kn.DEBUG&&A("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Bs(n)),this.Xi(e,s,n,lM(i,-1)).next(a=>a))})}Yi(e,n){let r=new Se(NM(e));return n.forEach((i,o)=>{Vc(e,o)&&(r=r.add(o))}),r}Zi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Hi(e,n,r){return js()<=kn.DEBUG&&A("QueryEngine","Using full collection scan to execute query:",Bs(n)),this.Gi.getDocumentsMatchingQuery(e,n,fn.min(),r)}Xi(e,n,r,i){return this.Gi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var PI=class{constructor(e,n,r,i){this.persistence=e,this.es=n,this.serializer=i,this.ts=new Re(te),this.ns=new rr(o=>go(o),Fc),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Sf(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}};function fR(t,e,n,r){return new PI(t,e,n,r)}function pR(t,e){return D(this,null,function*(){let n=P(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.os(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=ne();for(let c of i){s.push(c.batchId);for(let d of c.mutations)u=u.add(d.key)}for(let c of o){a.push(c.batchId);for(let d of c.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(r,u).next(c=>({_s:c,removedBatchIds:s,addedBatchIds:a}))})})})}function f4(t,e){let n=P(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,u,c,d){let f=c.batch,m=f.keys(),y=I.resolve();return m.forEach(w=>{y=y.next(()=>d.getEntry(u,w)).next(_=>{let T=c.docVersions.get(w);$(T!==null),_.version.compareTo(T)<0&&(f.applyToRemoteDocument(_,c),_.isValidDocument()&&(_.setReadTime(c.commitVersion),d.addEntry(_)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ne();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function gR(t){let e=P(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function p4(t,e){let n=P(t),r=e.snapshotVersion,i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;let a=[];e.targetChanges.forEach((d,f)=>{let m=i.get(f);if(!m)return;a.push(n.qr.removeMatchingKeys(o,d.removedDocuments,f).next(()=>n.qr.addMatchingKeys(o,d.addedDocuments,f)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(lt.EMPTY_BYTE_STRING,z.min()).withLastLimboFreeSnapshotVersion(z.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(f,y),function(_,T,x){return _.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(m,y,d)&&a.push(n.qr.updateTargetData(o,y))});let u=qt(),c=ne();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(mR(o,s,e.documentUpdates).next(d=>{u=d.us,c=d.cs})),!r.isEqual(z.min())){let d=n.qr.getLastRemoteSnapshotVersion(o).next(f=>n.qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return I.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,c)).next(()=>u)}).then(o=>(n.ts=i,o))}function mR(t,e,n){let r=ne(),i=ne();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=qt();return n.forEach((a,u)=>{let c=o.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(z.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):A("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{us:s,cs:i}})}function g4(t,e){let n=P(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ra(t,e){let n=P(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,e).next(o=>o?(i=o,I.resolve(i)):n.qr.allocateTargetId(r).next(s=>(i=new ta(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(e,r.targetId)),r})}function ia(t,e,n){return D(this,null,function*(){let r=P(t),i=r.ts.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!gi(s))throw s;A("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ts=r.ts.remove(e),r.ns.delete(i.target)})}function Rf(t,e,n){let r=P(t),i=z.min(),o=ne();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,c,d){let f=P(u),m=f.ns.get(d);return m!==void 0?I.resolve(f.ts.get(m)):f.qr.getTargetData(c,d)}(r,s,Nt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.es.getDocumentsMatchingQuery(s,e,n?i:z.min(),n?o:ne())).next(a=>(wR(r,RM(e),a),{documents:a,ls:o})))}function yR(t,e){let n=P(t),r=P(n.qr),i=n.ts.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function vR(t,e){let n=P(t),r=n.rs.get(e)||z.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.ss.getAllFromCollectionGroup(i,e,lM(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(wR(n,e,i),i))}function wR(t,e,n){let r=t.rs.get(e)||z.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.rs.set(e,r)}function m4(t,e,n,r){return D(this,null,function*(){let i=P(t),o=ne(),s=qt();for(let c of n){let d=e.hs(c.metadata.name);c.document&&(o=o.add(d));let f=e.Ps(c);f.setReadTime(e.Is(c.metadata.readTime)),s=s.insert(d,f)}let a=i.ss.newChangeBuffer({trackRemovals:!0}),u=yield ra(i,function(d){return Nt(ha(pe.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>mR(c,a,s).next(d=>(a.apply(c),d)).next(d=>i.qr.removeMatchingKeysForTargetId(c,u.targetId).next(()=>i.qr.addMatchingKeys(c,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,d.us,d.cs)).next(()=>d.us)))})}function y4(r,i){return D(this,arguments,function*(t,e,n=ne()){let o=yield ra(t,Nt(x_(e.bundledQuery))),s=P(t);return s.persistence.runTransaction("Save named query","readwrite",a=>{let u=We(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.Kr.saveNamedQuery(a,e);let c=o.withResumeToken(lt.EMPTY_BYTE_STRING,u);return s.ts=s.ts.insert(c.targetId,c),s.qr.updateTargetData(a,c).next(()=>s.qr.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.qr.addMatchingKeys(a,n,o.targetId)).next(()=>s.Kr.saveNamedQuery(a,e))})})}function Qx(t,e){return`firestore_clients_${t}_${e}`}function Yx(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function _w(t,e){return`firestore_targets_${t}_${e}`}var Nf=class t{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ts(e,n,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new S(i.error.code,i.error.message))),s?new t(e,n,i.state,o):(ze("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Es(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},dc=class t{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ts(e,n){let r=JSON.parse(n),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new S(r.error.code,r.error.message))),o?new t(e,r.state,i):(ze("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Pf=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){let r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=S_();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=pM(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(ze("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},kI=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(ze("SharedClientState",`Failed to parse online state: ${e}`),null)}},Ac=class{constructor(){this.activeTargetIds=S_()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},hc=class{constructor(e,n,r,i,o){this.window=e,this.si=n,this.persistenceKey=r,this.Rs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new Re(te),this.started=!1,this.ps=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ys=Qx(this.persistenceKey,this.Rs),this.ws=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.gs=this.gs.insert(this.Rs,new Ac),this.Ss=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.Cs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.vs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){return D(this,null,function*(){let e=yield this.syncEngine.Li();for(let r of e){if(r===this.Rs)continue;let i=this.getItem(Qx(this.persistenceKey,r));if(i){let o=Pf.Ts(r,i);o&&(this.gs=this.gs.insert(o.clientId,o))}}this.Fs();let n=this.storage.getItem(this.Cs);if(n){let r=this.Ms(n);r&&this.xs(r)}for(let r of this.ps)this.fs(r);this.ps=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,r){this.Ns(e,n,r),this.Ls(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(_w(this.persistenceKey,e));if(r){let i=dc.Ts(e,r);i&&(n=i.state)}}return this.Bs.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Bs.As(e),this.Fs()}isLocalQueryTarget(e){return this.Bs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(_w(this.persistenceKey,e))}updateQueryState(e,n,r){this.ks(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Ls(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return A("SharedClientState","READ",e,n),n}setItem(e,n){A("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){A("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){let n=e;if(n.storageArea===this.storage){if(A("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ys)return void ze("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable(()=>D(this,null,function*(){if(this.started){if(n.key!==null){if(this.Ss.test(n.key)){if(n.newValue==null){let r=this.Ks(n.key);return this.$s(r,null)}{let r=this.Us(n.key,n.newValue);if(r)return this.$s(r.clientId,r)}}else if(this.bs.test(n.key)){if(n.newValue!==null){let r=this.Ws(n.key,n.newValue);if(r)return this.Gs(r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let r=this.zs(n.key,n.newValue);if(r)return this.js(r)}}else if(n.key===this.Cs){if(n.newValue!==null){let r=this.Ms(n.newValue);if(r)return this.xs(r)}}else if(n.key===this.ws){let r=function(o){let s=tn.oe;if(o!=null)try{let a=JSON.parse(o);$(typeof a=="number"),s=a}catch(a){ze("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(n.newValue);r!==tn.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.vs){let r=this.Hs(n.newValue);yield Promise.all(r.map(i=>this.syncEngine.Js(i)))}}}else this.ps.push(n)}))}}get Bs(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Bs.Es())}Ns(e,n,r){let i=new Nf(this.currentUser,e,n,r),o=Yx(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Es())}Ls(e){let n=Yx(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){let n={clientId:this.Rs,onlineState:e};this.storage.setItem(this.Cs,JSON.stringify(n))}ks(e,n,r){let i=_w(this.persistenceKey,e),o=new dc(e,n,r);this.setItem(i,o.Es())}Qs(e){let n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){let n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){let r=this.Ks(e);return Pf.Ts(r,n)}Ws(e,n){let r=this.bs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Nf.Ts(new Ze(o),i,n)}zs(e,n){let r=this.Ds.exec(e),i=Number(r[1]);return dc.Ts(i,n)}Ms(e){return kI.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){return D(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Ys(e.batchId,e.state,e.error);A("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){let r=n?this.gs.insert(e,n):this.gs.remove(e),i=this.Os(this.gs),o=this.Os(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.Xs(s,a).then(()=>{this.gs=r})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=S_();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}},kf=class{constructor(){this.eo=new Ac,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,r){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new Ac,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var OI=class{ro(e){}shutdown(){}};var Of=class{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){A("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ao)e(0)}_o(){A("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ao)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Yh=null;function Ew(){return Yh===null?Yh=function(){return 268435456+Math.round(2147483648*Math.random())}():Yh++,"0x"+Yh.toString(16)}var v4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var FI=class{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}Eo(e){this.Ao=e}onMessage(e){this.Ro=e}close(){this.lo()}send(e){this.co(e)}Vo(){this.Po()}mo(){this.To()}fo(e){this.Ao(e)}po(e){this.Ro(e)}};var Et="WebChannelConnection",LI=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.yo=r+"://"+n.host,this.wo=`projects/${i}/databases/${o}`,this.So=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get bo(){return!1}Do(n,r,i,o,s){let a=Ew(),u=this.Co(n,r.toUriEncodedString());A("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let c={"google-cloud-resource-prefix":this.wo,"x-goog-request-params":this.So};return this.vo(c,o,s),this.Fo(n,u,c,i).then(d=>(A("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw hn("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",u,"request:",i),d})}Mo(n,r,i,o,s,a){return this.Do(n,r,i,o,s)}vo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+da}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}Co(n,r){let i=v4[n];return`${this.yo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Fo(e,n,r,i){let o=Ew();return new Promise((s,a)=>{let u=new ox;u.setWithCredentials(!0),u.listenOnce(nx.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Gh.NO_ERROR:let d=u.getResponseJson();A(Et,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),s(d);break;case Gh.TIMEOUT:A(Et,`RPC '${e}' ${o} timed out`),a(new S(E.DEADLINE_EXCEEDED,"Request time out"));break;case Gh.HTTP_ERROR:let f=u.getStatus();if(A(Et,`RPC '${e}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let y=m?.error;if(y&&y.status&&y.message){let w=function(T){let x=T.toLowerCase().replace(/_/g,"-");return Object.values(E).indexOf(x)>=0?x:E.UNKNOWN}(y.status);a(new S(w,y.message))}else a(new S(E.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new S(E.UNAVAILABLE,"Connection failed."));break;default:L()}}finally{A(Et,`RPC '${e}' ${o} completed.`)}});let c=JSON.stringify(i);A(Et,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",c,r,15)})}xo(e,n,r){let i=Ew(),o=[this.yo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=ex(),a=tx(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.xmlHttpFactory=new ix({})),this.vo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let d=o.join("");A(Et,`Creating RPC '${e}' stream ${i}: ${d}`,u);let f=s.createWebChannel(d,u),m=!1,y=!1,w=new FI({co:T=>{y?A(Et,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(m||(A(Et,`Opening RPC '${e}' stream ${i} transport.`),f.open(),m=!0),A(Et,`RPC '${e}' stream ${i} sending:`,T),f.send(T))},lo:()=>f.close()}),_=(T,x,V)=>{T.listen(x,M=>{try{V(M)}catch(H){setTimeout(()=>{throw H},0)}})};return _(f,tc.EventType.OPEN,()=>{y||(A(Et,`RPC '${e}' stream ${i} transport opened.`),w.Vo())}),_(f,tc.EventType.CLOSE,()=>{y||(y=!0,A(Et,`RPC '${e}' stream ${i} transport closed`),w.fo())}),_(f,tc.EventType.ERROR,T=>{y||(y=!0,hn(Et,`RPC '${e}' stream ${i} transport errored:`,T),w.fo(new S(E.UNAVAILABLE,"The operation could not be completed")))}),_(f,tc.EventType.MESSAGE,T=>{var x;if(!y){let V=T.data[0];$(!!V);let M=V,H=M.error||((x=M[0])===null||x===void 0?void 0:x.error);if(H){A(Et,`RPC '${e}' stream ${i} received error:`,H);let W=H.status,Y=function(Mo){let Mr=Qe[Mo];if(Mr!==void 0)return GM(Mr)}(W),Ie=H.message;Y===void 0&&(Y=E.INTERNAL,Ie="Unknown error status: "+W+" with message "+H.message),y=!0,w.fo(new S(Y,Ie)),f.close()}else A(Et,`RPC '${e}' stream ${i} received:`,V),w.po(V)}}),_(a,rx.STAT_EVENT,T=>{T.stat===vw.PROXY?A(Et,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===vw.NOPROXY&&A(Et,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.mo()},0),w}};function IR(){return typeof window<"u"?window:null}function tf(){return typeof document<"u"?document:null}function jc(t){return new eI(t,!0)}var xc=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.si=e,this.timerId=n,this.Oo=r,this.No=i,this.Lo=o,this.Bo=0,this.ko=null,this.qo=Date.now(),this.reset()}reset(){this.Bo=0}Qo(){this.Bo=this.Lo}Ko(e){this.cancel();let n=Math.floor(this.Bo+this.$o()),r=Math.max(0,Date.now()-this.qo),i=Math.max(0,n-r);i>0&&A("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Bo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.ko=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.qo=Date.now(),e())),this.Bo*=this.No,this.Bo<this.Oo&&(this.Bo=this.Oo),this.Bo>this.Lo&&(this.Bo=this.Lo)}Uo(){this.ko!==null&&(this.ko.skipDelay(),this.ko=null)}cancel(){this.ko!==null&&(this.ko.cancel(),this.ko=null)}$o(){return(Math.random()-.5)*this.Bo}};var Ff=class{constructor(e,n,r,i,o,s,a,u){this.si=e,this.Wo=r,this.Go=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.zo=0,this.jo=null,this.Ho=null,this.stream=null,this.Jo=new xc(e,n)}Yo(){return this.state===1||this.state===5||this.Zo()}Zo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Xo()}stop(){return D(this,null,function*(){this.Yo()&&(yield this.close(0))})}e_(){this.state=0,this.Jo.reset()}t_(){this.Zo()&&this.jo===null&&(this.jo=this.si.enqueueAfterDelay(this.Wo,6e4,()=>this.n_()))}r_(e){this.i_(),this.stream.send(e)}n_(){return D(this,null,function*(){if(this.Zo())return this.close(0)})}i_(){this.jo&&(this.jo.cancel(),this.jo=null)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}close(e,n){return D(this,null,function*(){this.i_(),this.s_(),this.Jo.cancel(),this.zo++,e!==4?this.Jo.reset():n&&n.code===E.RESOURCE_EXHAUSTED?(ze(n.toString()),ze("Using maximum backoff delay to prevent overloading the backend."),this.Jo.Qo()):n&&n.code===E.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.o_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Eo(n)})}o_(){}auth(){this.state=1;let e=this.__(this.zo),n=this.zo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.zo===n&&this.a_(r,i)},r=>{e(()=>{let i=new S(E.UNKNOWN,"Fetching auth token failed: "+r.message);return this.u_(i)})})}a_(e,n){let r=this.__(this.zo);this.stream=this.c_(e,n),this.stream.ho(()=>{r(()=>this.listener.ho())}),this.stream.Io(()=>{r(()=>(this.state=2,this.Ho=this.si.enqueueAfterDelay(this.Go,1e4,()=>(this.Zo()&&(this.state=3),Promise.resolve())),this.listener.Io()))}),this.stream.Eo(i=>{r(()=>this.u_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Xo(){this.state=5,this.Jo.Ko(()=>D(this,null,function*(){this.state=0,this.start()}))}u_(e){return A("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}__(e){return n=>{this.si.enqueueAndForget(()=>this.zo===e?n():(A("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},VI=class extends Ff{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}c_(e,n){return this.connection.xo("Listen",e,n)}onMessage(e){this.Jo.reset();let n=n4(this.serializer,e),r=function(o){if(!("targetChange"in o))return z.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?z.min():s.readTime?We(s.readTime):z.min()}(e);return this.listener.l_(n,r)}h_(e){let n={};n.database=rI(this.serializer),n.addTarget=function(o,s){let a,u=s.target;if(a=ff(u)?{documents:eR(o,u)}:{query:tR(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=KM(o,s.resumeToken);let c=tI(o,s.expectedCount);c!==null&&(a.expectedCount=c)}else if(s.snapshotVersion.compareTo(z.min())>0){a.readTime=ea(o,s.snapshotVersion.toTimestamp());let c=tI(o,s.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);let r=i4(this.serializer,e);r&&(n.labels=r),this.r_(n)}P_(e){let n={};n.database=rI(this.serializer),n.removeTarget=e,this.r_(n)}},jI=class extends Ff{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o,this.I_=!1}get T_(){return this.I_}start(){this.I_=!1,this.lastStreamToken=void 0,super.start()}o_(){this.I_&&this.E_([])}c_(e,n){return this.connection.xo("Write",e,n)}onMessage(e){if($(!!e.streamToken),this.lastStreamToken=e.streamToken,this.I_){this.Jo.reset();let n=r4(e.writeResults,e.commitTime),r=We(e.commitTime);return this.listener.d_(r,n)}return $(!e.writeResults||e.writeResults.length===0),this.I_=!0,this.listener.A_()}R_(){let e={};e.database=rI(this.serializer),this.r_(e)}E_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>Cc(this.serializer,r))};this.r_(n)}};var BI=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.V_=!1}m_(){if(this.V_)throw new S(E.FAILED_PRECONDITION,"The client has already been terminated.")}Do(e,n,r,i){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Do(e,nI(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===E.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new S(E.UNKNOWN,o.toString())})}Mo(e,n,r,i,o){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Mo(e,nI(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===E.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new S(E.UNKNOWN,s.toString())})}terminate(){this.V_=!0,this.connection.terminate()}};var UI=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(ze(n),this.y_=!1):A("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var $I=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=o,this.O_.ro(s=>{r.enqueueAndForget(()=>D(this,null,function*(){mi(this)&&(A("RemoteStore","Restarting streams for network reachability change."),yield function(u){return D(this,null,function*(){let c=P(u);c.M_.add(4),yield fa(c),c.N_.set("Unknown"),c.M_.delete(4),yield Bc(c)})}(this))}))}),this.N_=new UI(r,i)}};function Bc(t){return D(this,null,function*(){if(mi(t))for(let e of t.x_)yield e(!0)})}function fa(t){return D(this,null,function*(){for(let e of t.x_)yield e(!1)})}function tp(t,e){let n=P(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),k_(n)?P_(n):ga(n).Zo()&&N_(n,e))}function oa(t,e){let n=P(t),r=ga(n);n.F_.delete(e),r.Zo()&&_R(n,e),n.F_.size===0&&(r.Zo()?r.t_():mi(n)&&n.N_.set("Unknown"))}function N_(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(z.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ga(t).h_(e)}function _R(t,e){t.L_.xe(e),ga(t).P_(e)}function P_(t){t.L_=new Xw({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ga(t).start(),t.N_.w_()}function k_(t){return mi(t)&&!ga(t).Yo()&&t.F_.size>0}function mi(t){return P(t).M_.size===0}function ER(t){t.L_=void 0}function w4(t){return D(this,null,function*(){t.N_.set("Online")})}function I4(t){return D(this,null,function*(){t.F_.forEach((e,n)=>{N_(t,e)})})}function _4(t,e){return D(this,null,function*(){ER(t),k_(t)?(t.N_.D_(e),P_(t)):t.N_.set("Unknown")})}function E4(t,e,n){return D(this,null,function*(){if(t.N_.set("Online"),e instanceof yf&&e.state===2&&e.cause)try{yield function(i,o){return D(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.F_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.F_.delete(a),i.L_.removeTarget(a))})}(t,e)}catch(r){A("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Lf(t,r)}else if(e instanceof Ws?t.L_.Ke(e):e instanceof mf?t.L_.He(e):t.L_.We(e),!n.isEqual(z.min()))try{let r=yield gR(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.L_.rt(s);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){let d=o.F_.get(c);d&&o.F_.set(c,d.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,c)=>{let d=o.F_.get(u);if(!d)return;o.F_.set(u,d.withResumeToken(lt.EMPTY_BYTE_STRING,d.snapshotVersion)),_R(o,u);let f=new ta(d.target,u,c,d.sequenceNumber);N_(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){A("RemoteStore","Failed to raise snapshot:",r),yield Lf(t,r)}})}function Lf(t,e,n){return D(this,null,function*(){if(!gi(e))throw e;t.M_.add(1),yield fa(t),t.N_.set("Offline"),n||(n=()=>gR(t.localStore)),t.asyncQueue.enqueueRetryable(()=>D(this,null,function*(){A("RemoteStore","Retrying IndexedDB access"),yield n(),t.M_.delete(1),yield Bc(t)}))})}function DR(t,e){return e().catch(n=>Lf(t,n,e))}function pa(t){return D(this,null,function*(){let e=P(t),n=fi(e),r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;D4(e);)try{let i=yield g4(e.localStore,r);if(i===null){e.v_.length===0&&n.t_();break}r=i.batchId,b4(e,i)}catch(i){yield Lf(e,i)}bR(e)&&CR(e)})}function D4(t){return mi(t)&&t.v_.length<10}function b4(t,e){t.v_.push(e);let n=fi(t);n.Zo()&&n.T_&&n.E_(e.mutations)}function bR(t){return mi(t)&&!fi(t).Yo()&&t.v_.length>0}function CR(t){fi(t).start()}function C4(t){return D(this,null,function*(){fi(t).R_()})}function T4(t){return D(this,null,function*(){let e=fi(t);for(let n of t.v_)e.E_(n.mutations)})}function S4(t,e,n){return D(this,null,function*(){let r=t.v_.shift(),i=Yw.from(r,e,n);yield DR(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield pa(t)})}function A4(t,e){return D(this,null,function*(){e&&fi(t).T_&&(yield function(r,i){return D(this,null,function*(){if(function(s){return zM(s)&&s!==E.ABORTED}(i.code)){let o=r.v_.shift();fi(r).e_(),yield DR(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield pa(r)}})}(t,e)),bR(t)&&CR(t)})}function Zx(t,e){return D(this,null,function*(){let n=P(t);n.asyncQueue.verifyOperationInProgress(),A("RemoteStore","RemoteStore received new credentials");let r=mi(n);n.M_.add(3),yield fa(n),r&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),yield Bc(n)})}function HI(t,e){return D(this,null,function*(){let n=P(t);e?(n.M_.delete(2),yield Bc(n)):e||(n.M_.add(2),yield fa(n),n.N_.set("Unknown"))})}function ga(t){return t.B_||(t.B_=function(n,r,i){let o=P(n);return o.m_(),new VI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{ho:w4.bind(null,t),Io:I4.bind(null,t),Eo:_4.bind(null,t),l_:E4.bind(null,t)}),t.x_.push(e=>D(this,null,function*(){e?(t.B_.e_(),k_(t)?P_(t):t.N_.set("Unknown")):(yield t.B_.stop(),ER(t))}))),t.B_}function fi(t){return t.k_||(t.k_=function(n,r,i){let o=P(n);return o.m_(),new jI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{ho:()=>Promise.resolve(),Io:C4.bind(null,t),Eo:A4.bind(null,t),A_:T4.bind(null,t),d_:S4.bind(null,t)}),t.x_.push(e=>D(this,null,function*(){e?(t.k_.e_(),yield pa(t)):(yield t.k_.stop(),t.v_.length>0&&(A("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))}))),t.k_}var qI=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Je,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new S(E.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ma(t,e){if(ze("AsyncQueue",`${e}: ${t}`),gi(t))return new S(E.UNAVAILABLE,`${e}: ${t}`);throw t}var Vf=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||N.comparator(n.key,r.key):(n,r)=>N.comparator(n.key,r.key),this.keyedMap=sc(),this.sortedSet=new Re(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var jf=class{constructor(){this.q_=new Re(N.comparator)}track(e){let n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):L():this.q_=this.q_.insert(n,e)}Q_(){let e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}},sa=class t{constructor(e,n,r,i,o,s,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,Vf.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var zI=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},GI=class{constructor(){this.queries=new rr(e=>MM(e),Lc),this.onlineState="Unknown",this.z_=new Set}};function O_(t,e){return D(this,null,function*(){let n=P(t),r=3,i=e.query,o=n.queries.get(i);o?!o.W_()&&e.G_()&&(r=2):(o=new zI,r=e.G_()?0:1);try{switch(r){case 0:o.K_=yield n.onListen(i,!0);break;case 1:o.K_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=ma(s,`Initialization of query '${Bs(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.U_.push(e),e.j_(n.onlineState),o.K_&&e.H_(o.K_)&&L_(n)})}function F_(t,e){return D(this,null,function*(){let n=P(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.U_.indexOf(e);s>=0&&(o.U_.splice(s,1),o.U_.length===0?i=e.G_()?0:1:!o.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function x4(t,e){let n=P(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.U_)a.H_(i)&&(r=!0);s.K_=i}}r&&L_(n)}function M4(t,e,n){let r=P(t),i=r.queries.get(e);if(i)for(let o of i.U_)o.onError(n);r.queries.delete(e)}function L_(t){t.z_.forEach(e=>{e.next()})}var WI,Jx;(Jx=WI||(WI={})).J_="default",Jx.Cache="cache";var Mc=class{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new sa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;let r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=sa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==WI.Cache}};var KI=class{constructor(e,n){this.ia=e,this.byteLength=n}sa(){return"metadata"in this.ia}};var Bf=class{constructor(e){this.serializer=e}hs(e){return Xn(this.serializer,e)}Ps(e){return e.metadata.exists?XM(this.serializer,e.document,!1):Xe.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return We(e)}},QI=class{constructor(e,n,r){this.oa=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=TR(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++n;let r=pe.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}aa(e){let n=new Map,r=new Bf(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.hs(i.metadata.name);for(let s of i.metadata.queries){let a=(n.get(s)||ne()).add(o);n.set(s,a)}}return n}complete(){return D(this,null,function*(){let e=yield m4(this.localStore,new Bf(this.serializer),this.documents,this.oa.id),n=this.aa(this.documents);for(let r of this.queries)yield y4(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}})}};function TR(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var Uf=class{constructor(e){this.key=e}},$f=class{constructor(e){this.key=e}},Hf=class{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=ne(),this.mutatedKeys=ne(),this.Ia=NM(e),this.Ta=new Vf(this.Ia)}get Ea(){return this.la}da(e,n){let r=n?n.Aa:new jf,i=n?n.Ta:this.Ta,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let m=i.get(d),y=Vc(this.query,f)?f:null,w=!!m&&this.mutatedKeys.has(m.key),_=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),T=!1;m&&y?m.data.isEqual(y.data)?w!==_&&(r.track({type:3,doc:y}),T=!0):this.Ra(m,y)||(r.track({type:2,doc:y}),T=!0,(u&&this.Ia(y,u)>0||c&&this.Ia(y,c)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),T=!0):m&&!y&&(r.track({type:1,doc:m}),T=!0,(u||c)&&(a=!0)),T&&(y?(s=s.add(y),o=_?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{Ta:s,Aa:r,Zi:a,mutatedKeys:o}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let s=e.Aa.Q_();s.sort((d,f)=>function(y,w){let _=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return L()}};return _(y)-_(w)}(d.type,f.type)||this.Ia(d.doc,f.doc)),this.Va(r),i=i!=null&&i;let a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,c=u!==this.ha;return this.ha=u,s.length!==0||c?{snapshot:new sa(this.query,e.Ta,o,s,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new jf,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=ne(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});let n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new $f(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new Uf(r))}),n}pa(e){this.la=e.ls,this.Pa=ne();let n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return sa.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},YI=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},ZI=class{constructor(e){this.key=e,this.wa=!1}},JI=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Sa={},this.ba=new rr(a=>MM(a),Lc),this.Da=new Map,this.Ca=new Set,this.va=new Re(N.comparator),this.Fa=new Map,this.Ma=new Sc,this.xa={},this.Oa=new Map,this.Na=na.Nn(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function R4(t,e,n=!0){return D(this,null,function*(){let r=np(t),i,o=r.ba.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.ya()):i=yield SR(r,e,n,!0),i})}function N4(t,e){return D(this,null,function*(){let n=np(t);yield SR(n,e,!0,!1)})}function SR(t,e,n,r){return D(this,null,function*(){let i=yield ra(t.localStore,Nt(e)),o=i.targetId,s=n?t.sharedClientState.addLocalQueryTarget(o):"not-current",a;return r&&(a=yield V_(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&tp(t.remoteStore,i),a})}function V_(t,e,n,r,i){return D(this,null,function*(){t.Ba=(f,m,y)=>function(_,T,x,V){return D(this,null,function*(){let M=T.view.da(x);M.Zi&&(M=yield Rf(_.localStore,T.query,!1).then(({documents:Ie})=>T.view.da(Ie,M)));let H=V&&V.targetChanges.get(T.targetId),W=V&&V.targetMismatches.get(T.targetId)!=null,Y=T.view.applyChanges(M,_.isPrimaryClient,H,W);return XI(_,T.targetId,Y.fa),Y.snapshot})}(t,f,m,y);let o=yield Rf(t.localStore,e,!0),s=new Hf(e,o.ls),a=s.da(o.documents),u=Dc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=s.applyChanges(a,t.isPrimaryClient,u);XI(t,n,c.fa);let d=new YI(e,n,s);return t.ba.set(e,d),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),c.snapshot})}function P4(t,e,n){return D(this,null,function*(){let r=P(t),i=r.ba.get(e),o=r.Da.get(i.targetId);if(o.length>1)return r.Da.set(i.targetId,o.filter(s=>!Lc(s,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield ia(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&oa(r.remoteStore,i.targetId),aa(r,i.targetId)}).catch(pi))):(aa(r,i.targetId),yield ia(r.localStore,i.targetId,!0))})}function k4(t,e){return D(this,null,function*(){let n=P(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),oa(n.remoteStore,r.targetId))})}function O4(t,e,n){return D(this,null,function*(){let r=$_(t);try{let i=yield function(s,a){let u=P(s),c=Oe.now(),d=a.reduce((y,w)=>y.add(w.key),ne()),f,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let w=qt(),_=ne();return u.ss.getEntries(y,d).next(T=>{w=T,w.forEach((x,V)=>{V.isValidDocument()||(_=_.add(x))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,w)).next(T=>{f=T;let x=[];for(let V of a){let M=Qq(V,f.get(V.key).overlayedDocument);M!=null&&x.push(new An(V.key,M,DM(M.value.mapValue),Ue.exists(!0)))}return u.mutationQueue.addMutationBatch(y,c,x,a)}).next(T=>{m=T;let x=T.applyToLocalDocumentSet(f,_);return u.documentOverlayCache.saveOverlays(y,T.batchId,x)})}).then(()=>({batchId:m.batchId,changes:kM(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let c=s.xa[s.currentUser.toKey()];c||(c=new Re(te)),c=c.insert(a,u),s.xa[s.currentUser.toKey()]=c}(r,i.batchId,n),yield Ar(r,i.changes),yield pa(r.remoteStore)}catch(i){let o=ma(i,"Failed to persist write");n.reject(o)}})}function AR(t,e){return D(this,null,function*(){let n=P(t);try{let r=yield p4(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Fa.get(o);s&&($(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.wa=!0:i.modifiedDocuments.size>0?$(s.wa):i.removedDocuments.size>0&&($(s.wa),s.wa=!1))}),yield Ar(n,r,e)}catch(r){yield pi(r)}})}function Xx(t,e,n){let r=P(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ba.forEach((o,s)=>{let a=s.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=P(s);u.onlineState=a;let c=!1;u.queries.forEach((d,f)=>{for(let m of f.U_)m.j_(a)&&(c=!0)}),c&&L_(u)}(r.eventManager,e),i.length&&r.Sa.l_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function F4(t,e,n){return D(this,null,function*(){let r=P(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Fa.get(e),o=i&&i.key;if(o){let s=new Re(N.comparator);s=s.insert(o,Xe.newNoDocument(o,z.min()));let a=ne().add(o),u=new Ec(z.min(),new Map,new Re(te),s,a);yield AR(r,u),r.va=r.va.remove(o),r.Fa.delete(e),U_(r)}else yield ia(r.localStore,e,!1).then(()=>aa(r,e,n)).catch(pi)})}function L4(t,e){return D(this,null,function*(){let n=P(t),r=e.batch.batchId;try{let i=yield f4(n.localStore,e);B_(n,r,null),j_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Ar(n,i)}catch(i){yield pi(i)}})}function V4(t,e,n){return D(this,null,function*(){let r=P(t);try{let i=yield function(s,a){let u=P(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return u.mutationQueue.lookupMutationBatch(c,a).next(f=>($(f!==null),d=f.keys(),u.mutationQueue.removeMutationBatch(c,f))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>u.localDocuments.getDocuments(c,d))})}(r.localStore,e);B_(r,e,n),j_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Ar(r,i)}catch(i){yield pi(i)}})}function j4(t,e){return D(this,null,function*(){let n=P(t);mi(n.remoteStore)||A("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=P(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(r===-1)return void e.resolve();let i=n.Oa.get(r)||[];i.push(e),n.Oa.set(r,i)}catch(r){let i=ma(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function j_(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function B_(t,e,n){let r=P(t),i=r.xa[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function aa(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Rr(e).forEach(r=>{t.Ma.containsKey(r)||xR(t,r)})}function xR(t,e){t.Ca.delete(e.path.canonicalString());let n=t.va.get(e);n!==null&&(oa(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),U_(t))}function XI(t,e,n){for(let r of n)r instanceof Uf?(t.Ma.addReference(r.key,e),B4(t,r)):r instanceof $f?(A("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||xR(t,r.key)):L()}function B4(t,e){let n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(A("SyncEngine","New document in limbo: "+n),t.Ca.add(r),U_(t))}function U_(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){let e=t.Ca.values().next().value;t.Ca.delete(e);let n=new N(pe.fromString(e)),r=t.Na.next();t.Fa.set(r,new ZI(n)),t.va=t.va.insert(n,r),tp(t.remoteStore,new ta(Nt(ha(n.path)),r,"TargetPurposeLimboResolution",tn.oe))}}function Ar(t,e,n){return D(this,null,function*(){let r=P(t),i=[],o=[],s=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{s.push(r.Ba(u,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,c?.fromCache?"not-current":"current"),c){i.push(c);let d=RI.Qi(u.targetId,c);o.push(d)}}))}),yield Promise.all(s),r.Sa.l_(i),yield function(u,c){return D(this,null,function*(){let d=P(u);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>I.forEach(c,m=>I.forEach(m.ki,y=>d.persistence.referenceDelegate.addReference(f,m.targetId,y)).next(()=>I.forEach(m.qi,y=>d.persistence.referenceDelegate.removeReference(f,m.targetId,y)))))}catch(f){if(!gi(f))throw f;A("LocalStore","Failed to update sequence numbers: "+f)}for(let f of c){let m=f.targetId;if(!f.fromCache){let y=d.ts.get(m),w=y.snapshotVersion,_=y.withLastLimboFreeSnapshotVersion(w);d.ts=d.ts.insert(m,_)}}})}(r.localStore,o))})}function U4(t,e){return D(this,null,function*(){let n=P(t);if(!n.currentUser.isEqual(e)){A("SyncEngine","User change. New user:",e.toKey());let r=yield pR(n.localStore,e);n.currentUser=e,function(o,s){o.Oa.forEach(a=>{a.forEach(u=>{u.reject(new S(E.CANCELLED,s))})}),o.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ar(n,r._s)}})}function $4(t,e){let n=P(t),r=n.Fa.get(e);if(r&&r.wa)return ne().add(r.key);{let i=ne(),o=n.Da.get(e);if(!o)return i;for(let s of o){let a=n.ba.get(s);i=i.unionWith(a.view.Ea)}return i}}function H4(t,e){return D(this,null,function*(){let n=P(t),r=yield Rf(n.localStore,e.query,!0),i=e.view.pa(r);return n.isPrimaryClient&&XI(n,e.targetId,i.fa),i})}function q4(t,e){return D(this,null,function*(){let n=P(t);return vR(n.localStore,e).then(r=>Ar(n,r))})}function z4(t,e,n,r){return D(this,null,function*(){let i=P(t),o=yield function(a,u){let c=P(a),d=P(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",f=>d.Cn(f,u).next(m=>m?c.localDocuments.getDocuments(f,m):I.resolve(null)))}(i.localStore,e);o!==null?(n==="pending"?yield pa(i.remoteStore):n==="acknowledged"||n==="rejected"?(B_(i,e,r||null),j_(i,e),function(a,u){P(P(a).mutationQueue).Fn(u)}(i.localStore,e)):L(),yield Ar(i,o)):A("SyncEngine","Cannot apply mutation batch with id: "+e)})}function G4(t,e){return D(this,null,function*(){let n=P(t);if(np(n),$_(n),e===!0&&n.La!==!0){let r=n.sharedClientState.getAllActiveQueryTargets(),i=yield eM(n,r.toArray());n.La=!0,yield HI(n.remoteStore,!0);for(let o of i)tp(n.remoteStore,o)}else if(e===!1&&n.La!==!1){let r=[],i=Promise.resolve();n.Da.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(aa(n,s),ia(n.localStore,s,!0))),oa(n.remoteStore,s)}),yield i,yield eM(n,r),function(s){let a=P(s);a.Fa.forEach((u,c)=>{oa(a.remoteStore,c)}),a.Ma.Vr(),a.Fa=new Map,a.va=new Re(N.comparator)}(n),n.La=!1,yield HI(n.remoteStore,!1)}})}function eM(t,e,n){return D(this,null,function*(){let r=P(t),i=[],o=[];for(let s of e){let a,u=r.Da.get(s);if(u&&u.length!==0){a=yield ra(r.localStore,Nt(u[0]));for(let c of u){let d=r.ba.get(c),f=yield H4(r,d);f.snapshot&&o.push(f.snapshot)}}else{let c=yield yR(r.localStore,s);a=yield ra(r.localStore,c),yield V_(r,MR(c),s,!1,a.resumeToken)}i.push(a)}return r.Sa.l_(o),i})}function MR(t){return xM(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function W4(t){return function(n){return P(P(n).persistence).Li()}(P(t).localStore)}function K4(t,e,n,r){return D(this,null,function*(){let i=P(t);if(i.La)return void A("SyncEngine","Ignoring unexpected query state notification.");let o=i.Da.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{let s=yield vR(i.localStore,RM(o[0])),a=Ec.createSynthesizedRemoteEventForCurrentChange(e,n==="current",lt.EMPTY_BYTE_STRING);yield Ar(i,s,a);break}case"rejected":yield ia(i.localStore,e,!0),aa(i,e,r);break;default:L()}})}function Q4(t,e,n){return D(this,null,function*(){let r=np(t);if(r.La){for(let i of e){if(r.Da.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){A("SyncEngine","Adding an already active target "+i);continue}let o=yield yR(r.localStore,i),s=yield ra(r.localStore,o);yield V_(r,MR(o),s.targetId,!1,s.resumeToken),tp(r.remoteStore,s)}for(let i of n)r.Da.has(i)&&(yield ia(r.localStore,i,!1).then(()=>{oa(r.remoteStore,i),aa(r,i)}).catch(pi))}})}function np(t){let e=P(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=AR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=F4.bind(null,e),e.Sa.l_=x4.bind(null,e.eventManager),e.Sa.ka=M4.bind(null,e.eventManager),e}function $_(t){let e=P(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=L4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=V4.bind(null,e),e}function Y4(t,e,n){let r=P(t);(function(o,s,a){return D(this,null,function*(){try{let u=yield s.getMetadata();if(yield function(y,w){let _=P(y),T=We(w.createTime);return _.persistence.runTransaction("hasNewerBundle","readonly",x=>_.Kr.getBundleMetadata(x,w.id)).then(x=>!!x&&x.createTime.compareTo(T)>=0)}(o.localStore,u))return yield s.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(TR(u));let c=new QI(u,o.localStore,s.serializer),d=yield s.qa();for(;d;){let m=yield c._a(d);m&&a._updateProgress(m),d=yield s.qa()}let f=yield c.complete();return yield Ar(o,f.ca,void 0),yield function(y,w){let _=P(y);return _.persistence.runTransaction("Save bundle","readwrite",T=>_.Kr.saveBundleMetadata(T,w))}(o.localStore,u),a._completeWith(f.progress),Promise.resolve(f.ua)}catch(u){return hn("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Rc=class{constructor(){this.synchronizeTabs=!1}initialize(e){return D(this,null,function*(){this.serializer=jc(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return fR(this.persistence,new Mf,e.initialUser,this.serializer)}createPersistence(e){return new Af(xf.jr,this.serializer)}createSharedClientState(e){return new kf}terminate(){return D(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var qf=class t extends Rc{constructor(e,n,r){super(),this.Qa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return D(this,null,function*(){yield Pp(t.prototype,this,"initialize").call(this,e),yield this.Qa.initialize(this,e),yield $_(this.Qa.syncEngine),yield pa(this.Qa.remoteStore),yield this.persistence.mi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return fR(this.persistence,new Mf,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let r=this.persistence.referenceDelegate.garbageCollector;return new mI(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let r=new kw(n,this.persistence);return new Pw(e.asyncQueue,r)}createPersistence(e){let n=R_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?dn.withCacheSize(this.cacheSizeBytes):dn.DEFAULT;return new MI(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,IR(),tf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new kf}},e_=class t extends qf{constructor(e,n){super(e,n,!1),this.Qa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return D(this,null,function*(){yield Pp(t.prototype,this,"initialize").call(this,e);let n=this.Qa.syncEngine;this.sharedClientState instanceof hc&&(this.sharedClientState.syncEngine={Ys:z4.bind(null,n),Zs:K4.bind(null,n),Xs:Q4.bind(null,n),Li:W4.bind(null,n),Js:q4.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.mi(r=>D(this,null,function*(){yield G4(this.Qa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=IR();if(!hc.D(n))throw new S(E.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=R_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new hc(n,e.asyncQueue,r,e.clientId,e.initialUser)}},Nc=class{initialize(e,n){return D(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Xx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=U4.bind(null,this.syncEngine),yield HI(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new GI}()}createDatastore(e){let n=jc(e.databaseInfo.databaseId),r=function(o){return new LI(o)}(e.databaseInfo);return function(o,s,a,u){return new BI(o,s,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new $I(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Xx(this.syncEngine,n,0),function(){return Of.D()?new Of:new OI}())}createSyncEngine(e,n){return function(i,o,s,a,u,c,d){let f=new JI(i,o,s,a,u,c);return d&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return D(this,null,function*(){var e;yield function(r){return D(this,null,function*(){let i=P(r);A("RemoteStore","RemoteStore shutting down."),i.M_.add(5),yield fa(i),i.O_.shutdown(),i.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};function tM(t,e=10240){let n=0;return{read(){return D(this,null,function*(){if(n<t.byteLength){let i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}})},cancel(){return D(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var ua=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):ze("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var t_=class{constructor(e,n){this.Ua=e,this.serializer=n,this.metadata=new Je,this.buffer=new Uint8Array,this.Wa=function(){return new TextDecoder("utf-8")}(),this.Ga().then(r=>{r&&r.sa()?this.metadata.resolve(r.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.ia)}`))},r=>this.metadata.reject(r))}close(){return this.Ua.cancel()}getMetadata(){return D(this,null,function*(){return this.metadata.promise})}qa(){return D(this,null,function*(){return yield this.getMetadata(),this.Ga()})}Ga(){return D(this,null,function*(){let e=yield this.za();if(e===null)return null;let n=this.Wa.decode(e),r=Number(n);isNaN(r)&&this.ja(`length string (${n}) is not valid number`);let i=yield this.Ha(r);return new KI(JSON.parse(i),e.length+r)})}Ja(){return this.buffer.findIndex(e=>e===123)}za(){return D(this,null,function*(){for(;this.Ja()<0&&!(yield this.Ya()););if(this.buffer.length===0)return null;let e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Ha(e){return D(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ya())&&this.ja("Reached the end of bundle when more is expected.");let n=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){return D(this,null,function*(){let e=yield this.Ua.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var n_=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return D(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new S(E.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(i,o){return D(this,null,function*(){let s=P(i),a={documents:o.map(f=>bc(s.serializer,f))},u=yield s.Mo("BatchGetDocuments",s.serializer.databaseId,pe.emptyPath(),a,o.length),c=new Map;u.forEach(f=>{let m=t4(s.serializer,f);c.set(m.key.toString(),m)});let d=[];return o.forEach(f=>{let m=c.get(f.toString());$(!!m),d.push(m)}),d})}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new hi(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return D(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{let i=N.fromPath(r);this.mutations.push(new wc(i,this.precondition(i)))}),yield function(r,i){return D(this,null,function*(){let o=P(r),s={writes:i.map(a=>Cc(o.serializer,a))};yield o.Do("Commit",o.serializer.databaseId,pe.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw L();n=z.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new S(E.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(z.min())?Ue.exists(!1):Ue.updateTime(n):Ue.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(z.min()))throw new S(E.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ue.updateTime(n)}return Ue.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var r_=class{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.Za=r.maxAttempts,this.Jo=new xc(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Jo.Ko(()=>D(this,null,function*(){let e=new n_(this.datastore),n=this.tu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.nu(i)}))}).catch(r=>{this.nu(r)})}))}tu(e){try{let n=this.updateFunction(e);return!Oc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!zM(n)}return!1}};var i_=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ze.UNAUTHENTICATED,this.clientId=of.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>D(this,null,function*(){A("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(A("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new S(E.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Je;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>D(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=ma(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function nf(t,e){return D(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),A("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>D(this,null,function*(){r.isEqual(i)||(yield pR(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function o_(t,e){return D(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield H_(t);A("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Zx(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Zx(e.remoteStore,i)),t._onlineComponents=e})}function RR(t){return t.name==="FirebaseError"?t.code===E.FAILED_PRECONDITION||t.code===E.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function H_(t){return D(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){A("FirestoreClient","Using user provided OfflineComponentProvider");try{yield nf(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!RR(n))throw n;hn("Error using user provided cache. Falling back to memory cache: "+n),yield nf(t,new Rc)}}else A("FirestoreClient","Using default OfflineComponentProvider"),yield nf(t,new Rc);return t._offlineComponents})}function rp(t){return D(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(A("FirestoreClient","Using user provided OnlineComponentProvider"),yield o_(t,t._uninitializedComponentsProvider._online)):(A("FirestoreClient","Using default OnlineComponentProvider"),yield o_(t,new Nc))),t._onlineComponents})}function NR(t){return H_(t).then(e=>e.persistence)}function q_(t){return H_(t).then(e=>e.localStore)}function PR(t){return rp(t).then(e=>e.remoteStore)}function z_(t){return rp(t).then(e=>e.syncEngine)}function Z4(t){return rp(t).then(e=>e.datastore)}function ca(t){return D(this,null,function*(){let e=yield rp(t),n=e.eventManager;return n.onListen=R4.bind(null,e.syncEngine),n.onUnlisten=P4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=N4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=k4.bind(null,e.syncEngine),n})}function J4(t){return t.asyncQueue.enqueue(()=>D(this,null,function*(){let e=yield NR(t),n=yield PR(t);return e.setNetworkEnabled(!0),function(i){let o=P(i);return o.M_.delete(0),Bc(o)}(n)}))}function X4(t){return t.asyncQueue.enqueue(()=>D(this,null,function*(){let e=yield NR(t),n=yield PR(t);return e.setNetworkEnabled(!1),function(i){return D(this,null,function*(){let o=P(i);o.M_.add(0),yield fa(o),o.N_.set("Offline")})}(n)}))}function e5(t,e){let n=new Je;return t.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return function(i,o,s){return D(this,null,function*(){try{let a=yield function(c,d){let f=P(c);return f.persistence.runTransaction("read document","readonly",m=>f.localDocuments.getDocument(m,d))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new S(E.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=ma(a,`Failed to get document '${o} from cache`);s.reject(u)}})}(yield q_(t),e,n)})),n.promise}function kR(t,e,n={}){let r=new Je;return t.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return function(o,s,a,u,c){let d=new ua({next:m=>{s.enqueueAndForget(()=>F_(o,f));let y=m.docs.has(a);!y&&m.fromCache?c.reject(new S(E.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?c.reject(new S(E.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new Mc(ha(a.path),d,{includeMetadataChanges:!0,ra:!0});return O_(o,f)}(yield ca(t),t.asyncQueue,e,n,r)})),r.promise}function t5(t,e){let n=new Je;return t.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return function(i,o,s){return D(this,null,function*(){try{let a=yield Rf(i,o,!0),u=new Hf(o,a.ls),c=u.da(a.documents),d=u.applyChanges(c,!1);s.resolve(d.snapshot)}catch(a){let u=ma(a,`Failed to execute query '${o} against cache`);s.reject(u)}})}(yield q_(t),e,n)})),n.promise}function OR(t,e,n={}){let r=new Je;return t.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return function(o,s,a,u,c){let d=new ua({next:m=>{s.enqueueAndForget(()=>F_(o,f)),m.fromCache&&u.source==="server"?c.reject(new S(E.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new Mc(a,d,{includeMetadataChanges:!0,ra:!0});return O_(o,f)}(yield ca(t),t.asyncQueue,e,n,r)})),r.promise}function n5(t,e){let n=new ua(e);return t.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return function(i,o){P(i).z_.add(o),o.next()}(yield ca(t),n)})),()=>{n.$a(),t.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return function(i,o){P(i).z_.delete(o)}(yield ca(t),n)}))}}function r5(t,e,n,r){let i=function(s,a){let u;return u=typeof s=="string"?WM().encode(s):s,function(d,f){return new t_(d,f)}(function(d,f){if(d instanceof Uint8Array)return tM(d,f);if(d instanceof ArrayBuffer)return tM(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(n,jc(e));t.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){Y4(yield z_(t),i,r)}))}function i5(t,e){return t.asyncQueue.enqueue(()=>D(this,null,function*(){return function(r,i){let o=P(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Kr.getNamedQuery(s,i))}(yield q_(t),e)}))}function FR(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var nM=new Map;function G_(t,e,n){if(!n)throw new S(E.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function W_(t,e,n,r){if(e===!0&&r===!0)throw new S(E.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function rM(t){if(!N.isDocumentKey(t))throw new S(E.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function iM(t){if(N.isDocumentKey(t))throw new S(E.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ip(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":L()}function ge(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new S(E.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=ip(t);throw new S(E.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function LR(t,e){if(e<=0)throw new S(E.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var zf=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new S(E.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new S(E.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}W_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=FR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new S(E.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new S(E.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new S(E.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},wo=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new S(E.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new S(E.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zf(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Dw;switch(r.type){case"firstParty":return new Sw(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new S(E.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=nM.get(n);r&&(A("ComponentProvider","Removing Datastore"),nM.delete(n),r.terminate())}(this),Promise.resolve()}};function VR(t,e,n,r={}){var i;let o=(t=ge(t,wo))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&hn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=Ze.MOCK_USER;else{a=ID(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new S(E.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ze(c)}t._authCredentials=new bw(new rf(a,u))}}var mt=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},xe=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new er(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},er=class t extends mt{constructor(e,n,r){super(e,n,ha(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new xe(this.firestore,null,new N(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function K_(t,e,...n){if(t=ke(t),G_("collection","path",e),t instanceof wo){let r=pe.fromString(e,...n);return iM(r),new er(t,null,r)}{if(!(t instanceof xe||t instanceof er))throw new S(E.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(pe.fromString(e,...n));return iM(r),new er(t.firestore,null,r)}}function jR(t,e){if(t=ge(t,wo),G_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new S(E.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new mt(t,null,function(r){return new Sn(pe.emptyPath(),r)}(e))}function Uc(t,e,...n){if(t=ke(t),arguments.length===1&&(e=of.newId()),G_("doc","path",e),t instanceof wo){let r=pe.fromString(e,...n);return rM(r),new xe(t,null,new N(r))}{if(!(t instanceof xe||t instanceof er))throw new S(E.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(pe.fromString(e,...n));return rM(r),new xe(t.firestore,t instanceof er?t.converter:null,new N(r))}}function Q_(t,e){return t=ke(t),e=ke(e),(t instanceof xe||t instanceof er)&&(e instanceof xe||e instanceof er)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Y_(t,e){return t=ke(t),e=ke(e),t instanceof mt&&e instanceof mt&&t.firestore===e.firestore&&Lc(t._query,e._query)&&t.converter===e.converter}var s_=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Jo=new xc(this,"async_queue_retry"),this.hu=()=>{let n=tf();n&&A("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Jo.Uo()};let e=tf();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=tf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new Je;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return D(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Jo.reset()}catch(e){if(!gi(e))throw e;A("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Jo.Ko(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw ze("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let i=qI.createAndSchedule(this,e,n,r,o=>this.Eu(o));return this._u.push(i),i}Pu(){this.au&&L()}verifyOperationInProgress(){}du(){return D(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};function a_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}var u_=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Je,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var BR=-1,Ne=class extends wo{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new s_}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||UR(this),this._firestoreClient.terminate()}};function rt(t){return t._firestoreClient||UR(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function UR(t){var e,n,r;let i=t._freezeSettings(),o=function(a,u,c,d){return new Ow(a,u,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,FR(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new i_(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function $R(t,e){ZR(t=ge(t,Ne));let n=rt(t);if(n._uninitializedComponentsProvider)throw new S(E.FAILED_PRECONDITION,"SDK cache is already specified.");hn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=t._freezeSettings(),i=new Nc;return qR(n,i,new qf(i,r.cacheSizeBytes,e?.forceOwnership))}function HR(t){ZR(t=ge(t,Ne));let e=rt(t);if(e._uninitializedComponentsProvider)throw new S(E.FAILED_PRECONDITION,"SDK cache is already specified.");hn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),r=new Nc;return qR(e,r,new e_(r,n.cacheSizeBytes))}function qR(t,e,n){let r=new Je;return t.asyncQueue.enqueue(()=>D(this,null,function*(){try{yield nf(t,n),yield o_(t,e),r.resolve()}catch(i){let o=i;if(!RR(o))throw o;hn("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function zR(t){if(t._initialized&&!t._terminated)throw new S(E.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Je;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>D(this,null,function*(){try{yield function(r){return D(this,null,function*(){if(!oi.D())return Promise.resolve();let i=r+"main";yield oi.delete(i)})}(R_(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function GR(t){return function(n){let r=new Je;return n.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return j4(yield z_(n),r)})),r.promise}(rt(t=ge(t,Ne)))}function WR(t){return J4(rt(t=ge(t,Ne)))}function KR(t){return X4(rt(t=ge(t,Ne)))}function QR(t,e){let n=rt(t=ge(t,Ne)),r=new u_;return r5(n,t._databaseId,e,r),r}function YR(t,e){return i5(rt(t=ge(t,Ne)),e).then(n=>n?new mt(t,null,n.query):null)}function ZR(t){if(t._initialized||t._terminated)throw new S(E.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var ir=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(lt.fromBase64String(e))}catch(n){throw new S(E.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var xn=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new S(E.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ge(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Tr=class{constructor(e){this._methodName=e}};var Io=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new S(E.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new S(E.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return te(this._lat,e._lat)||te(this._long,e._long)}};var o5=/^__.*__$/,c_=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new An(e,this.data,this.fieldMask,n,this.fieldTransforms):new di(e,this.data,n,this.fieldTransforms)}},Gf=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new An(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function JR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw L()}}var Wf=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.mu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Kf(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(JR(this.fu)&&o5.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},l_=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||jc(e)}Fu(e,n,r,i=!1){return new Wf({fu:e,methodName:n,vu:r,path:Ge.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function bo(t){let e=t._freezeSettings(),n=jc(t._databaseId);return new l_(t._databaseId,!!e.ignoreUndefinedProperties,n)}function op(t,e,n,r,i,o={}){let s=t.Fu(o.merge||o.mergeFields?2:0,e,n,i);X_("Data must be an object, but it was:",s,r);let a=tN(r,s),u,c;if(o.merge)u=new nn(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let f of o.mergeFields){let m=g_(e,f,n);if(!s.contains(m))throw new S(E.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);rN(d,m)||d.push(m)}u=new nn(d),c=s.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,c=s.fieldTransforms;return new c_(new Dt(a),u,c)}var Pc=class t extends Tr{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function XR(t,e,n){return new Wf({fu:3,vu:e.settings.vu,methodName:t._methodName,yu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var d_=class t extends Tr{_toFieldTransform(e){return new mo(e.path,new ci)}isEqual(e){return e instanceof t}},h_=class t extends Tr{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){let n=XR(this,e,!0),r=this.Mu.map(o=>Co(o,n)),i=new br(r);return new mo(e.path,i)}isEqual(e){return e instanceof t&&Fp(this.Mu,e.Mu)}},f_=class t extends Tr{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){let n=XR(this,e,!0),r=this.Mu.map(o=>Co(o,n)),i=new Cr(r);return new mo(e.path,i)}isEqual(e){return e instanceof t&&Fp(this.Mu,e.Mu)}},p_=class t extends Tr{constructor(e,n){super(e),this.xu=n}_toFieldTransform(e){let n=new li(e.serializer,VM(e.serializer,this.xu));return new mo(e.path,n)}isEqual(e){return e instanceof t&&this.xu===e.xu}};function Z_(t,e,n,r){let i=t.Fu(1,e,n);X_("Data must be an object, but it was:",i,r);let o=[],s=Dt.empty();Do(r,(u,c)=>{let d=eE(e,u,n);c=ke(c);let f=i.Su(d);if(c instanceof Pc)o.push(d);else{let m=Co(c,f);m!=null&&(o.push(d),s.set(d,m))}});let a=new nn(o);return new Gf(s,a,i.fieldTransforms)}function J_(t,e,n,r,i,o){let s=t.Fu(1,e,n),a=[g_(e,r,n)],u=[i];if(o.length%2!=0)throw new S(E.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(g_(e,o[m])),u.push(o[m+1]);let c=[],d=Dt.empty();for(let m=a.length-1;m>=0;--m)if(!rN(c,a[m])){let y=a[m],w=u[m];w=ke(w);let _=s.Su(y);if(w instanceof Pc)c.push(y);else{let T=Co(w,_);T!=null&&(c.push(y),d.set(y,T))}}let f=new nn(c);return new Gf(d,f,s.fieldTransforms)}function eN(t,e,n,r=!1){return Co(n,t.Fu(r?4:3,e))}function Co(t,e){if(nN(t=ke(t)))return X_("Unsupported field value:",e,t),tN(t,e);if(t instanceof Tr)return function(r,i){if(!JR(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=Co(a,i.bu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=ke(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return VM(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Oe.fromDate(r);return{timestampValue:ea(i.serializer,o)}}if(r instanceof Oe){let o=new Oe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ea(i.serializer,o)}}if(r instanceof Io)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ir)return{bytesValue:KM(i.serializer,r._byteString)};if(r instanceof xe){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Du(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:A_(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${ip(r)}`)}(t,e)}function tN(t,e){let n={};return IM(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Do(t,(r,i)=>{let o=Co(i,e.pu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function nN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Oe||t instanceof Io||t instanceof ir||t instanceof xe||t instanceof Tr)}function X_(t,e,n){if(!nN(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=ip(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function g_(t,e,n){if((e=ke(e))instanceof xn)return e._internalPath;if(typeof e=="string")return eE(t,e);throw Kf("Field path arguments must be of type string or ",t,!1,void 0,n)}var s5=new RegExp("[~\\*/\\[\\]]");function eE(t,e,n){if(e.search(s5)>=0)throw Kf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new xn(...e.split("."))._internalPath}catch{throw Kf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Kf(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new S(E.INVALID_ARGUMENT,a+t+u)}function rN(t,e){return t.some(n=>n.isEqual(e))}var _o=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new xe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new m_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(sp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},m_=class extends _o{data(){return super.data()}};function sp(t,e){return typeof e=="string"?eE(t,e):e instanceof xn?e._internalPath:e._delegate._internalPath}function iN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new S(E.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var kc=class{},Eo=class extends kc{};function xr(t,e,...n){let r=[];e instanceof kc&&r.push(e),r=r.concat(n),function(o){let s=o.filter(u=>u instanceof y_).length,a=o.filter(u=>u instanceof Qf).length;if(s>1||s>0&&a>0)throw new S(E.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var Qf=class t extends Eo{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return pN(e._query,n),new mt(e.firestore,e.converter,Kw(e._query,n))}_parse(e){let n=bo(e.firestore);return function(o,s,a,u,c,d,f){let m;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new S(E.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){sM(f,d);let y=[];for(let w of f)y.push(oM(u,o,w));m={arrayValue:{values:y}}}else m=oM(u,o,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||sM(f,d),m=eN(a,s,f,d==="in"||d==="not-in");return le.create(c,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function oN(t,e,n){let r=e,i=sp("where",t);return Qf._create(i,r,n)}var y_=class t extends kc{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:De.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)pN(s,u),s=Kw(s,u)}(e._query,n),new mt(e.firestore,e.converter,Kw(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var v_=class t extends Eo{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,o,s){if(i.startAt!==null)throw new S(E.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new S(E.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new po(o,s)}(e._query,this._field,this._direction);return new mt(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Sn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function sN(t,e="asc"){let n=e,r=sp("orderBy",t);return v_._create(r,n)}var Yf=class t extends Eo{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new mt(e.firestore,e.converter,gf(e._query,this._limit,this._limitType))}};function aN(t){return LR("limit",t),Yf._create("limit",t,"F")}function uN(t){return LR("limitToLast",t),Yf._create("limitToLast",t,"L")}var Zf=class t extends Eo{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=fN(e,this.type,this._docOrFields,this._inclusive);return new mt(e.firestore,e.converter,function(i,o){return new Sn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,n))}};function cN(...t){return Zf._create("startAt",t,!0)}function lN(...t){return Zf._create("startAfter",t,!1)}var Jf=class t extends Eo{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=fN(e,this.type,this._docOrFields,this._inclusive);return new mt(e.firestore,e.converter,function(i,o){return new Sn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,n))}};function dN(...t){return Jf._create("endBefore",t,!1)}function hN(...t){return Jf._create("endAt",t,!0)}function fN(t,e,n,r){if(n[0]=ke(n[0]),n[0]instanceof _o)return function(o,s,a,u,c){if(!u)throw new S(E.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let f of Gs(o))if(f.field.isKeyField())d.push(fo(s,u.key));else{let m=u.data.field(f.field);if(ep(m))throw new S(E.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let y=f.field.canonicalString();throw new S(E.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}d.push(m)}return new nr(d,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{let i=bo(t.firestore);return function(s,a,u,c,d,f){let m=s.explicitOrderBy;if(d.length>m.length)throw new S(E.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let w=0;w<d.length;w++){let _=d[w];if(m[w].field.isKeyField()){if(typeof _!="string")throw new S(E.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof _}`);if(!T_(s)&&_.indexOf("/")!==-1)throw new S(E.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${_}' contains a slash.`);let T=s.path.child(pe.fromString(_));if(!N.isDocumentKey(T))throw new S(E.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${T}' is not because it contains an odd number of segments.`);let x=new N(T);y.push(fo(a,x))}else{let T=eN(u,c,_);y.push(T)}}return new nr(y,f)}(t._query,t.firestore._databaseId,i,e,n,r)}}function oM(t,e,n){if(typeof(n=ke(n))=="string"){if(n==="")throw new S(E.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!T_(e)&&n.indexOf("/")!==-1)throw new S(E.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(pe.fromString(n));if(!N.isDocumentKey(r))throw new S(E.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return fo(t,new N(r))}if(n instanceof xe)return fo(t,n._key);throw new S(E.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ip(n)}.`)}function sM(t,e){if(!Array.isArray(t)||t.length===0)throw new S(E.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function pN(t,e){let n=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new S(E.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new S(E.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var la=class{convertValue(e,n="none"){switch(ho(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(si(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw L()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Do(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertGeoPoint(e){return new Io(Be(e.latitude),Be(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=b_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(mc(e));default:return null}}convertTimestamp(e){let n=Dr(e);return new Oe(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=pe.fromString(e);$(oR(r));let i=new ai(r.get(1),r.get(3)),o=new N(r.popFirst(5));return i.isEqual(n)||ze(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function ap(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var w_=class extends la{constructor(e){super(),this.firestore=e}convertBytes(e){return new ir(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new xe(this.firestore,null,n)}};var Er=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},pn=class extends _o{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new ri(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(sp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},ri=class extends pn{data(e={}){return super.data(e)}},Mn=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Er(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ri(this._firestore,this._userDataWriter,r.key,r,new Er(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new S(E.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new ri(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Er(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new ri(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Er(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),c=-1,d=-1;return a.type!==0&&(c=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:a5(a.type),doc:u,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function a5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return L()}}function tE(t,e){return t instanceof pn&&e instanceof pn?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Mn&&e instanceof Mn&&t._firestore===e._firestore&&Y_(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function gN(t){t=ge(t,xe);let e=ge(t.firestore,Ne);return kR(rt(e),t._key).then(n=>oE(e,t,n))}var Sr=class extends la{constructor(e){super(),this.firestore=e}convertBytes(e){return new ir(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new xe(this.firestore,null,n)}};function mN(t){t=ge(t,xe);let e=ge(t.firestore,Ne),n=rt(e),r=new Sr(e);return e5(n,t._key).then(i=>new pn(e,r,t._key,i,new Er(i!==null&&i.hasLocalMutations,!0),t.converter))}function yN(t){t=ge(t,xe);let e=ge(t.firestore,Ne);return kR(rt(e),t._key,{source:"server"}).then(n=>oE(e,t,n))}function vN(t){t=ge(t,mt);let e=ge(t.firestore,Ne),n=rt(e),r=new Sr(e);return iN(t._query),OR(n,t._query).then(i=>new Mn(e,r,t,i))}function wN(t){t=ge(t,mt);let e=ge(t.firestore,Ne),n=rt(e),r=new Sr(e);return t5(n,t._query).then(i=>new Mn(e,r,t,i))}function IN(t){t=ge(t,mt);let e=ge(t.firestore,Ne),n=rt(e),r=new Sr(e);return OR(n,t._query,{source:"server"}).then(i=>new Mn(e,r,t,i))}function nE(t,e,n){t=ge(t,xe);let r=ge(t.firestore,Ne),i=ap(t.converter,e,n);return ya(r,[op(bo(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ue.none())])}function rE(t,e,n,...r){t=ge(t,xe);let i=ge(t.firestore,Ne),o=bo(i),s;return s=typeof(e=ke(e))=="string"||e instanceof xn?J_(o,"updateDoc",t._key,e,n,r):Z_(o,"updateDoc",t._key,e),ya(i,[s.toMutation(t._key,Ue.exists(!0))])}function _N(t){return ya(ge(t.firestore,Ne),[new hi(t._key,Ue.none())])}function EN(t,e){let n=ge(t.firestore,Ne),r=Uc(t),i=ap(t.converter,e);return ya(n,[op(bo(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ue.exists(!1))]).then(()=>r)}function iE(t,...e){var n,r,i;t=ke(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||a_(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(a_(e[s])){let f=e[s];e[s]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[s+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[s+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let u,c,d;if(t instanceof xe)c=ge(t.firestore,Ne),d=ha(t._key.path),u={next:f=>{e[s]&&e[s](oE(c,t,f))},error:e[s+1],complete:e[s+2]};else{let f=ge(t,mt);c=ge(f.firestore,Ne),d=f._query;let m=new Sr(c);u={next:y=>{e[s]&&e[s](new Mn(c,m,f,y))},error:e[s+1],complete:e[s+2]},iN(t._query)}return function(m,y,w,_){let T=new ua(_),x=new Mc(y,T,w);return m.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return O_(yield ca(m),x)})),()=>{T.$a(),m.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return F_(yield ca(m),x)}))}}(rt(c),d,a,u)}function DN(t,e){return n5(rt(t=ge(t,Ne)),a_(e)?e:{next:e})}function ya(t,e){return function(r,i){let o=new Je;return r.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){return O4(yield z_(r),i,o)})),o.promise}(rt(t),e)}function oE(t,e,n){let r=n.docs.get(e._key),i=new Sr(t);return new pn(t,i,e._key,r,new Er(n.hasPendingWrites,n.fromCache),e.converter)}var u5={maxAttempts:5};var Xf=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=bo(e)}set(e,n,r){this._verifyNotCommitted();let i=ti(e,this._firestore),o=ap(i.converter,n,r),s=op(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Ue.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let o=ti(e,this._firestore),s;return s=typeof(n=ke(n))=="string"||n instanceof xn?J_(this._dataReader,"WriteBatch.update",o._key,n,r,i):Z_(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,Ue.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=ti(e,this._firestore);return this._mutations=this._mutations.concat(new hi(n._key,Ue.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new S(E.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function ti(t,e){if((t=ke(t)).firestore!==e)throw new S(E.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var I_=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=bo(n)}get(n){let r=ti(n,this._firestore),i=new w_(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return L();let s=o[0];if(s.isFoundDocument())return new _o(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new _o(this._firestore,i,r._key,null,r.converter);throw L()})}set(n,r,i){let o=ti(n,this._firestore),s=ap(o.converter,r,i),a=op(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(n,r,i,...o){let s=ti(n,this._firestore),a;return a=typeof(r=ke(r))=="string"||r instanceof xn?J_(this._dataReader,"Transaction.update",s._key,r,i,o):Z_(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(n){let r=ti(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=ti(e,this._firestore),r=new Sr(this._firestore);return super.get(e).then(i=>new pn(this._firestore,r,n._key,i._document,new Er(!1,!1),n.converter))}};function bN(t,e,n){t=ge(t,Ne);let r=Object.assign(Object.assign({},u5),n);return function(o){if(o.maxAttempts<1)throw new S(E.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let u=new Je;return o.asyncQueue.enqueueAndForget(()=>D(this,null,function*(){let c=yield Z4(o);new r_(o.asyncQueue,c,a,s,u).Xa()})),u.promise}(rt(t),i=>e(new I_(t,i)),r)}function CN(){return new Pc("deleteField")}function TN(){return new d_("serverTimestamp")}function SN(...t){return new h_("arrayUnion",t)}function AN(...t){return new f_("arrayRemove",t)}function xN(t){return new p_("increment",t)}(function(e,n=!0){(function(i){da=i})(DD),Ma(new Di("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Ne(new Cw(r.getProvider("auth-internal")),new xw(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new S(E.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ai(c.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),ar(ax,"4.6.1",e),ar(ax,"4.6.1","esm2017")})();var c5="@firebase/firestore-compat",l5="0.3.30";function dE(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new S("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function MN(){if(typeof Uint8Array>"u")throw new S("unimplemented","Uint8Arrays are not available in this environment.")}function RN(){if(!_M())throw new S("unimplemented","Blobs are unavailable in Firestore in this environment.")}var up=class t{constructor(e){this._delegate=e}static fromBase64String(e){return RN(),new t(ir.fromBase64String(e))}static fromUint8Array(e){return MN(),new t(ir.fromUint8Array(e))}toBase64(){return RN(),this._delegate.toBase64()}toUint8Array(){return MN(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function sE(t){return d5(t,["next","error","complete"])}function d5(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}var aE=class{enableIndexedDbPersistence(e,n){return $R(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return HR(e._delegate)}clearIndexedDbPersistence(e){return zR(e._delegate)}},cp=class{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ai||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&hn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){VR(this._delegate,e,n,r)}enableNetwork(){return WR(this._delegate)}disableNetwork(){return KR(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,W_("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return GR(this._delegate)}onSnapshotsInSync(e){return DN(this._delegate,e)}get app(){if(!this._appCompat)throw new S("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ia(this,K_(this._delegate,e))}catch(n){throw Pt(n,"collection()","Firestore.collection()")}}doc(e){try{return new or(this,Uc(this._delegate,e))}catch(n){throw Pt(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new xo(this,jR(this._delegate,e))}catch(n){throw Pt(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return bN(this._delegate,n=>e(new lp(this,n)))}batch(){return rt(this._delegate),new dp(new Xf(this._delegate,e=>ya(this._delegate,e)))}loadBundle(e){return QR(this._delegate,e)}namedQuery(e){return YR(this._delegate,e).then(n=>n?new xo(this,n):null)}},va=class extends la{constructor(e){super(),this.firestore=e}convertBytes(e){return new up(new ir(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return or.forKey(n,this.firestore,null)}};function h5(t){aM(t)}var lp=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new va(e)}get(e){let n=To(e);return this._delegate.get(n).then(r=>new So(this._firestore,new pn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){let i=To(e);return r?(dE("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=To(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=To(e);return this._delegate.delete(n),this}},dp=class{constructor(e){this._delegate=e}set(e,n,r){let i=To(e);return r?(dE("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=To(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=To(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},wa=class t{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){let r=new ri(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ao(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let r=t.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new t(e,new va(e),n),i.set(n,o)),o}};wa.INSTANCES=new WeakMap;var or=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new va(e)}static forPath(e,n,r){if(e.length%2!==0)throw new S("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new xe(n._delegate,r,new N(e)))}static forKey(e,n,r){return new t(n,new xe(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ia(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ia(this.firestore,K_(this._delegate,e))}catch(n){throw Pt(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ke(e),e instanceof xe?Q_(this._delegate,e):!1}set(e,n){n=dE("DocumentReference.set",n);try{return n?nE(this._delegate,e,n):nE(this._delegate,e)}catch(r){throw Pt(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?rE(this._delegate,e):rE(this._delegate,e,n,...r)}catch(i){throw Pt(i,"updateDoc()","DocumentReference.update()")}}delete(){return _N(this._delegate)}onSnapshot(...e){let n=NN(e),r=PN(e,i=>new So(this.firestore,new pn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return iE(this._delegate,n,r)}get(e){let n;return e?.source==="cache"?n=mN(this._delegate):e?.source==="server"?n=yN(this._delegate):n=gN(this._delegate),n.then(r=>new So(this.firestore,new pn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(wa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Pt(t,e,n){return t.message=t.message.replace(e,n),t}function NN(t){for(let e of t)if(typeof e=="object"&&!sE(e))return e;return{}}function PN(t,e){var n,r;let i;return sE(t[0])?i=t[0]:sE(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:o=>{i.next&&i.next(e(o))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var So=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new or(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return tE(this._delegate,e._delegate)}},Ao=class extends So{data(e){let n=this._delegate.data(e);return this._delegate._converter||uM(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},xo=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new va(e)}where(e,n,r){try{return new t(this.firestore,xr(this._delegate,oN(e,n,r)))}catch(i){throw Pt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,xr(this._delegate,sN(e,n)))}catch(r){throw Pt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,xr(this._delegate,aN(e)))}catch(n){throw Pt(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,xr(this._delegate,uN(e)))}catch(n){throw Pt(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,xr(this._delegate,cN(...e)))}catch(n){throw Pt(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,xr(this._delegate,lN(...e)))}catch(n){throw Pt(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,xr(this._delegate,dN(...e)))}catch(n){throw Pt(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,xr(this._delegate,hN(...e)))}catch(n){throw Pt(n,"endAt()","Query.endAt()")}}isEqual(e){return Y_(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=wN(this._delegate):e?.source==="server"?n=IN(this._delegate):n=vN(this._delegate),n.then(r=>new $c(this.firestore,new Mn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let n=NN(e),r=PN(e,i=>new $c(this.firestore,new Mn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return iE(this._delegate,n,r)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(wa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},uE=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Ao(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},$c=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new xo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Ao(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new uE(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Ao(this._firestore,r))})}isEqual(e){return tE(this._delegate,e._delegate)}},Ia=class t extends xo{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new or(this.firestore,e):null}doc(e){try{return e===void 0?new or(this.firestore,Uc(this._delegate)):new or(this.firestore,Uc(this._delegate,e))}catch(n){throw Pt(n,"doc()","CollectionReference.doc()")}}add(e){return EN(this._delegate,e).then(n=>new or(this.firestore,n))}isEqual(e){return Q_(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(wa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function To(t){return ge(t,xe)}var cE=class t{constructor(...e){this._delegate=new xn(...e)}static documentId(){return new t(Ge.keyField().canonicalString())}isEqual(e){return e=ke(e),e instanceof xn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var lE=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=TN();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=CN();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=SN(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=AN(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=xN(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var f5={Firestore:cp,GeoPoint:Io,Timestamp:Oe,Blob:up,Transaction:lp,WriteBatch:dp,DocumentReference:or,DocumentSnapshot:So,Query:xo,QueryDocumentSnapshot:Ao,QuerySnapshot:$c,CollectionReference:Ia,FieldPath:cE,FieldValue:lE,setLogLevel:h5,CACHE_SIZE_UNLIMITED:BR};function p5(t,e){t.INTERNAL.registerComponent(new Di("firestore-compat",n=>{let r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},f5)))}function g5(t){p5(t,(e,n)=>new cp(e,n,new aE)),t.registerVersion(c5,l5)}g5(Ft);function m5(t,e=Ai){return new ce(n=>{let r;return e!=null?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}function kN(t,e){return m5(t,e)}function y5(t,e){return kN(t,e).pipe(Ri(void 0),Oa(),K(n=>{let[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function pE(t,e){return kN(t,e).pipe(K(n=>({payload:n,type:"query"})))}var hp=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let r=this.ref.collection(e),{ref:i,query:o}=jN(r,n);return new pp(i,o,this.afs)}snapshotChanges(){return y5(this.ref,this.afs.schedulers.outsideAngular).pipe(Ht)}valueChanges(e={}){return this.snapshotChanges().pipe(K(({payload:n})=>e.idField?Pe(j({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return ve(this.ref.get(e)).pipe(Ht)}};function fp(t,e){return pE(t,e).pipe(Ri(void 0),Oa(),K(n=>{let[r,i]=n,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{let c=o.find(f=>f.doc.ref.isEqual(a.ref)),d=r?.payload.docs.find(f=>f.ref.isEqual(a.ref));c&&JSON.stringify(c.doc.metadata)===JSON.stringify(a.metadata)||!c&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function ON(t,e,n){return fp(t,n).pipe(Mi((r,i)=>v5(r,i.map(o=>o.payload),e),[]),ng(),K(r=>r.map(i=>({type:i.type,payload:i}))))}function v5(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=w5(t,r))}),t}function hE(t,e,n,...r){let i=t.slice();return i.splice(e,n,...r),i}function w5(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return hE(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return hE(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return hE(t,e.oldIndex,1);break}return t}function FN(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var pp=class{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=fp(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(K(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(Ri(void 0),Oa(),ft(([r,i])=>i.length>0||!r),K(([,r])=>r),Ht)}auditTrail(e){return this.stateChanges(e).pipe(Mi((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=FN(e);return ON(this.query,n,this.afs.schedulers.outsideAngular).pipe(Ht)}valueChanges(e={}){return pE(this.query,this.afs.schedulers.outsideAngular).pipe(K(n=>n.payload.docs.map(r=>e.idField?Pe(j({},r.data()),{[e.idField]:r.id}):r.data())),Ht)}get(e){return ve(this.query.get(e)).pipe(Ht)}add(e){return this.ref.add(e)}doc(e){return new hp(this.ref.doc(e),this.afs)}},fE=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?fp(this.query,this.afs.schedulers.outsideAngular).pipe(Ht):fp(this.query,this.afs.schedulers.outsideAngular).pipe(K(n=>n.filter(r=>e.indexOf(r.type)>-1)),ft(n=>n.length>0),Ht)}auditTrail(e){return this.stateChanges(e).pipe(Mi((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=FN(e);return ON(this.query,n,this.afs.schedulers.outsideAngular).pipe(Ht)}valueChanges(e={}){return pE(this.query,this.afs.schedulers.outsideAngular).pipe(K(r=>r.payload.docs.map(i=>e.idField?j({[e.idField]:i.id},i.data()):i.data())),Ht)}get(e){return ve(this.query.get(e)).pipe(Ht)}},LN=new U("angularfire2.enableFirestorePersistence"),VN=new U("angularfire2.firestore.persistenceSettings"),I5=new U("angularfire2.firestore.settings"),_5=new U("angularfire2.firestore.use-emulator");function jN(t,e=n=>n){return{query:e(t),ref:t}}var gE=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,o,s,a,u,c,d,f,m,y,w,_,T,x,V){this.schedulers=u;let M=Ru(n,a,r),H=d;f&&Av(M,a,m,w,_,T,y,x),[this.firestore,this.persistenceEnabled$]=mh(`${M.name}.firestore`,"AngularFirestore",M.name,()=>{let W=a.runOutsideAngular(()=>M.firestore());if(o&&W.settings(o),H&&W.useEmulator(...H),i&&!Wi(s)){let Y=()=>{try{return ve(W.enablePersistence(c||void 0).then(()=>!0,()=>!1))}catch(Ie){return typeof console<"u"&&console.warn(Ie),G(!1)}};return[W,a.runOutsideAngular(Y)]}else return[W,G(!1)]},[o,H,i])}collection(n,r){let i;typeof n=="string"?i=this.firestore.collection(n):i=n;let{ref:o,query:s}=jN(i,r),a=this.schedulers.ngZone.run(()=>o);return new pp(a,s,this)}collectionGroup(n,r){let i=r||(s=>s),o=this.firestore.collectionGroup(n);return new fE(i(o),this)}doc(n){let r;typeof n=="string"?r=this.firestore.doc(n):r=n;let i=this.schedulers.ngZone.run(()=>r);return new hp(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(R(Ss),R(As,8),R(LN,8),R(I5,8),R(Ut),R(he),R(ph),R(VN,8),R(_5,8),R(VS,8),R(Ev,8),R(Dv,8),R(bv,8),R(Cv,8),R(Tv,8),R(Sv,8),R(Zi,8))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),hY=(()=>{class t{constructor(){Ft.registerVersion("angularfire",Ts.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:LN,useValue:!0},{provide:VN,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=an({type:t});static \u0275inj=sn({providers:[gE]})}return t})();var pY=(()=>{let e=class e{constructor(r){this.firestore=r,this.productsCollection=this.firestore.collection("products")}addProduct(r){return D(this,null,function*(){return this.productsCollection.add(j({},r))})}getAll(){return this.productsCollection}};e.\u0275fac=function(i){return new(i||e)(R(gE))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var BN=class{};export{ce as a,Ai as b,ve as c,G as d,K as e,J1 as f,eg as g,X1 as h,ng as i,Mi as j,og as k,nO as l,Ve as m,rO as n,q as o,Bb as p,B as q,sn as r,U as s,R as t,ds as u,wn as v,n0 as w,an as x,hs as y,Ja as z,Om as A,eu as B,St as C,Ut as D,u2 as E,$W as F,st as G,Nd as H,he as I,uV as J,em as K,kV as L,OV as M,GW as N,WW as O,KW as P,HC as Q,qC as R,ry as S,iy as T,QW as U,YW as V,ZW as W,uj as X,JW as Y,XW as Z,e7 as _,nu as $,Gi as aa,E7 as ba,D7 as ca,b7 as da,IT as ea,q7 as fa,z7 as ga,Ts as ha,xK as ia,O$ as ja,Zi as ka,ph as la,MK as ma,Ht as na,bS as oa,sU as pa,hK as qa,fK as ra,yK as sa,wK as ta,Ss as ua,As as va,Ru as wa,jK as xa,mh as ya,Ev as za,Dv as Aa,bv as Ba,Cv as Ca,Tv as Da,Sv as Ea,Av as Fa,VS as Ga,hY as Ha,pY as Ia,BN as Ja};
